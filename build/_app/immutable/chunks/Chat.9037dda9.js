import{s as Qt,E as se,F as re,G as oe,H as ie,w as it,e as Pt,i as H,d as m,I as Oe,x as ae,y as xl,p as vt,f as S,g as I,h as E,L as le,Y as ye,u as tt,v as ce,S as Pe,C as Tt,R as fe,a as J,l as mt,O as Kt,c as Q,m as ht,j as f,r as v,n as St,K as Ee,t as Dt,U as We,z as gt,A as pt,V as At,Q as Xe,X as dn,o as Ze,P as ke,B as mn,M as hn}from"./scheduler.cd89c28a.js";import{S as Yt,i as Xt,a as O,t as U,g as qt,c as Wt,h as $l,j as tn,k as He,f as Lt,b as at,d as ct,m as ut,e as ft}from"./index.6bdb6009.js";import{g as gn}from"./globals.7f7f1b26.js";import{e as ne}from"./each.454f9fee.js";import{a as bt}from"./Toaster.svelte_svelte_type_style_lang.162bd233.js";import{M as pn,m as _n}from"./Messages.92992035.js";import{f as Ke}from"./dayjs.min.2d74aef4.js";import{g as Re}from"./navigation.d3c86af2.js";import{p as bn}from"./stores.f01c414e.js";import{p as vn,q as wn,g as Ue,c as en,h as ue,k as Ae,m as ln,a as Le,S as xe,w as $e,W as nn,j as we,u as sn,l as kn,s as yn,r as En,i as Ve,O as je,x as tl}from"./index.69ad1154.js";import{f as rn,r as ze,i as el,h as ll,v as nl,p as sl,s as Sn,a as rl,j as In}from"./index.b3b584e7.js";import{m as Mn,n as Dn,o as Cn,p as Tn}from"./index.fb611b71.js";import{u as Vn,o as ol,c as Bn,b as Be,k as Fe,j as Nn,y as On}from"./index.2262060a.js";import{A as Hn,u as An,a as Ln,b as Pn,r as Un}from"./AddFilesPlaceholder.bc9ab318.js";import{t as il}from"./index.da765736.js";import"./sha256.8dba905a.js";import{T as he}from"./Tooltip.46e9d31e.js";import{h as on,j as Rn,f as Ge}from"./updater.e35c5ea7.js";import{D as an,M as Ne}from"./Dropdown.c9492fee.js";import{s as jn,g as zn,u as Fn,a as qn,M as cn}from"./menu-trigger.06dda4e4.js";import{S as Wn}from"./Switch.b5da2e35.js";import"./i18next.16542173.js";import{T as Zn,S as Gn,U as Jn,q as Qn}from"./UserMenu.ceacc6bb.js";import{S as Yn}from"./Selector.20b64b02.js";import{d as Xn}from"./index.fab67783.js";import{g as Se}from"./spread.8a54911c.js";import{f as Kn}from"./FileSaver.min.898eb36f.js";import{b as xn}from"./index.791b2ed4.js";import"./paths.a760e150.js";import{M as $n}from"./MenuLines.e0a8d8a1.js";import{o as ts}from"./index.a5cf369b.js";const es=n=>({subIds:n&1}),al=n=>({subIds:n[0]});function ls(n){let t;const e=n[6].default,l=se(e,n,n[5],al);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),t=!0},p(s,[o]){l&&l.p&&(!t||o&33)&&re(l,e,s,s[5],t?ie(e,s[5],o,es):oe(s[5]),al)},i(s){t||(O(l,s),t=!0)},o(s){U(l,s),t=!1},d(s){l&&l.d(s)}}}function ns(n,t,e){let l,{$$slots:s={},$$scope:o}=t,{disabled:r=void 0}=t,{open:i=void 0}=t,{onOpenChange:a=void 0}=t;const{updateOption:u,ids:c,states:{subOpen:d}}=jn({disabled:r,onOpenChange:({next:_})=>(i!==_&&(a==null||a(_),e(2,i=_)),_)}),k=Xn([c.menu,c.trigger],([_,p])=>({menu:_,trigger:p}));return it(n,k,_=>e(0,l=_)),n.$$set=_=>{"disabled"in _&&e(3,r=_.disabled),"open"in _&&e(2,i=_.open),"onOpenChange"in _&&e(4,a=_.onOpenChange),"$$scope"in _&&e(5,o=_.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&i!==void 0&&d.set(i),n.$$.dirty&8&&u("disabled",r)},[l,k,i,r,a,o,s]}class ss extends Yt{constructor(t){super(),Xt(this,t,ns,ls,Qt,{disabled:3,open:2,onOpenChange:4})}}const rs=n=>({builder:n[0]&256}),cl=n=>({builder:n[8]}),os=n=>({builder:n[0]&256}),ul=n=>({builder:n[8]}),is=n=>({builder:n[0]&256}),fl=n=>({builder:n[8]}),as=n=>({builder:n[0]&256}),dl=n=>({builder:n[8]}),cs=n=>({builder:n[0]&256}),ml=n=>({builder:n[8]}),us=n=>({builder:n[0]&256}),hl=n=>({builder:n[8]});function fs(n){let t,e,l,s;const o=n[28].default,r=se(o,n,n[27],cl);let i=[n[8],n[13]],a={};for(let u=0;u<i.length;u+=1)a=ae(a,i[u]);return{c(){t=S("div"),r&&r.c(),this.h()},l(u){t=I(u,"DIV",{});var c=E(t);r&&r.l(c),c.forEach(m),this.h()},h(){le(t,a)},m(u,c){H(u,t,c),r&&r.m(t,null),n[33](t),e=!0,l||(s=[ye(n[8].action(t)),tt(t,"m-focusout",n[12]),tt(t,"m-keydown",n[12]),tt(t,"m-pointermove",n[12])],l=!0)},p(u,c){r&&r.p&&(!e||c[0]&134217984)&&re(r,o,u,u[27],e?ie(o,u[27],c,rs):oe(u[27]),cl),le(t,a=Se(i,[c[0]&256&&u[8],c[0]&8192&&u[13]]))},i(u){e||(O(r,u),e=!0)},o(u){U(r,u),e=!1},d(u){u&&m(t),r&&r.d(u),n[33](null),l=!1,ce(s)}}}function ds(n){let t,e,l,s,o;const r=n[28].default,i=se(r,n,n[27],ul);let a=[n[8],n[13]],u={};for(let c=0;c<a.length;c+=1)u=ae(u,a[c]);return{c(){t=S("div"),i&&i.c(),this.h()},l(c){t=I(c,"DIV",{});var d=E(t);i&&i.l(d),d.forEach(m),this.h()},h(){le(t,u)},m(c,d){H(c,t,d),i&&i.m(t,null),n[32](t),l=!0,s||(o=[ye(n[8].action(t)),tt(t,"m-focusout",n[12]),tt(t,"m-keydown",n[12]),tt(t,"m-pointermove",n[12])],s=!0)},p(c,d){n=c,i&&i.p&&(!l||d[0]&134217984)&&re(i,r,n,n[27],l?ie(r,n[27],d,os):oe(n[27]),ul),le(t,u=Se(a,[d[0]&256&&n[8],d[0]&8192&&n[13]]))},i(c){l||(O(i,c),e&&e.end(1),l=!0)},o(c){U(i,c),c&&(e=$l(t,n[5],n[6])),l=!1},d(c){c&&m(t),i&&i.d(c),n[32](null),c&&e&&e.end(),s=!1,ce(o)}}}function ms(n){let t,e,l,s,o;const r=n[28].default,i=se(r,n,n[27],fl);let a=[n[8],n[13]],u={};for(let c=0;c<a.length;c+=1)u=ae(u,a[c]);return{c(){t=S("div"),i&&i.c(),this.h()},l(c){t=I(c,"DIV",{});var d=E(t);i&&i.l(d),d.forEach(m),this.h()},h(){le(t,u)},m(c,d){H(c,t,d),i&&i.m(t,null),n[31](t),l=!0,s||(o=[ye(n[8].action(t)),tt(t,"m-focusout",n[12]),tt(t,"m-keydown",n[12]),tt(t,"m-pointermove",n[12])],s=!0)},p(c,d){n=c,i&&i.p&&(!l||d[0]&134217984)&&re(i,r,n,n[27],l?ie(r,n[27],d,is):oe(n[27]),fl),le(t,u=Se(a,[d[0]&256&&n[8],d[0]&8192&&n[13]]))},i(c){l||(O(i,c),c&&(e||Pe(()=>{e=tn(t,n[3],n[4]),e.start()})),l=!0)},o(c){U(i,c),l=!1},d(c){c&&m(t),i&&i.d(c),n[31](null),s=!1,ce(o)}}}function hs(n){let t,e,l,s,o,r;const i=n[28].default,a=se(i,n,n[27],dl);let u=[n[8],n[13]],c={};for(let d=0;d<u.length;d+=1)c=ae(c,u[d]);return{c(){t=S("div"),a&&a.c(),this.h()},l(d){t=I(d,"DIV",{});var k=E(t);a&&a.l(k),k.forEach(m),this.h()},h(){le(t,c)},m(d,k){H(d,t,k),a&&a.m(t,null),n[30](t),s=!0,o||(r=[ye(n[8].action(t)),tt(t,"m-focusout",n[12]),tt(t,"m-keydown",n[12]),tt(t,"m-pointermove",n[12])],o=!0)},p(d,k){n=d,a&&a.p&&(!s||k[0]&134217984)&&re(a,i,n,n[27],s?ie(i,n[27],k,as):oe(n[27]),dl),le(t,c=Se(u,[k[0]&256&&n[8],k[0]&8192&&n[13]]))},i(d){s||(O(a,d),d&&Pe(()=>{s&&(l&&l.end(1),e=tn(t,n[3],n[4]),e.start())}),s=!0)},o(d){U(a,d),e&&e.invalidate(),d&&(l=$l(t,n[5],n[6])),s=!1},d(d){d&&m(t),a&&a.d(d),n[30](null),d&&l&&l.end(),o=!1,ce(r)}}}function gs(n){let t,e,l,s,o;const r=n[28].default,i=se(r,n,n[27],ml);let a=[n[8],n[13]],u={};for(let c=0;c<a.length;c+=1)u=ae(u,a[c]);return{c(){t=S("div"),i&&i.c(),this.h()},l(c){t=I(c,"DIV",{});var d=E(t);i&&i.l(d),d.forEach(m),this.h()},h(){le(t,u)},m(c,d){H(c,t,d),i&&i.m(t,null),n[29](t),l=!0,s||(o=[ye(n[8].action(t)),tt(t,"m-focusout",n[12]),tt(t,"m-keydown",n[12]),tt(t,"m-pointermove",n[12])],s=!0)},p(c,d){n=c,i&&i.p&&(!l||d[0]&134217984)&&re(i,r,n,n[27],l?ie(r,n[27],d,cs):oe(n[27]),ml),le(t,u=Se(a,[d[0]&256&&n[8],d[0]&8192&&n[13]]))},i(c){l||(O(i,c),c&&Pe(()=>{l&&(e||(e=He(t,n[1],n[2],!0)),e.run(1))}),l=!0)},o(c){U(i,c),c&&(e||(e=He(t,n[1],n[2],!1)),e.run(0)),l=!1},d(c){c&&m(t),i&&i.d(c),n[29](null),c&&e&&e.end(),s=!1,ce(o)}}}function ps(n){let t;const e=n[28].default,l=se(e,n,n[27],hl);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),t=!0},p(s,o){l&&l.p&&(!t||o[0]&134217984)&&re(l,e,s,s[27],t?ie(e,s[27],o,us):oe(s[27]),hl)},i(s){t||(O(l,s),t=!0)},o(s){U(l,s),t=!1},d(s){l&&l.d(s)}}}function _s(n){let t,e,l,s;const o=[ps,gs,hs,ms,ds,fs],r=[];function i(a,u){return a[7]&&a[9]?0:a[1]&&a[9]?1:a[3]&&a[5]&&a[9]?2:a[3]&&a[9]?3:a[5]&&a[9]?4:a[9]?5:-1}return~(t=i(n))&&(e=r[t]=o[t](n)),{c(){e&&e.c(),l=Pt()},l(a){e&&e.l(a),l=Pt()},m(a,u){~t&&r[t].m(a,u),H(a,l,u),s=!0},p(a,u){let c=t;t=i(a),t===c?~t&&r[t].p(a,u):(e&&(qt(),U(r[c],1,1,()=>{r[c]=null}),Wt()),~t?(e=r[t],e?e.p(a,u):(e=r[t]=o[t](a),e.c()),O(e,1),e.m(l.parentNode,l)):e=null)},i(a){s||(O(e),s=!0)},o(a){U(e),s=!1},d(a){a&&m(l),~t&&r[t].d(a)}}}function bs(n,t,e){let l;const s=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let o=Oe(t,s),r,i,{$$slots:a={},$$scope:u}=t,{transition:c=void 0}=t,{transitionConfig:d=void 0}=t,{inTransition:k=void 0}=t,{inTransitionConfig:_=void 0}=t,{outTransition:p=void 0}=t,{outTransitionConfig:g=void 0}=t,{asChild:h=!1}=t,{id:w=void 0}=t,{side:y="right"}=t,{align:V="start"}=t,{sideOffset:N=0}=t,{alignOffset:D=0}=t,{collisionPadding:T=8}=t,{avoidCollisions:B=!0}=t,{collisionBoundary:C=void 0}=t,{sameWidth:$=!1}=t,{fitViewport:L=!1}=t,{strategy:Z="absolute"}=t,{overlap:P=!1}=t,{el:A=void 0}=t;const{elements:{subMenu:et},states:{subOpen:wt},ids:kt,getAttrs:Zt}=zn();it(n,et,R=>e(26,r=R)),it(n,wt,R=>e(9,i=R));const jt=on(),Ot=Zt("sub-content");function Ut(R){vt[R?"unshift":"push"](()=>{A=R,e(0,A)})}function Vt(R){vt[R?"unshift":"push"](()=>{A=R,e(0,A)})}function Gt(R){vt[R?"unshift":"push"](()=>{A=R,e(0,A)})}function xt(R){vt[R?"unshift":"push"](()=>{A=R,e(0,A)})}function Jt(R){vt[R?"unshift":"push"](()=>{A=R,e(0,A)})}return n.$$set=R=>{t=ae(ae({},t),xl(R)),e(13,o=Oe(t,s)),"transition"in R&&e(1,c=R.transition),"transitionConfig"in R&&e(2,d=R.transitionConfig),"inTransition"in R&&e(3,k=R.inTransition),"inTransitionConfig"in R&&e(4,_=R.inTransitionConfig),"outTransition"in R&&e(5,p=R.outTransition),"outTransitionConfig"in R&&e(6,g=R.outTransitionConfig),"asChild"in R&&e(7,h=R.asChild),"id"in R&&e(14,w=R.id),"side"in R&&e(15,y=R.side),"align"in R&&e(16,V=R.align),"sideOffset"in R&&e(17,N=R.sideOffset),"alignOffset"in R&&e(18,D=R.alignOffset),"collisionPadding"in R&&e(19,T=R.collisionPadding),"avoidCollisions"in R&&e(20,B=R.avoidCollisions),"collisionBoundary"in R&&e(21,C=R.collisionBoundary),"sameWidth"in R&&e(22,$=R.sameWidth),"fitViewport"in R&&e(23,L=R.fitViewport),"strategy"in R&&e(24,Z=R.strategy),"overlap"in R&&e(25,P=R.overlap),"el"in R&&e(0,A=R.el),"$$scope"in R&&e(27,u=R.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&w&&kt.menu.set(w),n.$$.dirty[0]&67108864&&e(8,l=r),n.$$.dirty[0]&256&&Object.assign(l,Ot),n.$$.dirty[0]&67076096&&Fn({side:y,align:V,sideOffset:N,alignOffset:D,collisionPadding:T,avoidCollisions:B,collisionBoundary:C,sameWidth:$,fitViewport:L,strategy:Z,overlap:P})},[A,c,d,k,_,p,g,h,l,i,et,wt,jt,o,w,y,V,N,D,T,B,C,$,L,Z,P,r,u,a,Ut,Vt,Gt,xt,Jt]}class vs extends Yt{constructor(t){super(),Xt(this,t,bs,_s,Qt,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const ws=n=>({builder:n&4}),gl=n=>({builder:n[2]}),ks=n=>({builder:n&4}),pl=n=>({builder:n[2]});function ys(n){let t,e,l,s;const o=n[13].default,r=se(o,n,n[12],gl);let i=[n[2],n[6]],a={};for(let u=0;u<i.length;u+=1)a=ae(a,i[u]);return{c(){t=S("div"),r&&r.c(),this.h()},l(u){t=I(u,"DIV",{});var c=E(t);r&&r.l(c),c.forEach(m),this.h()},h(){le(t,a)},m(u,c){H(u,t,c),r&&r.m(t,null),n[14](t),e=!0,l||(s=[ye(n[2].action(t)),tt(t,"m-click",n[5]),tt(t,"m-focusin",n[5]),tt(t,"m-focusout",n[5]),tt(t,"m-keydown",n[5]),tt(t,"m-pointerleave",n[5]),tt(t,"m-pointermove",n[5])],l=!0)},p(u,c){r&&r.p&&(!e||c&4100)&&re(r,o,u,u[12],e?ie(o,u[12],c,ws):oe(u[12]),gl),le(t,a=Se(i,[c&4&&u[2],c&64&&u[6]]))},i(u){e||(O(r,u),e=!0)},o(u){U(r,u),e=!1},d(u){u&&m(t),r&&r.d(u),n[14](null),l=!1,ce(s)}}}function Es(n){let t;const e=n[13].default,l=se(e,n,n[12],pl);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),t=!0},p(s,o){l&&l.p&&(!t||o&4100)&&re(l,e,s,s[12],t?ie(e,s[12],o,ks):oe(s[12]),pl)},i(s){t||(O(l,s),t=!0)},o(s){U(l,s),t=!1},d(s){l&&l.d(s)}}}function Ss(n){let t,e,l,s;const o=[Es,ys],r=[];function i(a,u){return a[1]?0:1}return t=i(n),e=r[t]=o[t](n),{c(){e.c(),l=Pt()},l(a){e.l(a),l=Pt()},m(a,u){r[t].m(a,u),H(a,l,u),s=!0},p(a,[u]){let c=t;t=i(a),t===c?r[t].p(a,u):(qt(),U(r[c],1,1,()=>{r[c]=null}),Wt(),e=r[t],e?e.p(a,u):(e=r[t]=o[t](a),e.c()),O(e,1),e.m(l.parentNode,l))},i(a){s||(O(e),s=!0)},o(a){U(e),s=!1},d(a){a&&m(l),r[t].d(a)}}}function Is(n,t,e){let l,s;const o=["disabled","asChild","id","el"];let r=Oe(t,o),i,a,{$$slots:u={},$$scope:c}=t,{disabled:d=!1}=t,{asChild:k=!1}=t,{id:_=void 0}=t,{el:p=void 0}=t;const{elements:{subTrigger:g},ids:h,getAttrs:w,options:y}=qn();it(n,g,T=>e(11,a=T));const{disabled:V}=y;it(n,V,T=>e(10,i=T));const N=on();function D(T){vt[T?"unshift":"push"](()=>{p=T,e(0,p)})}return n.$$set=T=>{t=ae(ae({},t),xl(T)),e(6,r=Oe(t,o)),"disabled"in T&&e(7,d=T.disabled),"asChild"in T&&e(1,k=T.asChild),"id"in T&&e(8,_=T.id),"el"in T&&e(0,p=T.el),"$$scope"in T&&e(12,c=T.$$scope)},n.$$.update=()=>{n.$$.dirty&256&&_&&h.trigger.set(_),n.$$.dirty&2048&&e(2,l=a),n.$$.dirty&1152&&e(9,s={...w("sub-trigger"),...Rn(d||i)}),n.$$.dirty&516&&Object.assign(l,s)},[p,k,l,g,V,N,r,d,_,s,i,a,c,u,D]}class Ms extends Yt{constructor(t){super(),Xt(this,t,Is,Ss,Qt,{disabled:7,asChild:1,id:8,el:0})}}function _l(n,t,e){const l=n.slice();return l[11]=t[e],l[13]=e,l}function bl(n){let t,e,l,s='<div class="text-lg font-semibold mt-2">/</div>',o,r,i,a,u,c,d='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>',k,_,p=n[2].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"",g,h=ne(n[1]),w=[];for(let y=0;y<h.length;y+=1)w[y]=vl(_l(n,h,y));return{c(){t=S("div"),e=S("div"),l=S("div"),l.innerHTML=s,o=J(),r=S("div"),i=S("div");for(let y=0;y<w.length;y+=1)w[y].c();a=J(),u=S("div"),c=S("div"),c.innerHTML=d,k=J(),_=S("div"),g=mt(p),this.h()},l(y){t=I(y,"DIV",{class:!0});var V=E(t);e=I(V,"DIV",{class:!0});var N=E(e);l=I(N,"DIV",{class:!0,"data-svelte-h":!0}),Kt(l)!=="svelte-1ynv172"&&(l.innerHTML=s),o=Q(N),r=I(N,"DIV",{class:!0});var D=E(r);i=I(D,"DIV",{class:!0});var T=E(i);for(let $=0;$<w.length;$+=1)w[$].l(T);T.forEach(m),a=Q(D),u=I(D,"DIV",{class:!0});var B=E(u);c=I(B,"DIV",{"data-svelte-h":!0}),Kt(c)!=="svelte-cdi12d"&&(c.innerHTML=d),k=Q(B),_=I(B,"DIV",{class:!0});var C=E(_);g=ht(C,p),C.forEach(m),B.forEach(m),D.forEach(m),N.forEach(m),V.forEach(m),this.h()},h(){f(l,"class","bg-gray-100 dark:bg-gray-700 w-10 rounded-l-xl text-center"),f(i,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5"),f(_,"class","line-clamp-1"),f(u,"class","px-2 pb-1 text-xs text-gray-600 bg-white rounded-br-xl flex items-center space-x-1"),f(r,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white"),f(e,"class","flex w-full px-2"),f(t,"class","md:px-2 mb-3 text-left w-full absolute bottom-0 left-0 right-0")},m(y,V){H(y,t,V),v(t,e),v(e,l),v(e,o),v(e,r),v(r,i);for(let N=0;N<w.length;N+=1)w[N]&&w[N].m(i,null);v(r,a),v(r,u),v(u,c),v(u,k),v(u,_),v(_,g)},p(y,V){if(V&19){h=ne(y[1]);let N;for(N=0;N<h.length;N+=1){const D=_l(y,h,N);w[N]?w[N].p(D,V):(w[N]=vl(D),w[N].c(),w[N].m(i,null))}for(;N<w.length;N+=1)w[N].d(1);w.length=h.length}V&4&&p!==(p=y[2].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"")&&St(g,p)},d(y){y&&m(t),Ee(w,y)}}}function vl(n){let t,e,l=n[11].command+"",s,o,r,i=n[11].title+"",a,u,c,d,k;function _(){return n[9](n[11])}function p(){return n[10](n[13])}return{c(){t=S("button"),e=S("div"),s=mt(l),o=J(),r=S("div"),a=mt(i),u=J(),this.h()},l(g){t=I(g,"BUTTON",{class:!0,type:!0});var h=E(t);e=I(h,"DIV",{class:!0});var w=E(e);s=ht(w,l),w.forEach(m),o=Q(h),r=I(h,"DIV",{class:!0});var y=E(r);a=ht(y,i),y.forEach(m),u=Q(h),h.forEach(m),this.h()},h(){f(e,"class","font-medium text-black"),f(r,"class","text-xs text-gray-600"),f(t,"class",c="px-3 py-1.5 rounded-xl w-full text-left "+(n[13]===n[0]?" bg-gray-100 selected-command-option-button":"")),f(t,"type","button")},m(g,h){H(g,t,h),v(t,e),v(e,s),v(t,o),v(t,r),v(r,a),v(t,u),d||(k=[tt(t,"click",_),tt(t,"mousemove",p),tt(t,"focus",Cs)],d=!0)},p(g,h){n=g,h&2&&l!==(l=n[11].command+"")&&St(s,l),h&2&&i!==(i=n[11].title+"")&&St(a,i),h&1&&c!==(c="px-3 py-1.5 rounded-xl w-full text-left "+(n[13]===n[0]?" bg-gray-100 selected-command-option-button":""))&&f(t,"class",c)},d(g){g&&m(t),d=!1,ce(k)}}}function Ds(n){let t,e=n[1].length>0&&bl(n);return{c(){e&&e.c(),t=Pt()},l(l){e&&e.l(l),t=Pt()},m(l,s){e&&e.m(l,s),H(l,t,s)},p(l,[s]){l[1].length>0?e?e.p(l,s):(e=bl(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:Tt,o:Tt,d(l){l&&m(t),e&&e.d(l)}}}const Cs=()=>{};function Ts(n,t,e){let l,s;it(n,vn,p=>e(8,s=p));const o=fe("i18n");it(n,o,p=>e(2,l=p));let{prompt:r=""}=t,i=0,a=[];const u=()=>{e(0,i=Math.max(0,i-1))},c=()=>{e(0,i=Math.min(i+1,a.length-1))},d=async p=>{let g=p.content;if(p.content.includes("{{CLIPBOARD}}")){const y=await navigator.clipboard.readText().catch(V=>(bt.error(l.t("Failed to read clipboard contents")),"{{CLIPBOARD}}"));g=p.content.replaceAll("{{CLIPBOARD}}",y)}e(5,r=g);const h=document.getElementById("chat-textarea");await Dt(),h.style.height="",h.style.height=Math.min(h.scrollHeight,200)+"px",h==null||h.focus(),await Dt();const w=rn(r);if(w.length>0){const y=w.at(0);h.setSelectionRange(y==null?void 0:y.startIndex,y.endIndex+1)}},k=p=>{d(p)},_=p=>{e(0,i=p)};return n.$$set=p=>{"prompt"in p&&e(5,r=p.prompt)},n.$$.update=()=>{n.$$.dirty&288&&e(1,a=s.filter(p=>p.command.includes(r)).sort((p,g)=>p.title.localeCompare(g.title))),n.$$.dirty&32&&r&&e(0,i=0)},[i,a,l,o,d,r,u,c,s,k,_]}class Vs extends Yt{constructor(t){super(),Xt(this,t,Ts,Ds,Qt,{prompt:5,selectUp:6,selectDown:7})}get selectUp(){return this.$$.ctx[6]}get selectDown(){return this.$$.ctx[7]}}function wl(n,t,e){const l=n.slice();return l[19]=t[e],l[21]=e,l}function kl(n){let t,e,l,s='<div class="text-lg font-semibold mt-2">#</div>',o,r,i,a,u,c,d=ne(n[3]),k=[];for(let h=0;h<d.length;h+=1)k[h]=yl(wl(n,d,h));function _(h,w){var y,V;if(w&1&&(u=null),w&1&&(c=null),u==null&&(u=!!h[0].split(" ").some(Ls)),u)return Hs;if(c==null&&(c=!!((V=(y=h[0].split(" "))==null?void 0:y.at(0))!=null&&V.substring(1).startsWith("http"))),c)return Os}let p=_(n,-1),g=p&&p(n);return{c(){t=S("div"),e=S("div"),l=S("div"),l.innerHTML=s,o=J(),r=S("div"),i=S("div");for(let h=0;h<k.length;h+=1)k[h].c();a=J(),g&&g.c(),this.h()},l(h){t=I(h,"DIV",{class:!0});var w=E(t);e=I(w,"DIV",{class:!0});var y=E(e);l=I(y,"DIV",{class:!0,"data-svelte-h":!0}),Kt(l)!=="svelte-czbw16"&&(l.innerHTML=s),o=Q(y),r=I(y,"DIV",{class:!0});var V=E(r);i=I(V,"DIV",{class:!0});var N=E(i);for(let D=0;D<k.length;D+=1)k[D].l(N);a=Q(N),g&&g.l(N),N.forEach(m),V.forEach(m),y.forEach(m),w.forEach(m),this.h()},h(){f(l,"class","bg-gray-100 dark:bg-gray-700 w-10 rounded-l-xl text-center"),f(i,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5"),f(r,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white"),f(e,"class","flex w-full px-2"),f(t,"class","md:px-2 mb-3 text-left w-full absolute bottom-0 left-0 right-0")},m(h,w){H(h,t,w),v(t,e),v(e,l),v(e,o),v(e,r),v(r,i);for(let y=0;y<k.length;y+=1)k[y]&&k[y].m(i,null);v(i,a),g&&g.m(i,null)},p(h,w){if(w&46){d=ne(h[3]);let y;for(y=0;y<d.length;y+=1){const V=wl(h,d,y);k[y]?k[y].p(V,w):(k[y]=yl(V),k[y].c(),k[y].m(i,a))}for(;y<k.length;y+=1)k[y].d(1);k.length=d.length}p===(p=_(h,w))&&g?g.p(h,w):(g&&g.d(1),g=p&&p(h),g&&(g.c(),g.m(i,null)))},d(h){h&&m(t),Ee(k,h),g&&g.d()}}}function Bs(n){let t,e,l=n[19].name+"",s,o,r=n[19].filename+"",i,a,u,c,d=n[19].title+"",k;return{c(){t=S("div"),e=mt("#"),s=mt(l),o=mt(" ("),i=mt(r),a=mt(")"),u=J(),c=S("div"),k=mt(d),this.h()},l(_){t=I(_,"DIV",{class:!0});var p=E(t);e=ht(p,"#"),s=ht(p,l),o=ht(p," ("),i=ht(p,r),a=ht(p,")"),p.forEach(m),u=Q(_),c=I(_,"DIV",{class:!0});var g=E(c);k=ht(g,d),g.forEach(m),this.h()},h(){f(t,"class","font-medium text-black line-clamp-1"),f(c,"class","text-xs text-gray-600 line-clamp-1")},m(_,p){H(_,t,p),v(t,e),v(t,s),v(t,o),v(t,i),v(t,a),H(_,u,p),H(_,c,p),v(c,k)},p(_,p){p&8&&l!==(l=_[19].name+"")&&St(s,l),p&8&&r!==(r=_[19].filename+"")&&St(i,r),p&8&&d!==(d=_[19].title+"")&&St(k,d)},d(_){_&&(m(t),m(u),m(c))}}}function Ns(n){var a;let t,e=(((a=n[19])==null?void 0:a.title)??`#${n[19].name}`)+"",l,s,o,r=n[1].t("Collection")+"",i;return{c(){t=S("div"),l=mt(e),s=J(),o=S("div"),i=mt(r),this.h()},l(u){t=I(u,"DIV",{class:!0});var c=E(t);l=ht(c,e),c.forEach(m),s=Q(u),o=I(u,"DIV",{class:!0});var d=E(o);i=ht(d,r),d.forEach(m),this.h()},h(){f(t,"class","font-medium text-black line-clamp-1"),f(o,"class","text-xs text-gray-600 line-clamp-1")},m(u,c){H(u,t,c),v(t,l),H(u,s,c),H(u,o,c),v(o,i)},p(u,c){var d;c&8&&e!==(e=(((d=u[19])==null?void 0:d.title)??`#${u[19].name}`)+"")&&St(l,e),c&2&&r!==(r=u[1].t("Collection")+"")&&St(i,r)},d(u){u&&(m(t),m(s),m(o))}}}function yl(n){let t,e,l,s;function o(c,d){return c[19].type==="collection"?Ns:Bs}let r=o(n),i=r(n);function a(){return n[14](n[19])}function u(){return n[15](n[21])}return{c(){t=S("button"),i.c(),this.h()},l(c){t=I(c,"BUTTON",{class:!0,type:!0});var d=E(t);i.l(d),d.forEach(m),this.h()},h(){f(t,"class",e="px-3 py-1.5 rounded-xl w-full text-left "+(n[21]===n[2]?" bg-gray-100 selected-command-option-button":"")),f(t,"type","button")},m(c,d){H(c,t,d),i.m(t,null),l||(s=[tt(t,"click",a),tt(t,"mousemove",u),tt(t,"focus",Ps)],l=!0)},p(c,d){n=c,r===(r=o(n))&&i?i.p(n,d):(i.d(1),i=r(n),i&&(i.c(),i.m(t,null))),d&4&&e!==(e="px-3 py-1.5 rounded-xl w-full text-left "+(n[21]===n[2]?" bg-gray-100 selected-command-option-button":""))&&f(t,"class",e)},d(c){c&&m(t),i.d(),l=!1,ce(s)}}}function Os(n){var d,k;let t,e,l=((k=(d=n[0].split(" "))==null?void 0:d.at(0))==null?void 0:k.substring(1))+"",s,o,r,i=n[1].t("Web")+"",a,u,c;return{c(){t=S("button"),e=S("div"),s=mt(l),o=J(),r=S("div"),a=mt(i),this.h()},l(_){t=I(_,"BUTTON",{class:!0,type:!0});var p=E(t);e=I(p,"DIV",{class:!0});var g=E(e);s=ht(g,l),g.forEach(m),o=Q(p),r=I(p,"DIV",{class:!0});var h=E(r);a=ht(h,i),h.forEach(m),p.forEach(m),this.h()},h(){f(e,"class","font-medium text-black line-clamp-1"),f(r,"class","text-xs text-gray-600 line-clamp-1"),f(t,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-100 selected-command-option-button"),f(t,"type","button")},m(_,p){H(_,t,p),v(t,e),v(e,s),v(t,o),v(t,r),v(r,a),u||(c=tt(t,"click",n[17]),u=!0)},p(_,p){var g,h;p&1&&l!==(l=((h=(g=_[0].split(" "))==null?void 0:g.at(0))==null?void 0:h.substring(1))+"")&&St(s,l),p&2&&i!==(i=_[1].t("Web")+"")&&St(a,i)},d(_){_&&m(t),u=!1,c()}}}function Hs(n){var d,k;let t,e,l=((k=(d=n[0].split(" "))==null?void 0:d.at(0))==null?void 0:k.substring(1))+"",s,o,r,i=n[1].t("Youtube")+"",a,u,c;return{c(){t=S("button"),e=S("div"),s=mt(l),o=J(),r=S("div"),a=mt(i),this.h()},l(_){t=I(_,"BUTTON",{class:!0,type:!0});var p=E(t);e=I(p,"DIV",{class:!0});var g=E(e);s=ht(g,l),g.forEach(m),o=Q(p),r=I(p,"DIV",{class:!0});var h=E(r);a=ht(h,i),h.forEach(m),p.forEach(m),this.h()},h(){f(e,"class","font-medium text-black line-clamp-1"),f(r,"class","text-xs text-gray-600 line-clamp-1"),f(t,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-100 selected-command-option-button"),f(t,"type","button")},m(_,p){H(_,t,p),v(t,e),v(e,s),v(t,o),v(t,r),v(r,a),u||(c=tt(t,"click",n[16]),u=!0)},p(_,p){var g,h;p&1&&l!==(l=((h=(g=_[0].split(" "))==null?void 0:g.at(0))==null?void 0:h.substring(1))+"")&&St(s,l),p&2&&i!==(i=_[1].t("Youtube")+"")&&St(a,i)},d(_){_&&m(t),u=!1,c()}}}function As(n){var s,o;let t=n[3].length>0||((o=(s=n[0].split(" "))==null?void 0:s.at(0))==null?void 0:o.substring(1).startsWith("http")),e,l=t&&kl(n);return{c(){l&&l.c(),e=Pt()},l(r){l&&l.l(r),e=Pt()},m(r,i){l&&l.m(r,i),H(r,e,i)},p(r,[i]){var a,u;i&9&&(t=r[3].length>0||((u=(a=r[0].split(" "))==null?void 0:a.at(0))==null?void 0:u.substring(1).startsWith("http"))),t?l?l.p(r,i):(l=kl(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:Tt,o:Tt,d(r){r&&m(e),l&&l.d(r)}}}const Ls=n=>n.substring(1).startsWith("https://www.youtube.com")||n.substring(1).startsWith("https://youtu.be"),Ps=()=>{};function Us(n,t,e){let l,s,o;it(n,wn,T=>e(13,s=T));const r=fe("i18n");it(n,r,T=>e(1,o=T));let{prompt:i=""}=t;const a=We();let u=0,c=[],d=[],k=[];const _=()=>{e(2,u=Math.max(0,u-1))},p=()=>{e(2,u=Math.min(u+1,c.length-1))},g=async T=>{a("select",T),e(0,i=ze(i));const B=document.getElementById("chat-textarea");await Dt(),B==null||B.focus(),await Dt()},h=async T=>{a("url",T),e(0,i=ze(i));const B=document.getElementById("chat-textarea");await Dt(),B==null||B.focus(),await Dt()},w=async T=>{a("youtube",T),e(0,i=ze(i));const B=document.getElementById("chat-textarea");await Dt(),B==null||B.focus(),await Dt()},y=T=>{console.log(T),g(T)},V=T=>{e(2,u=T)},N=()=>{var B,C;const T=(C=(B=i.split(" "))==null?void 0:B.at(0))==null?void 0:C.substring(1);el(T)?w(T):bt.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))},D=()=>{var B,C;const T=(C=(B=i.split(" "))==null?void 0:B.at(0))==null?void 0:C.substring(1);el(T)?h(T):bt.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))};return n.$$set=T=>{"prompt"in T&&e(0,i=T.prompt)},n.$$.update=()=>{n.$$.dirty&8194&&e(11,k=[...s.length>0?[{name:"All Documents",type:"collection",title:o.t("All Documents"),collection_names:s.map(T=>T.collection_name)}]:[],...s.reduce((T,B,C,$)=>{var L;return[...new Set([...T,...(((L=B==null?void 0:B.content)==null?void 0:L.tags)??[]).map(Z=>Z.name)])]},[]).map(T=>({name:T,type:"collection",collection_names:s.filter(B=>{var C;return(((C=B==null?void 0:B.content)==null?void 0:C.tags)??[]).map($=>$.name).includes(T)}).map(B=>B.collection_name)}))]),n.$$.dirty&2049&&e(12,l=k.filter(T=>{var B,C;return T.name.includes(((C=(B=i.split(" "))==null?void 0:B.at(0))==null?void 0:C.substring(1))??"")}).sort((T,B)=>T.name.localeCompare(B.name))),n.$$.dirty&8193&&e(10,d=s.filter(T=>{var B,C;return T.name.includes(((C=(B=i.split(" "))==null?void 0:B.at(0))==null?void 0:C.substring(1))??"")}).sort((T,B)=>T.title.localeCompare(B.title))),n.$$.dirty&5120&&e(3,c=[...l,...d]),n.$$.dirty&4097&&i&&(e(2,u=0),console.log(l))},[i,o,u,c,r,g,h,w,_,p,d,k,l,s,y,V,N,D]}class Rs extends Yt{constructor(t){super(),Xt(this,t,Us,As,Qt,{prompt:0,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function El(n,t,e){const l=n.slice();return l[16]=t[e],l[18]=e,l}function Sl(n){let t,e=n[2].length>0&&Il(n);return{c(){e&&e.c(),t=Pt()},l(l){e&&e.l(l),t=Pt()},m(l,s){e&&e.m(l,s),H(l,t,s)},p(l,s){l[2].length>0?e?e.p(l,s):(e=Il(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(l){l&&m(t),e&&e.d(l)}}}function Il(n){let t,e,l,s='<div class="text-lg font-semibold mt-2">@</div>',o,r,i,a=ne(n[2]),u=[];for(let c=0;c<a.length;c+=1)u[c]=Ml(El(n,a,c));return{c(){t=S("div"),e=S("div"),l=S("div"),l.innerHTML=s,o=J(),r=S("div"),i=S("div");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=I(c,"DIV",{class:!0});var d=E(t);e=I(d,"DIV",{class:!0});var k=E(e);l=I(k,"DIV",{class:!0,"data-svelte-h":!0}),Kt(l)!=="svelte-1ourwwn"&&(l.innerHTML=s),o=Q(k),r=I(k,"DIV",{class:!0});var _=E(r);i=I(_,"DIV",{class:!0});var p=E(i);for(let g=0;g<u.length;g+=1)u[g].l(p);p.forEach(m),_.forEach(m),k.forEach(m),d.forEach(m),this.h()},h(){f(l,"class","bg-gray-100 dark:bg-gray-700 w-10 rounded-l-xl text-center"),f(i,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5"),f(r,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white"),f(e,"class","flex w-full px-2"),f(t,"class","md:px-2 mb-3 text-left w-full absolute bottom-0 left-0 right-0")},m(c,d){H(c,t,d),v(t,e),v(e,l),v(e,o),v(e,r),v(r,i);for(let k=0;k<u.length;k+=1)u[k]&&u[k].m(i,null)},p(c,d){if(d&22){a=ne(c[2]);let k;for(k=0;k<a.length;k+=1){const _=El(c,a,k);u[k]?u[k].p(_,d):(u[k]=Ml(_),u[k].c(),u[k].m(i,null))}for(;k<u.length;k+=1)u[k].d(1);u.length=a.length}},d(c){c&&m(t),Ee(u,c)}}}function Ml(n){let t,e,l=n[16].name+"",s,o,r,i,a;function u(){return n[11](n[16])}function c(){return n[12](n[18])}return{c(){t=S("button"),e=S("div"),s=mt(l),o=J(),this.h()},l(d){t=I(d,"BUTTON",{class:!0,type:!0});var k=E(t);e=I(k,"DIV",{class:!0});var _=E(e);s=ht(_,l),_.forEach(m),o=Q(k),k.forEach(m),this.h()},h(){f(e,"class","font-medium text-black line-clamp-1"),f(t,"class",r="px-3 py-1.5 rounded-xl w-full text-left "+(n[18]===n[1]?" bg-gray-100 selected-command-option-button":"")),f(t,"type","button")},m(d,k){H(d,t,k),v(t,e),v(e,s),v(t,o),i||(a=[tt(t,"click",u),tt(t,"mousemove",c),tt(t,"focus",zs)],i=!0)},p(d,k){n=d,k&4&&l!==(l=n[16].name+"")&&St(s,l),k&2&&r!==(r="px-3 py-1.5 rounded-xl w-full text-left "+(n[18]===n[1]?" bg-gray-100 selected-command-option-button":""))&&f(t,"class",r)},d(d){d&&m(t),i=!1,ce(a)}}}function js(n){let t=n[0].charAt(0)==="@",e,l=t&&Sl(n);return{c(){l&&l.c(),e=Pt()},l(s){l&&l.l(s),e=Pt()},m(s,o){l&&l.m(s,o),H(s,e,o)},p(s,[o]){o&1&&(t=s[0].charAt(0)==="@"),t?l?l.p(s,o):(l=Sl(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:Tt,o:Tt,d(s){s&&m(e),l&&l.d(s)}}}const zs=()=>{};function Fs(n,t,e){let l;it(n,Ue,w=>e(10,l=w));const s=fe("i18n");it(n,s,w=>e(13,w));const o=We();let{prompt:r=""}=t,{user:i=null}=t,{chatInputPlaceholder:a=""}=t,{messages:u=[]}=t,c=0,d=[];const k=()=>{e(1,c=Math.max(0,c-1))},_=()=>{e(1,c=Math.min(c+1,d.length-1))},p=async w=>{e(0,r=""),o("select",w)},g=w=>{p(w)},h=w=>{e(1,c=w)};return n.$$set=w=>{"prompt"in w&&e(0,r=w.prompt),"user"in w&&e(5,i=w.user),"chatInputPlaceholder"in w&&e(6,a=w.chatInputPlaceholder),"messages"in w&&e(7,u=w.messages)},n.$$.update=()=>{n.$$.dirty&1025&&e(2,d=l.filter(w=>{var y,V;return w.name.includes(((V=(y=r.split(" "))==null?void 0:y.at(0))==null?void 0:V.substring(1))??"")}).sort((w,y)=>w.name.localeCompare(y.name))),n.$$.dirty&1&&r&&e(1,c=0)},[r,c,d,s,p,i,a,u,k,_,l,g,h]}class qs extends Yt{constructor(t){super(),Xt(this,t,Fs,js,Qt,{prompt:0,user:5,chatInputPlaceholder:6,messages:7,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function Ws(n){let t,e;return{c(){t=gt("svg"),e=gt("path"),this.h()},l(l){t=pt(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=E(t);e=pt(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(e).forEach(m),s.forEach(m),this.h()},h(){f(e,"stroke-linecap","round"),f(e,"stroke-linejoin","round"),f(e,"d","M6 18 18 6M6 6l12 12"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"fill","none"),f(t,"viewBox","0 0 24 24"),f(t,"stroke-width",n[1]),f(t,"stroke","currentColor"),f(t,"class",n[0])},m(l,s){H(l,t,s),v(t,e)},p(l,[s]){s&2&&f(t,"stroke-width",l[1]),s&1&&f(t,"class",l[0])},i:Tt,o:Tt,d(l){l&&m(t)}}}function Zs(n,t,e){let{className:l="size-3.5"}=t,{strokeWidth:s="2"}=t;return n.$$set=o=>{"className"in o&&e(0,l=o.className),"strokeWidth"in o&&e(1,s=o.strokeWidth)},[l,s]}class Gs extends Yt{constructor(t){super(),Xt(this,t,Zs,Ws,Qt,{className:0,strokeWidth:1})}}function Js(n){let t,e,l;return{c(){t=gt("svg"),e=gt("path"),l=gt("path"),this.h()},l(s){t=pt(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=E(t);e=pt(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(e).forEach(m),l=pt(o,"path",{d:!0}),E(l).forEach(m),o.forEach(m),this.h()},h(){f(e,"fill-rule","evenodd"),f(e,"d","M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm6.905 9.97a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72V18a.75.75 0 0 0 1.5 0v-4.19l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z"),f(e,"clip-rule","evenodd"),f(l,"d","M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"viewBox","0 0 24 24"),f(t,"fill","currentColor"),f(t,"class",n[0])},m(s,o){H(s,t,o),v(t,e),v(t,l)},p(s,[o]){o&1&&f(t,"class",s[0])},i:Tt,o:Tt,d(s){s&&m(t)}}}function Qs(n,t,e){let{className:l="size-4"}=t;return n.$$set=s=>{"className"in s&&e(0,l=s.className)},[l]}class Ys extends Yt{constructor(t){super(),Xt(this,t,Qs,Js,Qt,{className:0})}}function Xs(n){let t,e;return{c(){t=gt("svg"),e=gt("path"),this.h()},l(l){t=pt(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var s=E(t);e=pt(s,"path",{d:!0}),E(e).forEach(m),s.forEach(m),this.h()},h(){f(e,"d","M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"viewBox","0 0 24 24"),f(t,"fill","currentColor"),f(t,"class",n[0])},m(l,s){H(l,t,s),v(t,e)},p(l,[s]){s&1&&f(t,"class",l[0])},i:Tt,o:Tt,d(l){l&&m(t)}}}function Ks(n,t,e){let{className:l="size-4"}=t;return n.$$set=s=>{"className"in s&&e(0,l=s.className)},[l]}class xs extends Yt{constructor(t){super(),Xt(this,t,Ks,Xs,Qt,{className:0})}}function $s(n){let t;const e=n[7].default,l=se(e,n,n[12],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),t=!0},p(s,o){l&&l.p&&(!t||o&4096)&&re(l,e,s,s[12],t?ie(e,s[12],o,null):oe(s[12]),null)},i(s){t||(O(l,s),t=!0)},o(s){U(l,s),t=!1},d(s){l&&l.d(s)}}}function tr(n){let t,e;return t=new he({props:{content:n[5].t("More"),$$slots:{default:[$s]},$$scope:{ctx:n}}}),{c(){at(t.$$.fragment)},l(l){ct(t.$$.fragment,l)},m(l,s){ut(t,l,s),e=!0},p(l,s){const o={};s&32&&(o.content=l[5].t("More")),s&4096&&(o.$$scope={dirty:s,ctx:l}),t.$set(o)},i(l){e||(O(t.$$.fragment,l),e=!0)},o(l){U(t.$$.fragment,l),e=!1},d(l){ft(t,l)}}}function Dl(n){let t,e,l,s,o,r=n[5].t("Web Search")+"",i,a,u,c,d,k,_;l=new xs({});function p(h){n[8](h)}let g={};return n[0]!==void 0&&(g.state=n[0]),u=new Wn({props:g}),vt.push(()=>Lt(u,"state",p)),{c(){t=S("div"),e=S("div"),at(l.$$.fragment),s=J(),o=S("div"),i=mt(r),a=J(),at(u.$$.fragment),d=J(),k=S("hr"),this.h()},l(h){t=I(h,"DIV",{class:!0});var w=E(t);e=I(w,"DIV",{class:!0});var y=E(e);ct(l.$$.fragment,y),s=Q(y),o=I(y,"DIV",{class:!0});var V=E(o);i=ht(V,r),V.forEach(m),y.forEach(m),a=Q(w),ct(u.$$.fragment,w),w.forEach(m),d=Q(h),k=I(h,"HR",{class:!0}),this.h()},h(){f(o,"class","flex items-center"),f(e,"class","flex-1 flex items-center gap-2"),f(t,"class","flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl"),f(k,"class","border-gray-100 dark:border-gray-800 my-1")},m(h,w){H(h,t,w),v(t,e),ut(l,e,null),v(e,s),v(e,o),v(o,i),v(t,a),ut(u,t,null),H(h,d,w),H(h,k,w),_=!0},p(h,w){(!_||w&32)&&r!==(r=h[5].t("Web Search")+"")&&St(i,r);const y={};!c&&w&1&&(c=!0,y.state=h[0],At(()=>c=!1)),u.$set(y)},i(h){_||(O(l.$$.fragment,h),O(u.$$.fragment,h),_=!0)},o(h){U(l.$$.fragment,h),U(u.$$.fragment,h),_=!1},d(h){h&&(m(t),m(d),m(k)),ft(l),ft(u)}}}function er(n){let t,e,l,s=n[5].t("Upload Files")+"",o,r;return t=new Ys({}),{c(){at(t.$$.fragment),e=J(),l=S("div"),o=mt(s),this.h()},l(i){ct(t.$$.fragment,i),e=Q(i),l=I(i,"DIV",{class:!0});var a=E(l);o=ht(a,s),a.forEach(m),this.h()},h(){f(l,"class","flex items-center")},m(i,a){ut(t,i,a),H(i,e,a),H(i,l,a),v(l,o),r=!0},p(i,a){(!r||a&32)&&s!==(s=i[5].t("Upload Files")+"")&&St(o,s)},i(i){r||(O(t.$$.fragment,i),r=!0)},o(i){U(t.$$.fragment,i),r=!1},d(i){i&&(m(e),m(l)),ft(t,i)}}}function lr(n){var o,r;let t,e,l,s=((r=(o=n[4])==null?void 0:o.features)==null?void 0:r.enable_web_search)&&Dl(n);return e=new Ne({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl",$$slots:{default:[er]},$$scope:{ctx:n}}}),e.$on("click",n[9]),{c(){s&&s.c(),t=J(),at(e.$$.fragment)},l(i){s&&s.l(i),t=Q(i),ct(e.$$.fragment,i)},m(i,a){s&&s.m(i,a),H(i,t,a),ut(e,i,a),l=!0},p(i,a){var c,d;(d=(c=i[4])==null?void 0:c.features)!=null&&d.enable_web_search?s?(s.p(i,a),a&16&&O(s,1)):(s=Dl(i),s.c(),O(s,1),s.m(t.parentNode,t)):s&&(qt(),U(s,1,1,()=>{s=null}),Wt());const u={};a&4128&&(u.$$scope={dirty:a,ctx:i}),e.$set(u)},i(i){l||(O(s),O(e.$$.fragment,i),l=!0)},o(i){U(s),U(e.$$.fragment,i),l=!1},d(i){i&&m(t),s&&s.d(i),ft(e,i)}}}function nr(n){let t,e,l;return e=new cn({props:{class:"w-full max-w-[190px] rounded-xl px-1 py-1  border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:15,alignOffset:-8,side:"top",align:"start",transition:Ge,$$slots:{default:[lr]},$$scope:{ctx:n}}}),{c(){t=S("div"),at(e.$$.fragment),this.h()},l(s){t=I(s,"DIV",{slot:!0});var o=E(t);ct(e.$$.fragment,o),o.forEach(m),this.h()},h(){f(t,"slot","content")},m(s,o){H(s,t,o),ut(e,t,null),l=!0},p(s,o){const r={};o&4147&&(r.$$scope={dirty:o,ctx:s}),e.$set(r)},i(s){l||(O(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){s&&m(t),ft(e)}}}function sr(n){let t,e,l;function s(r){n[10](r)}let o={$$slots:{content:[nr],default:[tr]},$$scope:{ctx:n}};return n[3]!==void 0&&(o.show=n[3]),t=new an({props:o}),vt.push(()=>Lt(t,"show",s)),t.$on("change",n[11]),{c(){at(t.$$.fragment)},l(r){ct(t.$$.fragment,r)},m(r,i){ut(t,r,i),l=!0},p(r,[i]){const a={};i&4147&&(a.$$scope={dirty:i,ctx:r}),!e&&i&8&&(e=!0,a.show=r[3],At(()=>e=!1)),t.$set(a)},i(r){l||(O(t.$$.fragment,r),l=!0)},o(r){U(t.$$.fragment,r),l=!1},d(r){ft(t,r)}}}function rr(n,t,e){let l,s;it(n,en,h=>e(4,l=h));let{$$slots:o={},$$scope:r}=t;const i=fe("i18n");it(n,i,h=>e(5,s=h));let{uploadFilesHandler:a}=t,{webSearchEnabled:u}=t,{onClose:c}=t,d=!1;function k(h){u=h,e(0,u)}const _=()=>{a()};function p(h){d=h,e(3,d)}const g=h=>{h.detail===!1&&c()};return n.$$set=h=>{"uploadFilesHandler"in h&&e(1,a=h.uploadFilesHandler),"webSearchEnabled"in h&&e(0,u=h.webSearchEnabled),"onClose"in h&&e(2,c=h.onClose),"$$scope"in h&&e(12,r=h.$$scope)},[u,a,c,d,l,s,i,o,k,_,p,g,r]}class or extends Yt{constructor(t){super(),Xt(this,t,rr,sr,Qt,{uploadFilesHandler:1,webSearchEnabled:0,onClose:2})}}function Cl(n,t,e){const l=n.slice();return l[71]=t[e],l[73]=e,l}function Tl(n){let t,e,l,s,o,r,i;return o=new Hn({}),{c(){t=S("div"),e=S("div"),l=S("div"),s=S("div"),at(o.$$.fragment),this.h()},l(a){t=I(a,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var u=E(t);e=I(u,"DIV",{class:!0});var c=E(e);l=I(c,"DIV",{class:!0});var d=E(l);s=I(d,"DIV",{class:!0});var k=E(s);ct(o.$$.fragment,k),k.forEach(m),d.forEach(m),c.forEach(m),u.forEach(m),this.h()},h(){f(s,"class","max-w-md"),f(l,"class","m-auto pt-64 flex flex-col justify-center"),f(e,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),f(t,"class",r="fixed "+(n[24]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),f(t,"id","dropzone"),f(t,"role","region"),f(t,"aria-label","Drag and Drop Container")},m(a,u){H(a,t,u),v(t,e),v(e,l),v(l,s),ut(o,s,null),i=!0},p(a,u){(!i||u[0]&16777216&&r!==(r="fixed "+(a[24]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&f(t,"class",r)},i(a){i||(O(o.$$.fragment,a),i=!0)},o(a){U(o.$$.fragment,a),i=!1},d(a){a&&m(t),ft(o)}}}function Vl(n){let t,e,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd"></path></svg>',s,o;return{c(){t=S("div"),e=S("button"),e.innerHTML=l,this.h()},l(r){t=I(r,"DIV",{class:!0});var i=E(t);e=I(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Kt(e)!=="svelte-a2mahu"&&(e.innerHTML=l),i.forEach(m),this.h()},h(){f(e,"class","bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full"),f(t,"class","absolute -top-12 left-0 right-0 flex justify-center z-30")},m(r,i){H(r,t,i),v(t,e),s||(o=tt(e,"click",n[32]),s=!0)},p:Tt,d(r){r&&m(t),s=!1,o()}}}function ir(n){let t,e,l;function s(r){n[36](r)}let o={};return n[1]!==void 0&&(o.prompt=n[1]),t=new Rs({props:o}),n[35](t),vt.push(()=>Lt(t,"prompt",s)),t.$on("youtube",n[37]),t.$on("url",n[38]),t.$on("select",n[39]),{c(){at(t.$$.fragment)},l(r){ct(t.$$.fragment,r)},m(r,i){ut(t,r,i),l=!0},p(r,i){const a={};!e&&i[0]&2&&(e=!0,a.prompt=r[1],At(()=>e=!1)),t.$set(a)},i(r){l||(O(t.$$.fragment,r),l=!0)},o(r){U(t.$$.fragment,r),l=!1},d(r){n[35](null),ft(t,r)}}}function ar(n){let t,e,l;function s(r){n[34](r)}let o={};return n[1]!==void 0&&(o.prompt=n[1]),t=new Vs({props:o}),n[33](t),vt.push(()=>Lt(t,"prompt",s)),{c(){at(t.$$.fragment)},l(r){ct(t.$$.fragment,r)},m(r,i){ut(t,r,i),l=!0},p(r,i){const a={};!e&&i[0]&2&&(e=!0,a.prompt=r[1],At(()=>e=!1)),t.$set(a)},i(r){l||(O(t.$$.fragment,r),l=!0)},o(r){U(t.$$.fragment,r),l=!1},d(r){n[33](null),ft(t,r)}}}function Bl(n){let t,e,l,s,o,r,i,a,u=n[0].name+"",c,d,k,_,p,g,h,w;return p=new Gs({}),{c(){t=S("div"),e=S("div"),l=S("img"),o=J(),r=S("div"),i=mt("Talking to "),a=S("span"),c=mt(u),d=J(),k=S("div"),_=S("button"),at(p.$$.fragment),this.h()},l(y){t=I(y,"DIV",{class:!0});var V=E(t);e=I(V,"DIV",{class:!0});var N=E(e);l=I(N,"IMG",{crossorigin:!0,alt:!0,class:!0,src:!0}),o=Q(N),r=I(N,"DIV",{});var D=E(r);i=ht(D,"Talking to "),a=I(D,"SPAN",{class:!0});var T=E(a);c=ht(T,u),T.forEach(m),D.forEach(m),N.forEach(m),d=Q(V),k=I(V,"DIV",{});var B=E(k);_=I(B,"BUTTON",{class:!0});var C=E(_);ct(p.$$.fragment,C),C.forEach(m),B.forEach(m),V.forEach(m),this.h()},h(){var y,V,N;f(l,"crossorigin","anonymous"),f(l,"alt","model profile"),f(l,"class","size-5 max-w-[28px] object-cover rounded-full"),ke(l.src,s=((N=(V=(y=n[11].find(n[45]))==null?void 0:y.info)==null?void 0:V.meta)==null?void 0:N.profile_image_url)??(n[22].language==="dg-DG"?"/doge.png":`${Le}/static/favicon.png`))||f(l,"src",s),f(a,"class","font-medium"),f(e,"class","flex items-center gap-2 text-sm dark:text-gray-500"),f(_,"class","flex items-center"),f(t,"class","px-3 py-2.5 text-left w-full flex justify-between items-center absolute bottom-0 left-0 right-0 bg-gradient-to-t from-50% from-white dark:from-gray-900")},m(y,V){H(y,t,V),v(t,e),v(e,l),v(e,o),v(e,r),v(r,i),v(r,a),v(a,c),v(t,d),v(t,k),v(k,_),ut(p,_,null),g=!0,h||(w=tt(_,"click",n[46]),h=!0)},p(y,V){var N,D,T;(!g||V[0]&4196353&&!ke(l.src,s=((T=(D=(N=y[11].find(y[45]))==null?void 0:N.info)==null?void 0:D.meta)==null?void 0:T.profile_image_url)??(y[22].language==="dg-DG"?"/doge.png":`${Le}/static/favicon.png`)))&&f(l,"src",s),(!g||V[0]&1)&&u!==(u=y[0].name+"")&&St(c,u)},i(y){g||(O(p.$$.fragment,y),g=!0)},o(y){U(p.$$.fragment,y),g=!1},d(y){y&&m(t),ft(p),h=!1,w()}}}function Nl(n){let t,e,l=ne(n[3]),s=[];for(let r=0;r<l.length;r+=1)s[r]=Hl(Cl(n,l,r));const o=r=>U(s[r],1,1,()=>{s[r]=null});return{c(){t=S("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){t=I(r,"DIV",{class:!0});var i=E(t);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(m),this.h()},h(){f(t,"class","mx-2 mt-2 mb-1 flex flex-wrap gap-2")},m(r,i){H(r,t,i);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(t,null);e=!0},p(r,i){if(i[0]&5243017){l=ne(r[3]);let a;for(a=0;a<l.length;a+=1){const u=Cl(r,l,a);s[a]?(s[a].p(u,i),O(s[a],1)):(s[a]=Hl(u),s[a].c(),O(s[a],1),s[a].m(t,null))}for(qt(),a=l.length;a<s.length;a+=1)o(a);Wt()}},i(r){if(!e){for(let i=0;i<l.length;i+=1)O(s[i]);e=!0}},o(r){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)U(s[i]);e=!1},d(r){r&&m(t),Ee(s,r)}}}function cr(n){var _;let t,e,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"></path><path d="M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"></path></svg>',s,o,r,i=(((_=n[71])==null?void 0:_.title)??`#${n[71].name}`)+"",a,u,c,d=n[22].t("Collection")+"",k;return{c(){t=S("div"),e=S("div"),e.innerHTML=l,s=J(),o=S("div"),r=S("div"),a=mt(i),u=J(),c=S("div"),k=mt(d),this.h()},l(p){t=I(p,"DIV",{class:!0});var g=E(t);e=I(g,"DIV",{class:!0,"data-svelte-h":!0}),Kt(e)!=="svelte-1h7831u"&&(e.innerHTML=l),s=Q(g),o=I(g,"DIV",{class:!0});var h=E(o);r=I(h,"DIV",{class:!0});var w=E(r);a=ht(w,i),w.forEach(m),u=Q(h),c=I(h,"DIV",{class:!0});var y=E(c);k=ht(y,d),y.forEach(m),h.forEach(m),g.forEach(m),this.h()},h(){f(e,"class","p-2.5 bg-red-400 text-white rounded-lg"),f(r,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),f(c,"class","text-gray-500 text-sm"),f(o,"class","flex flex-col justify-center -space-y-0.5"),f(t,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none")},m(p,g){H(p,t,g),v(t,e),v(t,s),v(t,o),v(o,r),v(r,a),v(o,u),v(o,c),v(c,k)},p(p,g){var h;g[0]&8&&i!==(i=(((h=p[71])==null?void 0:h.title)??`#${p[71].name}`)+"")&&St(a,i),g[0]&4194304&&d!==(d=p[22].t("Collection")+"")&&St(k,d)},i:Tt,o:Tt,d(p){p&&m(t)}}}function ur(n){let t,e,l,s,o,r=n[71].name+"",i,a,u,c=n[22].t("Document")+"",d;function k(g,h){return g[71].upload_status?mr:dr}let _=k(n),p=_(n);return{c(){t=S("div"),e=S("div"),p.c(),l=J(),s=S("div"),o=S("div"),i=mt(r),a=J(),u=S("div"),d=mt(c),this.h()},l(g){t=I(g,"DIV",{class:!0});var h=E(t);e=I(h,"DIV",{class:!0});var w=E(e);p.l(w),w.forEach(m),l=Q(h),s=I(h,"DIV",{class:!0});var y=E(s);o=I(y,"DIV",{class:!0});var V=E(o);i=ht(V,r),V.forEach(m),a=Q(y),u=I(y,"DIV",{class:!0});var N=E(u);d=ht(N,c),N.forEach(m),y.forEach(m),h.forEach(m),this.h()},h(){f(e,"class","p-2.5 bg-red-400 text-white rounded-lg"),f(o,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),f(u,"class","text-gray-500 text-sm"),f(s,"class","flex flex-col justify-center -space-y-0.5"),f(t,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none")},m(g,h){H(g,t,h),v(t,e),p.m(e,null),v(t,l),v(t,s),v(s,o),v(o,i),v(s,a),v(s,u),v(u,d)},p(g,h){_!==(_=k(g))&&(p.d(1),p=_(g),p&&(p.c(),p.m(e,null))),h[0]&8&&r!==(r=g[71].name+"")&&St(i,r),h[0]&4194304&&c!==(c=g[22].t("Document")+"")&&St(d,c)},i:Tt,o:Tt,d(g){g&&m(t),p.d()}}}function fr(n){let t,e,l,s,o,r=(n[0]?n[20].length===0:n[7].length!==n[20].length)&&Ol(n);return{c(){t=S("div"),e=S("img"),s=J(),r&&r.c(),this.h()},l(i){t=I(i,"DIV",{class:!0});var a=E(t);e=I(a,"IMG",{src:!0,alt:!0,class:!0}),s=Q(a),r&&r.l(a),a.forEach(m),this.h()},h(){ke(e.src,l=n[71].url)||f(e,"src",l),f(e,"alt","input"),f(e,"class","h-16 w-16 rounded-xl object-cover"),f(t,"class","relative")},m(i,a){H(i,t,a),v(t,e),v(t,s),r&&r.m(t,null),o=!0},p(i,a){(!o||a[0]&8&&!ke(e.src,l=i[71].url))&&f(e,"src",l),(i[0]?i[20].length===0:i[7].length!==i[20].length)?r?(r.p(i,a),a[0]&1048705&&O(r,1)):(r=Ol(i),r.c(),O(r,1),r.m(t,null)):r&&(qt(),U(r,1,1,()=>{r=null}),Wt())},i(i){o||(O(r),o=!0)},o(i){U(r),o=!1},d(i){i&&m(t),r&&r.d()}}}function dr(n){let t,e,l,s,o,r;return{c(){t=gt("svg"),e=gt("style"),l=mt(`.spinner_qM83 {\r
																animation: spinner_8HQG 1.05s infinite;\r
															}\r
															.spinner_oXPr {\r
																animation-delay: 0.1s;\r
															}\r
															.spinner_ZTLf {\r
																animation-delay: 0.2s;\r
															}\r
															@keyframes spinner_8HQG {\r
																0%,\r
																57.14% {\r
																	animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r
																	transform: translate(0);\r
																}\r
																28.57% {\r
																	animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);\r
																	transform: translateY(-6px);\r
																}\r
																100% {\r
																	transform: translate(0);\r
																}\r
															}\r
														`),s=gt("circle"),o=gt("circle"),r=gt("circle"),this.h()},l(i){t=pt(i,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var a=E(t);e=pt(a,"style",{});var u=E(e);l=ht(u,`.spinner_qM83 {\r
																animation: spinner_8HQG 1.05s infinite;\r
															}\r
															.spinner_oXPr {\r
																animation-delay: 0.1s;\r
															}\r
															.spinner_ZTLf {\r
																animation-delay: 0.2s;\r
															}\r
															@keyframes spinner_8HQG {\r
																0%,\r
																57.14% {\r
																	animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r
																	transform: translate(0);\r
																}\r
																28.57% {\r
																	animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);\r
																	transform: translateY(-6px);\r
																}\r
																100% {\r
																	transform: translate(0);\r
																}\r
															}\r
														`),u.forEach(m),s=pt(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(s).forEach(m),o=pt(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(o).forEach(m),r=pt(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(r).forEach(m),a.forEach(m),this.h()},h(){f(s,"class","spinner_qM83"),f(s,"cx","4"),f(s,"cy","12"),f(s,"r","2.5"),f(o,"class","spinner_qM83 spinner_oXPr"),f(o,"cx","12"),f(o,"cy","12"),f(o,"r","2.5"),f(r,"class","spinner_qM83 spinner_ZTLf"),f(r,"cx","20"),f(r,"cy","12"),f(r,"r","2.5"),f(t,"class","w-6 h-6 translate-y-[0.5px]"),f(t,"fill","currentColor"),f(t,"viewBox","0 0 24 24"),f(t,"xmlns","http://www.w3.org/2000/svg")},m(i,a){H(i,t,a),v(t,e),v(e,l),v(t,s),v(t,o),v(t,r)},d(i){i&&m(t)}}}function mr(n){let t,e,l;return{c(){t=gt("svg"),e=gt("path"),l=gt("path"),this.h()},l(s){t=pt(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=E(t);e=pt(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(e).forEach(m),l=pt(o,"path",{d:!0}),E(l).forEach(m),o.forEach(m),this.h()},h(){f(e,"fill-rule","evenodd"),f(e,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),f(e,"clip-rule","evenodd"),f(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"viewBox","0 0 24 24"),f(t,"fill","currentColor"),f(t,"class","w-6 h-6")},m(s,o){H(s,t,o),v(t,e),v(t,l)},d(s){s&&m(t)}}}function Ol(n){let t,e;return t=new he({props:{className:" absolute top-1 left-1",content:n[22].t("{{ models }}",{models:[...n[0]?[n[0]]:n[7]].filter(n[50]).join(", ")}),$$slots:{default:[hr]},$$scope:{ctx:n}}}),{c(){at(t.$$.fragment)},l(l){ct(t.$$.fragment,l)},m(l,s){ut(t,l,s),e=!0},p(l,s){const o={};s[0]&5243009&&(o.content=l[22].t("{{ models }}",{models:[...l[0]?[l[0]]:l[7]].filter(l[50]).join(", ")})),s[2]&4096&&(o.$$scope={dirty:s,ctx:l}),t.$set(o)},i(l){e||(O(t.$$.fragment,l),e=!0)},o(l){U(t.$$.fragment,l),e=!1},d(l){ft(t,l)}}}function hr(n){let t,e;return{c(){t=gt("svg"),e=gt("path"),this.h()},l(l){t=pt(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var s=E(t);e=pt(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(e).forEach(m),s.forEach(m),this.h()},h(){f(e,"fill-rule","evenodd"),f(e,"d","M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"),f(e,"clip-rule","evenodd"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"viewBox","0 0 24 24"),f(t,"fill","currentColor"),f(t,"class","size-4 fill-yellow-300")},m(l,s){H(l,t,s),v(t,e)},p:Tt,d(l){l&&m(t)}}}function Hl(n){let t,e,l,s,o,r,i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',a,u,c,d;const k=[fr,ur,cr],_=[];function p(h,w){return h[71].type==="image"?0:h[71].type==="doc"?1:h[71].type==="collection"?2:-1}~(e=p(n))&&(l=_[e]=k[e](n));function g(){return n[51](n[73])}return{c(){t=S("div"),l&&l.c(),s=J(),o=S("div"),r=S("button"),r.innerHTML=i,a=J(),this.h()},l(h){t=I(h,"DIV",{class:!0});var w=E(t);l&&l.l(w),s=Q(w),o=I(w,"DIV",{class:!0});var y=E(o);r=I(y,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Kt(r)!=="svelte-3nr9d3"&&(r.innerHTML=i),y.forEach(m),a=Q(w),w.forEach(m),this.h()},h(){f(r,"class","bg-gray-400 text-white border border-white rounded-full group-hover:visible invisible transition"),f(r,"type","button"),f(o,"class","absolute -top-1 -right-1"),f(t,"class","relative group")},m(h,w){H(h,t,w),~e&&_[e].m(t,null),v(t,s),v(t,o),v(o,r),v(t,a),u=!0,c||(d=tt(r,"click",g),c=!0)},p(h,w){n=h;let y=e;e=p(n),e===y?~e&&_[e].p(n,w):(l&&(qt(),U(_[y],1,1,()=>{_[y]=null}),Wt()),~e?(l=_[e],l?l.p(n,w):(l=_[e]=k[e](n),l.c()),O(l,1),l.m(t,s)):l=null)},i(h){u||(O(l),u=!0)},o(h){U(l),u=!1},d(h){h&&m(t),~e&&_[e].d(),c=!1,d()}}}function gr(n){let t,e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-5"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>';return{c(){t=S("button"),t.innerHTML=e,this.h()},l(l){t=I(l,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Kt(t)!=="svelte-wy6pwi"&&(t.innerHTML=e),this.h()},h(){f(t,"class","bg-gray-50 hover:bg-gray-100 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5 outline-none focus:outline-none"),f(t,"type","button")},m(l,s){H(l,t,s)},p:Tt,d(l){l&&m(t)}}}function pr(n){let t,e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z" clip-rule="evenodd"></path></svg>',l,s;return{c(){t=S("button"),t.innerHTML=e,this.h()},l(o){t=I(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Kt(t)!=="svelte-tod56q"&&(t.innerHTML=e),this.h()},h(){f(t,"class","bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5")},m(o,r){H(o,t,r),l||(s=tt(t,"click",function(){mn(n[6])&&n[6].apply(this,arguments)}),l=!0)},p(o,r){n=o},i:Tt,o:Tt,d(o){o&&m(t),l=!1,s()}}}function _r(n){let t,e,l,s;return t=new he({props:{content:n[22].t("Record voice"),$$slots:{default:[wr]},$$scope:{ctx:n}}}),l=new he({props:{content:n[22].t("Send message"),$$slots:{default:[kr]},$$scope:{ctx:n}}}),{c(){at(t.$$.fragment),e=J(),at(l.$$.fragment)},l(o){ct(t.$$.fragment,o),e=Q(o),ct(l.$$.fragment,o)},m(o,r){ut(t,o,r),H(o,e,r),ut(l,o,r),s=!0},p(o,r){const i={};r[0]&4194304&&(i.content=o[22].t("Record voice")),r[0]&2097408|r[2]&4096&&(i.$$scope={dirty:r,ctx:o}),t.$set(i);const a={};r[0]&4194304&&(a.content=o[22].t("Send message")),r[0]&2|r[2]&4096&&(a.$$scope={dirty:r,ctx:o}),l.$set(a)},i(o){s||(O(t.$$.fragment,o),O(l.$$.fragment,o),s=!0)},o(o){U(t.$$.fragment,o),U(l.$$.fragment,o),s=!1},d(o){o&&m(e),ft(t,o),ft(l,o)}}}function Al(n){let t,e,l;function s(i,a){return i[21]?vr:br}let o=s(n),r=o(n);return{c(){t=S("button"),r.c(),this.h()},l(i){t=I(i,"BUTTON",{id:!0,class:!0,type:!0});var a=E(t);r.l(a),a.forEach(m),this.h()},h(){f(t,"id","voice-input-button"),f(t,"class","text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 transition rounded-full p-1.5 mr-0.5 self-center"),f(t,"type","button")},m(i,a){H(i,t,a),r.m(t,null),e||(l=tt(t,"click",n[62]),e=!0)},p(i,a){o!==(o=s(i))&&(r.d(1),r=o(i),r&&(r.c(),r.m(t,null)))},d(i){i&&m(t),r.d(),e=!1,l()}}}function br(n){let t,e,l;return{c(){t=gt("svg"),e=gt("path"),l=gt("path"),this.h()},l(s){t=pt(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=E(t);e=pt(o,"path",{d:!0}),E(e).forEach(m),l=pt(o,"path",{d:!0}),E(l).forEach(m),o.forEach(m),this.h()},h(){f(e,"d","M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z"),f(l,"d","M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"viewBox","0 0 20 20"),f(t,"fill","currentColor"),f(t,"class","w-5 h-5 translate-y-[0.5px]")},m(s,o){H(s,t,o),v(t,e),v(t,l)},d(s){s&&m(t)}}}function vr(n){let t,e,l,s,o,r;return{c(){t=gt("svg"),e=gt("style"),l=mt(`.spinner_qM83 {\r
															animation: spinner_8HQG 1.05s infinite;\r
														}\r
														.spinner_oXPr {\r
															animation-delay: 0.1s;\r
														}\r
														.spinner_ZTLf {\r
															animation-delay: 0.2s;\r
														}\r
														@keyframes spinner_8HQG {\r
															0%,\r
															57.14% {\r
																animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r
																transform: translate(0);\r
															}\r
															28.57% {\r
																animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);\r
																transform: translateY(-6px);\r
															}\r
															100% {\r
																transform: translate(0);\r
															}\r
														}\r
													`),s=gt("circle"),o=gt("circle"),r=gt("circle"),this.h()},l(i){t=pt(i,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var a=E(t);e=pt(a,"style",{});var u=E(e);l=ht(u,`.spinner_qM83 {\r
															animation: spinner_8HQG 1.05s infinite;\r
														}\r
														.spinner_oXPr {\r
															animation-delay: 0.1s;\r
														}\r
														.spinner_ZTLf {\r
															animation-delay: 0.2s;\r
														}\r
														@keyframes spinner_8HQG {\r
															0%,\r
															57.14% {\r
																animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r
																transform: translate(0);\r
															}\r
															28.57% {\r
																animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);\r
																transform: translateY(-6px);\r
															}\r
															100% {\r
																transform: translate(0);\r
															}\r
														}\r
													`),u.forEach(m),s=pt(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(s).forEach(m),o=pt(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(o).forEach(m),r=pt(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),E(r).forEach(m),a.forEach(m),this.h()},h(){f(s,"class","spinner_qM83"),f(s,"cx","4"),f(s,"cy","12"),f(s,"r","2.5"),f(o,"class","spinner_qM83 spinner_oXPr"),f(o,"cx","12"),f(o,"cy","12"),f(o,"r","2.5"),f(r,"class","spinner_qM83 spinner_ZTLf"),f(r,"cx","20"),f(r,"cy","12"),f(r,"r","2.5"),f(t,"class","w-5 h-5 translate-y-[0.5px]"),f(t,"fill","currentColor"),f(t,"viewBox","0 0 24 24"),f(t,"xmlns","http://www.w3.org/2000/svg")},m(i,a){H(i,t,a),v(t,e),v(e,l),v(t,s),v(t,o),v(t,r)},d(i){i&&m(t)}}}function wr(n){let t,e=n[8]&&Al(n);return{c(){e&&e.c(),t=Pt()},l(l){e&&e.l(l),t=Pt()},m(l,s){e&&e.m(l,s),H(l,t,s)},p(l,s){l[8]?e?e.p(l,s):(e=Al(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(l){l&&m(t),e&&e.d(l)}}}function kr(n){let t,e,l,s,o;return{c(){t=S("button"),e=gt("svg"),l=gt("path"),this.h()},l(r){t=I(r,"BUTTON",{id:!0,class:!0,type:!0});var i=E(t);e=pt(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=E(e);l=pt(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(l).forEach(m),a.forEach(m),i.forEach(m),this.h()},h(){f(l,"fill-rule","evenodd"),f(l,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),f(l,"clip-rule","evenodd"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"viewBox","0 0 16 16"),f(e,"fill","currentColor"),f(e,"class","w-5 h-5"),f(t,"id","send-message-button"),f(t,"class",s=(n[1]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 self-center"),f(t,"type","submit"),t.disabled=o=n[1]===""},m(r,i){H(r,t,i),v(t,e),v(e,l)},p(r,i){i[0]&2&&s!==(s=(r[1]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 self-center")&&f(t,"class",s),i[0]&2&&o!==(o=r[1]==="")&&(t.disabled=o)},d(r){r&&m(t)}}}function yr(n){let t,e,l,s,o,r,i,a,u,c,d,k,_,p,g,h,w,y,V,N,D,T,B,C,$,L,Z,P,A,et,wt,kt,Zt,jt,Ot,Ut,Vt,Gt,xt,Jt,R=n[22].t("LLMs can make mistakes. Verify important information.")+"",W,nt,zt,Ft,dt=n[17]&&Tl(n),Rt=n[2]===!1&&n[9].length>0&&Vl(n);const ge=[ar,ir],te=[];function pe(F,st){return st[0]&2&&(a=null),st[0]&2&&(u=null),a==null&&(a=F[1].charAt(0)==="/"),a?0:(u==null&&(u=F[1].charAt(0)==="#"),u?1:-1)}~(c=pe(n,[-1,-1,-1]))&&(d=te[c]=ge[c](n));function Ie(F){n[41](F)}function Me(F){n[42](F)}function De(F){n[43](F)}let de={messages:n[9]};n[1]!==void 0&&(de.prompt=n[1]),n[18]!==void 0&&(de.user=n[18]),n[19]!==void 0&&(de.chatInputPlaceholder=n[19]),_=new qs({props:de}),n[40](_),vt.push(()=>Lt(_,"prompt",Ie)),vt.push(()=>Lt(_,"user",Me)),vt.push(()=>Lt(_,"chatInputPlaceholder",De)),_.$on("select",n[44]);let Bt=n[0]!==void 0&&Bl(n),Nt=n[3].length>0&&Nl(n);function Ce(F){n[54](F)}let _e={uploadFilesHandler:n[52],onClose:n[53],$$slots:{default:[gr]},$$scope:{ctx:n}};n[4]!==void 0&&(_e.webSearchEnabled=n[4]),P=new or({props:_e}),vt.push(()=>Lt(P,"webSearchEnabled",Ce));const be=[_r,pr],ee=[];function ve(F,st){return st[0]&512&&(Ot=null),Ot==null&&(Ot=F[9].length==0||F[9].at(-1).done==!0),Ot?0:1}return Ut=ve(n,[-1,-1,-1]),Vt=ee[Ut]=be[Ut](n),{c(){dt&&dt.c(),t=J(),e=S("div"),l=S("div"),s=S("div"),o=S("div"),Rt&&Rt.c(),r=J(),i=S("div"),d&&d.c(),k=J(),at(_.$$.fragment),w=J(),Bt&&Bt.c(),y=J(),V=S("div"),N=S("div"),D=S("div"),T=S("input"),B=J(),C=S("form"),Nt&&Nt.c(),$=J(),L=S("div"),Z=S("div"),at(P.$$.fragment),et=J(),wt=S("textarea"),Zt=J(),jt=S("div"),Vt.c(),xt=J(),Jt=S("div"),W=mt(R),this.h()},l(F){dt&&dt.l(F),t=Q(F),e=I(F,"DIV",{class:!0});var st=E(e);l=I(st,"DIV",{class:!0});var M=E(l);s=I(M,"DIV",{class:!0});var q=E(s);o=I(q,"DIV",{class:!0});var X=E(o);Rt&&Rt.l(X),X.forEach(m),r=Q(q),i=I(q,"DIV",{class:!0});var z=E(i);d&&d.l(z),k=Q(z),ct(_.$$.fragment,z),w=Q(z),Bt&&Bt.l(z),z.forEach(m),q.forEach(m),M.forEach(m),y=Q(st),V=I(st,"DIV",{class:!0});var j=E(V);N=I(j,"DIV",{class:!0});var K=E(N);D=I(K,"DIV",{class:!0});var yt=E(D);T=I(yt,"INPUT",{type:!0}),B=Q(yt),C=I(yt,"FORM",{dir:!0,class:!0});var Ct=E(C);Nt&&Nt.l(Ct),$=Q(Ct),L=I(Ct,"DIV",{class:!0});var Et=E(L);Z=I(Et,"DIV",{class:!0});var b=E(Z);ct(P.$$.fragment,b),b.forEach(m),et=Q(Et),wt=I(Et,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),E(wt).forEach(m),Zt=Q(Et),jt=I(Et,"DIV",{class:!0});var Y=E(jt);Vt.l(Y),Y.forEach(m),Et.forEach(m),Ct.forEach(m),xt=Q(yt),Jt=I(yt,"DIV",{class:!0});var lt=E(Jt);W=ht(lt,R),lt.forEach(m),yt.forEach(m),K.forEach(m),j.forEach(m),st.forEach(m),this.h()},h(){var F;f(o,"class","relative"),f(i,"class","w-full relative"),f(s,"class","flex flex-col max-w-6xl px-2.5 md:px-6 w-full"),f(l,"class","-mb-0.5 mx-auto inset-x-0 bg-transparent flex justify-center"),f(T,"type","file"),T.hidden=!0,T.multiple=!0,f(Z,"class","ml-1 self-end mb-2 flex space-x-1"),f(wt,"id","chat-textarea"),f(wt,"class","scrollbar-hidden bg-gray-50 dark:bg-gray-850 dark:text-gray-100 outline-none w-full py-3 px-3 rounded-xl resize-none h-[48px] svelte-141e0sl"),f(wt,"placeholder",kt=n[19]!==""?n[19]:n[21]?n[22].t("Listening..."):n[22].t("Send a Message")),f(wt,"rows","1"),f(jt,"class","self-end mb-2 flex space-x-1 mr-1"),f(L,"class","flex"),f(C,"dir",Gt=((F=n[23])==null?void 0:F.chatDirection)??"LTR"),f(C,"class","flex flex-col relative w-full rounded-3xl px-1.5 bg-gray-50 dark:bg-gray-850 dark:text-gray-100"),f(Jt,"class","mt-1.5 text-xs text-gray-500 text-center"),f(D,"class","pb-2"),f(N,"class","max-w-6xl px-2.5 md:px-6 mx-auto inset-x-0"),f(V,"class","bg-white dark:bg-gray-900"),f(e,"class","w-full")},m(F,st){dt&&dt.m(F,st),H(F,t,st),H(F,e,st),v(e,l),v(l,s),v(s,o),Rt&&Rt.m(o,null),v(s,r),v(s,i),~c&&te[c].m(i,null),v(i,k),ut(_,i,null),v(i,w),Bt&&Bt.m(i,null),v(e,y),v(e,V),v(V,N),v(N,D),v(D,T),n[47](T),v(D,B),v(D,C),Nt&&Nt.m(C,null),v(C,$),v(C,L),v(L,Z),ut(P,Z,null),v(L,et),v(L,wt),n[55](wt),Xe(wt,n[1]),v(L,Zt),v(L,jt),ee[Ut].m(jt,null),v(D,xt),v(D,Jt),v(Jt,W),nt=!0,zt||(Ft=[tt(T,"change",n[48]),tt(T,"change",n[49]),tt(wt,"input",n[56]),tt(wt,"keypress",n[57]),tt(wt,"keydown",n[58]),tt(wt,"input",n[59]),tt(wt,"focus",n[60]),tt(wt,"paste",n[61]),tt(C,"submit",dn(n[63]))],zt=!0)},p(F,st){var j;F[17]?dt?(dt.p(F,st),st[0]&131072&&O(dt,1)):(dt=Tl(F),dt.c(),O(dt,1),dt.m(t.parentNode,t)):dt&&(qt(),U(dt,1,1,()=>{dt=null}),Wt()),F[2]===!1&&F[9].length>0?Rt?Rt.p(F,st):(Rt=Vl(F),Rt.c(),Rt.m(o,null)):Rt&&(Rt.d(1),Rt=null);let M=c;c=pe(F,st),c===M?~c&&te[c].p(F,st):(d&&(qt(),U(te[M],1,1,()=>{te[M]=null}),Wt()),~c?(d=te[c],d?d.p(F,st):(d=te[c]=ge[c](F),d.c()),O(d,1),d.m(i,k)):d=null);const q={};st[0]&512&&(q.messages=F[9]),!p&&st[0]&2&&(p=!0,q.prompt=F[1],At(()=>p=!1)),!g&&st[0]&262144&&(g=!0,q.user=F[18],At(()=>g=!1)),!h&&st[0]&524288&&(h=!0,q.chatInputPlaceholder=F[19],At(()=>h=!1)),_.$set(q),F[0]!==void 0?Bt?(Bt.p(F,st),st[0]&1&&O(Bt,1)):(Bt=Bl(F),Bt.c(),O(Bt,1),Bt.m(i,null)):Bt&&(qt(),U(Bt,1,1,()=>{Bt=null}),Wt()),F[3].length>0?Nt?(Nt.p(F,st),st[0]&8&&O(Nt,1)):(Nt=Nl(F),Nt.c(),O(Nt,1),Nt.m(C,$)):Nt&&(qt(),U(Nt,1,1,()=>{Nt=null}),Wt());const X={};st[0]&4096&&(X.uploadFilesHandler=F[52]),st[0]&1024&&(X.onClose=F[53]),st[2]&4096&&(X.$$scope={dirty:st,ctx:F}),!A&&st[0]&16&&(A=!0,X.webSearchEnabled=F[4],At(()=>A=!1)),P.$set(X),(!nt||st[0]&6815744&&kt!==(kt=F[19]!==""?F[19]:F[21]?F[22].t("Listening..."):F[22].t("Send a Message")))&&f(wt,"placeholder",kt),st[0]&2&&Xe(wt,F[1]);let z=Ut;Ut=ve(F,st),Ut===z?ee[Ut].p(F,st):(qt(),U(ee[z],1,1,()=>{ee[z]=null}),Wt(),Vt=ee[Ut],Vt?Vt.p(F,st):(Vt=ee[Ut]=be[Ut](F),Vt.c()),O(Vt,1),Vt.m(jt,null)),(!nt||st[0]&8388608&&Gt!==(Gt=((j=F[23])==null?void 0:j.chatDirection)??"LTR"))&&f(C,"dir",Gt),(!nt||st[0]&4194304)&&R!==(R=F[22].t("LLMs can make mistakes. Verify important information.")+"")&&St(W,R)},i(F){nt||(O(dt),O(d),O(_.$$.fragment,F),O(Bt),O(Nt),O(P.$$.fragment,F),O(Vt),nt=!0)},o(F){U(dt),U(d),U(_.$$.fragment,F),U(Bt),U(Nt),U(P.$$.fragment,F),U(Vt),nt=!1},d(F){F&&(m(t),m(e)),dt&&dt.d(F),Rt&&Rt.d(),~c&&te[c].d(),n[40](null),ft(_),Bt&&Bt.d(),n[47](null),Nt&&Nt.d(),ft(P),n[55](null),ee[Ut].d(),zt=!1,ce(Ft)}}}function Er(n,t,e){let l,s,o,r,i;it(n,ue,b=>e(23,s=b)),it(n,Ue,b=>e(11,o=b)),it(n,Ae,b=>e(24,r=b)),it(n,ln,b=>e(25,i=b));const a=fe("i18n");it(n,a,b=>e(22,l=b));let{submitPrompt:u}=t,{stopResponse:c}=t,{autoScroll:d=!0}=t,{atSelectedModel:k}=t,{selectedModels:_}=t,p,g,h,w,y,V,N=!1,D=null,T="",{files:B=[]}=t,{speechRecognitionEnabled:C=!0}=t,{webSearchEnabled:$=!1}=t,{prompt:L=""}=t,{messages:Z=[]}=t,P,A=[],et,wt=[],kt=!1;const Zt=-45,jt=()=>{const b=document.getElementById("messages-container");b.scrollTop=b.scrollHeight},Ot=async()=>{const b=await navigator.mediaDevices.getUserMedia({audio:!0});et=new MediaRecorder(b),et.onstart=()=>{e(21,kt=!0),console.log("Recording started")},et.ondataavailable=Y=>wt.push(Y.data),et.onstop=async()=>{e(21,kt=!1),console.log("Recording stopped");const Y=new Blob(wt,{type:"audio/wav"}),lt=ll(Y,"recording.wav"),G=await il(localStorage.token,lt).catch(ot=>(bt.error(ot),null));G&&(e(1,L=G.text),await Dt(),p==null||p.focus(),L!==""&&(s==null?void 0:s.speechAutoSend)===!0&&u(L,D)),wt=[]},et.start(),Ut(b)},Ut=b=>{const Y=new AudioContext,lt=Y.createMediaStreamSource(b),G=Y.createAnalyser();G.minDecibels=Zt,lt.connect(G);const ot=G.frequencyBinCount,x=new Uint8Array(ot);let It=Date.now();const Mt=()=>{if(G.getByteFrequencyData(x),x.some(Ht=>Ht>0)&&(It=Date.now()),kt&&Date.now()-It>3e3){et.stop(),Y.close();return}window.requestAnimationFrame(Mt)};window.requestAnimationFrame(Mt)},Vt=()=>{var b;if(kt)P&&P.stop(),et&&et.stop();else if(e(21,kt=!0),((b=s==null?void 0:s.audio)==null?void 0:b.STTEngine)??!1)Ot();else if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){P=new(window.SpeechRecognition||window.webkitSpeechRecognition),P.continuous=!0;const Y=3e3;let lt;P.start(),P.onresult=async G=>{clearTimeout(lt),console.log(G);const ot=G.results[Object.keys(G.results).length-1][0].transcript;e(1,L=`${L}${ot}`),await Dt(),p==null||p.focus(),lt=setTimeout(()=>{console.log("Speech recognition turned off due to inactivity."),P.stop()},Y)},P.onend=function(){console.log("recognition ended"),e(21,kt=!1),L!==""&&(s==null?void 0:s.speechAutoSend)===!0&&u(L,D)},P.onerror=function(G){console.log(G),bt.error(l.t("Speech recognition error: {{error}}",{error:G.error})),e(21,kt=!1)}}else bt.error(l.t("SpeechRecognition API is not supported in this browser."))},Gt=async b=>{console.log(b);const Y={type:"doc",name:b.name,collection_name:"",upload_status:!1,error:""};try{if(e(3,B=[...B,Y]),["audio/mpeg","audio/wav"].includes(b.type)){const G=await il(localStorage.token,b).catch(ot=>(bt.error(ot),null));if(G){console.log(G);const ot=new Blob([G.text],{type:"text/plain"});b=ll(ot,`${b.name}.txt`)}}const lt=await An(localStorage.token,"",b);lt&&(Y.upload_status=!0,Y.collection_name=lt.collection_name,e(3,B))}catch(lt){e(3,B=B.filter(G=>G.name!==b.name)),bt.error(lt)}},xt=async b=>{console.log(b);const Y={type:"doc",name:b,collection_name:"",upload_status:!1,url:b,error:""};try{e(3,B=[...B,Y]);const lt=await Ln(localStorage.token,"",b);lt&&(Y.upload_status=!0,Y.collection_name=lt.collection_name,e(3,B))}catch(lt){e(3,B=B.filter(G=>G.name!==b)),bt.error(lt)}},Jt=async b=>{console.log(b);const Y={type:"doc",name:b,collection_name:"",upload_status:!1,url:b,error:""};try{e(3,B=[...B,Y]);const lt=await Pn(localStorage.token,b);lt&&(Y.upload_status=!0,Y.collection_name=lt.collection_name,e(3,B))}catch(lt){e(3,B=B.filter(G=>G.name!==b)),bt.error(lt)}};Ze(()=>{window.setTimeout(()=>p==null?void 0:p.focus(),0);const b=document.querySelector("body"),Y=x=>{x.key==="Escape"&&(console.log("Escape"),e(17,N=!1))},lt=x=>{x.preventDefault(),e(17,N=!0)},G=()=>{e(17,N=!1)},ot=async x=>{var It,Mt;if(x.preventDefault(),console.log(x),(It=x.dataTransfer)!=null&&It.files){const Ht=Array.from((Mt=x.dataTransfer)==null?void 0:Mt.files);Ht&&Ht.length>0?Ht.forEach(rt=>{if(console.log(rt,rt.name.split(".").at(-1)),["image/gif","image/webp","image/jpeg","image/png"].includes(rt.type)){if(A.length===0){bt.error(l.t("Selected model(s) do not support image inputs"));return}let _t=new FileReader;_t.onload=$t=>{e(3,B=[...B,{type:"image",url:`${$t.target.result}`}])},_t.readAsDataURL(rt)}else xe.includes(rt.type)||$e.includes(rt.name.split(".").at(-1))||bt.error(l.t("Unknown File Type '{{file_type}}', but accepting and treating as plain text",{file_type:rt.type})),Gt(rt)}):bt.error(l.t("File not found."))}e(17,N=!1)};return window.addEventListener("keydown",Y),b==null||b.addEventListener("dragover",lt),b==null||b.addEventListener("drop",ot),b==null||b.addEventListener("dragleave",G),()=>{window.removeEventListener("keydown",Y),b==null||b.removeEventListener("dragover",lt),b==null||b.removeEventListener("drop",ot),b==null||b.removeEventListener("dragleave",G)}});const R=()=>{e(2,d=!0),jt()};function W(b){vt[b?"unshift":"push"](()=>{h=b,e(13,h)})}function nt(b){L=b,e(1,L)}function zt(b){vt[b?"unshift":"push"](()=>{w=b,e(14,w)})}function Ft(b){L=b,e(1,L)}const dt=b=>{console.log(b),Jt(b.detail)},Rt=b=>{console.log(b),xt(b.detail)},ge=b=>{var Y;console.log(b),e(3,B=[...B,{type:((Y=b==null?void 0:b.detail)==null?void 0:Y.type)??"doc",...b.detail,upload_status:!0}])};function te(b){vt[b?"unshift":"push"](()=>{y=b,e(15,y)})}function pe(b){L=b,e(1,L)}function Ie(b){D=b,e(18,D)}function Me(b){T=b,e(19,T)}const De=b=>{e(0,k=b.detail),p==null||p.focus()},de=b=>b.id===k.id,Bt=()=>{e(0,k=void 0)};function Nt(b){vt[b?"unshift":"push"](()=>{g=b,e(12,g)})}function Ce(){V=this.files,e(16,V)}const _e=async()=>{V&&V.length>0?Array.from(V).forEach(Y=>{if(["image/gif","image/webp","image/jpeg","image/png"].includes(Y.type)){if(A.length===0){bt.error(l.t("Selected model(s) do not support image inputs")),e(16,V=null),e(12,g.value="",g);return}let lt=new FileReader;lt.onload=G=>{e(3,B=[...B,{type:"image",url:`${G.target.result}`}]),e(16,V=null),e(12,g.value="",g)},lt.readAsDataURL(Y)}else xe.includes(Y.type)||$e.includes(Y.name.split(".").at(-1))?(Gt(Y),e(12,g.value="",g)):(bt.error(l.t("Unknown File Type '{{file_type}}', but accepting and treating as plain text",{file_type:Y.type})),Gt(Y),e(12,g.value="",g))}):bt.error(l.t("File not found."))},be=b=>!A.includes(b),ee=b=>{B.splice(b,1),e(3,B)},ve=()=>{g.click()},F=async()=>{await Dt(),p==null||p.focus()};function st(b){$=b,e(4,$)}function M(b){vt[b?"unshift":"push"](()=>{p=b,e(10,p),e(1,L)})}function q(){L=this.value,e(1,L)}const X=b=>{(!i||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(b.key==="Enter"&&!b.shiftKey&&b.preventDefault(),L!==""&&b.key==="Enter"&&!b.shiftKey&&u(L,D))},z=async b=>{var lt;const Y=b.ctrlKey||b.metaKey;if(L===""&&Y&&b.key.toLowerCase()==="r"){b.preventDefault(),console.log("regenerate");const G=[...document.getElementsByClassName("regenerate-response-button")].at(-1);G==null||G.click()}if(L===""&&b.key=="ArrowUp"){b.preventDefault();const G=[...document.getElementsByClassName("user-message")].at(-1),ot=[...document.getElementsByClassName("edit-user-message-button")].at(-1);console.log(G),G.scrollIntoView({block:"center"}),ot==null||ot.click()}if(["/","#","@"].includes(L.charAt(0))&&b.key==="ArrowUp"&&(b.preventDefault(),(h||w||y).selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),["/","#","@"].includes(L.charAt(0))&&b.key==="ArrowDown"&&(b.preventDefault(),(h||w||y).selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),["/","#","@"].includes(L.charAt(0))&&b.key==="Enter"){b.preventDefault();const G=[...document.getElementsByClassName("selected-command-option-button")].at(-1);b.shiftKey?e(1,L=`${L}
`):G?G==null||G.click():(lt=document.getElementById("send-message-button"))==null||lt.click()}if(["/","#","@"].includes(L.charAt(0))&&b.key==="Tab"){b.preventDefault();const G=[...document.getElementsByClassName("selected-command-option-button")].at(-1);G==null||G.click()}else if(b.key==="Tab"){const G=rn(L);if(G.length>0){const ot=G.at(0),x=L;e(1,L=L.substring(0,(ot==null?void 0:ot.endIndex)+1)),await Dt(),b.target.scrollTop=b.target.scrollHeight,e(1,L=x),await Dt(),b.preventDefault(),b.target.setSelectionRange(ot==null?void 0:ot.startIndex,ot.endIndex+1)}b.target.style.height="",b.target.style.height=Math.min(b.target.scrollHeight,200)+"px"}b.key==="Escape"&&(console.log("Escape"),e(0,k=void 0))},j=b=>{b.target.style.height="",b.target.style.height=Math.min(b.target.scrollHeight,200)+"px",e(18,D=null)},K=b=>{b.target.style.height="",b.target.style.height=Math.min(b.target.scrollHeight,200)+"px"},yt=b=>{const Y=b.clipboardData||window.clipboardData;if(Y&&Y.items){for(const lt of Y.items)if(lt.type.indexOf("image")!==-1){const G=lt.getAsFile(),ot=new FileReader;ot.onload=function(x){e(3,B=[...B,{type:"image",url:`${x.target.result}`}])},ot.readAsDataURL(G)}}},Ct=()=>{Vt()},Et=()=>{u(L,D)};return n.$$set=b=>{"submitPrompt"in b&&e(5,u=b.submitPrompt),"stopResponse"in b&&e(6,c=b.stopResponse),"autoScroll"in b&&e(2,d=b.autoScroll),"atSelectedModel"in b&&e(0,k=b.atSelectedModel),"selectedModels"in b&&e(7,_=b.selectedModels),"files"in b&&e(3,B=b.files),"speechRecognitionEnabled"in b&&e(8,C=b.speechRecognitionEnabled),"webSearchEnabled"in b&&e(4,$=b.webSearchEnabled),"prompt"in b&&e(1,L=b.prompt),"messages"in b&&e(9,Z=b.messages)},n.$$.update=()=>{n.$$.dirty[0]&2177&&e(20,A=[...k?[k]:_].filter(b=>{var Y,lt,G,ot;return((ot=(G=(lt=(Y=o.find(x=>x.id===b))==null?void 0:Y.info)==null?void 0:lt.meta)==null?void 0:G.capabilities)==null?void 0:ot.vision)??!0})),n.$$.dirty[0]&1026&&L&&p&&(e(10,p.style.height="",p),e(10,p.style.height=Math.min(p.scrollHeight,200)+"px",p))},[k,L,d,B,$,u,c,_,C,Z,p,o,g,h,w,y,V,N,D,T,A,kt,l,s,r,i,a,jt,Vt,Gt,xt,Jt,R,W,nt,zt,Ft,dt,Rt,ge,te,pe,Ie,Me,De,de,Bt,Nt,Ce,_e,be,ee,ve,F,st,M,q,X,z,j,K,yt,Ct,Et]}class Sr extends Yt{constructor(t){super(),Xt(this,t,Er,yr,Qt,{submitPrompt:5,stopResponse:6,autoScroll:2,atSelectedModel:0,selectedModels:7,files:3,speechRecognitionEnabled:8,webSearchEnabled:4,prompt:1,messages:9},null,[-1,-1,-1])}}function Ll(n,t,e){const l=n.slice();return l[12]=t[e],l[13]=t,l[14]=e,l}function Ir(n){let t,e,l;return e=new he({props:{content:n[4].t("Remove Model"),$$slots:{default:[Dr]},$$scope:{ctx:n}}}),{c(){t=S("div"),at(e.$$.fragment),this.h()},l(s){t=I(s,"DIV",{class:!0});var o=E(t);ct(e.$$.fragment,o),o.forEach(m),this.h()},h(){f(t,"class","self-center disabled:text-gray-600 disabled:hover:text-gray-600 mr-2")},m(s,o){H(s,t,o),ut(e,t,null),l=!0},p(s,o){const r={};o&16&&(r.content=s[4].t("Remove Model")),o&32771&&(r.$$scope={dirty:o,ctx:s}),e.$set(r)},i(s){l||(O(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){s&&m(t),ft(e)}}}function Mr(n){let t,e,l;return e=new he({props:{content:n[4].t("Add Model"),$$slots:{default:[Cr]},$$scope:{ctx:n}}}),{c(){t=S("div"),at(e.$$.fragment),this.h()},l(s){t=I(s,"DIV",{class:!0});var o=E(t);ct(e.$$.fragment,o),o.forEach(m),this.h()},h(){f(t,"class","self-center mr-2 disabled:text-gray-600 disabled:hover:text-gray-600")},m(s,o){H(s,t,o),ut(e,t,null),l=!0},p(s,o){const r={};o&16&&(r.content=s[4].t("Add Model")),o&32771&&(r.$$scope={dirty:o,ctx:s}),e.$set(r)},i(s){l||(O(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){s&&m(t),ft(e)}}}function Dr(n){let t,e,l,s,o;function r(){return n[10](n[14])}return{c(){t=S("button"),e=gt("svg"),l=gt("path"),this.h()},l(i){t=I(i,"BUTTON",{});var a=E(t);e=pt(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var u=E(e);l=pt(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(l).forEach(m),u.forEach(m),a.forEach(m),this.h()},h(){f(l,"stroke-linecap","round"),f(l,"stroke-linejoin","round"),f(l,"d","M19.5 12h-15"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width","2"),f(e,"stroke","currentColor"),f(e,"class","size-3.5"),t.disabled=n[1]},m(i,a){H(i,t,a),v(t,e),v(e,l),s||(o=tt(t,"click",r),s=!0)},p(i,a){n=i,a&2&&(t.disabled=n[1])},d(i){i&&m(t),s=!1,o()}}}function Cr(n){let t,e,l,s,o;return{c(){t=S("button"),e=gt("svg"),l=gt("path"),this.h()},l(r){t=I(r,"BUTTON",{class:!0});var i=E(t);e=pt(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=E(e);l=pt(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(l).forEach(m),a.forEach(m),i.forEach(m),this.h()},h(){f(l,"stroke-linecap","round"),f(l,"stroke-linejoin","round"),f(l,"d","M12 6v12m6-6H6"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width","2"),f(e,"stroke","currentColor"),f(e,"class","size-3.5"),f(t,"class",""),t.disabled=n[1]},m(r,i){H(r,t,i),v(t,e),v(e,l),s||(o=tt(t,"click",n[9]),s=!0)},p(r,i){i&2&&(t.disabled=r[1])},d(r){r&&m(t),s=!1,o()}}}function Pl(n){let t,e,l,s,o,r,i,a,u,c;function d(h){n[8](h,n[12],n[13],n[14])}let k={placeholder:n[4].t("Select a model"),items:n[3].map(Rl)};n[12]!==void 0&&(k.value=n[12]),s=new Yn({props:k}),vt.push(()=>Lt(s,"value",d));const _=[Mr,Ir],p=[];function g(h,w){return h[14]===0?0:1}return i=g(n),a=p[i]=_[i](n),{c(){t=S("div"),e=S("div"),l=S("div"),at(s.$$.fragment),r=J(),a.c(),u=J(),this.h()},l(h){t=I(h,"DIV",{class:!0});var w=E(t);e=I(w,"DIV",{class:!0});var y=E(e);l=I(y,"DIV",{class:!0});var V=E(l);ct(s.$$.fragment,V),V.forEach(m),y.forEach(m),r=Q(w),a.l(w),u=Q(w),w.forEach(m),this.h()},h(){f(l,"class","mr-1 max-w-full"),f(e,"class","overflow-hidden w-full"),f(t,"class","flex w-full max-w-fit")},m(h,w){H(h,t,w),v(t,e),v(e,l),ut(s,l,null),v(t,r),p[i].m(t,null),v(t,u),c=!0},p(h,w){n=h;const y={};w&16&&(y.placeholder=n[4].t("Select a model")),w&8&&(y.items=n[3].map(Rl)),!o&&w&1&&(o=!0,y.value=n[12],At(()=>o=!1)),s.$set(y),a.p(n,w)},i(h){c||(O(s.$$.fragment,h),O(a),c=!0)},o(h){U(s.$$.fragment,h),U(a),c=!1},d(h){h&&m(t),ft(s),p[i].d()}}}function Ul(n){let t,e,l=n[4].t("Set as default")+"",s,o,r;return{c(){t=S("div"),e=S("button"),s=mt(l),this.h()},l(i){t=I(i,"DIV",{class:!0});var a=E(t);e=I(a,"BUTTON",{});var u=E(e);s=ht(u,l),u.forEach(m),a.forEach(m),this.h()},h(){f(t,"class","text-left mt-0.5 ml-1 text-[0.7rem] text-gray-500")},m(i,a){H(i,t,a),v(t,e),v(e,s),o||(r=tt(e,"click",n[7]),o=!0)},p(i,a){a&16&&l!==(l=i[4].t("Set as default")+"")&&St(s,l)},d(i){i&&m(t),o=!1,r()}}}function Tr(n){let t,e,l,s,o=ne(n[0]),r=[];for(let u=0;u<o.length;u+=1)r[u]=Pl(Ll(n,o,u));const i=u=>U(r[u],1,1,()=>{r[u]=null});let a=n[2]&&!n[5]&&Ul(n);return{c(){t=S("div");for(let u=0;u<r.length;u+=1)r[u].c();e=J(),a&&a.c(),l=Pt(),this.h()},l(u){t=I(u,"DIV",{class:!0});var c=E(t);for(let d=0;d<r.length;d+=1)r[d].l(c);c.forEach(m),e=Q(u),a&&a.l(u),l=Pt(),this.h()},h(){f(t,"class","flex flex-col w-full items-center md:items-start")},m(u,c){H(u,t,c);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(t,null);H(u,e,c),a&&a.m(u,c),H(u,l,c),s=!0},p(u,[c]){if(c&27){o=ne(u[0]);let d;for(d=0;d<o.length;d+=1){const k=Ll(u,o,d);r[d]?(r[d].p(k,c),O(r[d],1)):(r[d]=Pl(k),r[d].c(),O(r[d],1),r[d].m(t,null))}for(qt(),d=o.length;d<r.length;d+=1)i(d);Wt()}u[2]&&!u[5]?a?a.p(u,c):(a=Ul(u),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},i(u){if(!s){for(let c=0;c<o.length;c+=1)O(r[c]);s=!0}},o(u){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)U(r[c]);s=!1},d(u){u&&(m(t),m(e),m(l)),Ee(r,u),a&&a.d(u)}}}const Rl=n=>({value:n.id,label:n.name,model:n});function Vr(n,t,e){let l,s,o,r;it(n,Ue,g=>e(3,l=g)),it(n,ue,g=>e(11,o=g)),it(n,ln,g=>e(5,r=g));const i=fe("i18n");it(n,i,g=>e(4,s=g));let{selectedModels:a=[""]}=t,{disabled:u=!1}=t,{showSetDefault:c=!0}=t;const d=async()=>{if(a.filter(h=>h==="").length){bt.error(s.t("Choose a model before saving..."));return}ue.set({...o,models:a}),await Vn(localStorage.token,{ui:o}),bt.success(s.t("Default model updated"))};function k(g,h,w,y){w[y]=g,e(0,a),e(3,l)}const _=()=>{e(0,a=[...a,""])},p=g=>{a.splice(g,1),e(0,a),e(3,l)};return n.$$set=g=>{"selectedModels"in g&&e(0,a=g.selectedModels),"disabled"in g&&e(1,u=g.disabled),"showSetDefault"in g&&e(2,c=g.showSetDefault)},n.$$.update=()=>{n.$$.dirty&9&&a.length>0&&l.length>0&&e(0,a=a.map(g=>l.map(h=>h.id).includes(g)?g:""))},[a,u,c,l,s,r,i,d,k,_,p]}class Br extends Yt{constructor(t){super(),Xt(this,t,Vr,Tr,Qt,{selectedModels:0,disabled:1,showSetDefault:2})}}function Nr(n){let t;const e=n[10].default,l=se(e,n,n[16],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),t=!0},p(s,o){l&&l.p&&(!t||o&65536)&&re(l,e,s,s[16],t?ie(e,s[16],o,null):oe(s[16]),null)},i(s){t||(O(l,s),t=!0)},o(s){U(l,s),t=!1},d(s){l&&l.d(s)}}}function Or(n){let t,e,l,s,o=n[3].t("Share")+"",r;return{c(){t=gt("svg"),e=gt("path"),l=J(),s=S("div"),r=mt(o),this.h()},l(i){t=pt(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=E(t);e=pt(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(e).forEach(m),a.forEach(m),l=Q(i),s=I(i,"DIV",{class:!0});var u=E(s);r=ht(u,o),u.forEach(m),this.h()},h(){f(e,"fill-rule","evenodd"),f(e,"d","M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z"),f(e,"clip-rule","evenodd"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"viewBox","0 0 24 24"),f(t,"fill","currentColor"),f(t,"class","size-4"),f(s,"class","flex items-center")},m(i,a){H(i,t,a),v(t,e),H(i,l,a),H(i,s,a),v(s,r)},p(i,a){a&8&&o!==(o=i[3].t("Share")+"")&&St(r,o)},d(i){i&&(m(t),m(l),m(s))}}}function Hr(n){let t,e,l,s,o=n[3].t("Download")+"",r;return{c(){t=gt("svg"),e=gt("path"),l=J(),s=S("div"),r=mt(o),this.h()},l(i){t=pt(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=E(t);e=pt(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(e).forEach(m),a.forEach(m),l=Q(i),s=I(i,"DIV",{class:!0});var u=E(s);r=ht(u,o),u.forEach(m),this.h()},h(){f(e,"stroke-linecap","round"),f(e,"stroke-linejoin","round"),f(e,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"fill","none"),f(t,"viewBox","0 0 24 24"),f(t,"stroke-width","1.5"),f(t,"stroke","currentColor"),f(t,"class","size-4"),f(s,"class","flex items-center")},m(i,a){H(i,t,a),v(t,e),H(i,l,a),H(i,s,a),v(s,r)},p(i,a){a&8&&o!==(o=i[3].t("Download")+"")&&St(r,o)},d(i){i&&(m(t),m(l),m(s))}}}function Ar(n){let t,e=n[3].t("Export chat (.json)")+"",l;return{c(){t=S("div"),l=mt(e),this.h()},l(s){t=I(s,"DIV",{class:!0});var o=E(t);l=ht(o,e),o.forEach(m),this.h()},h(){f(t,"class","flex items-center line-clamp-1")},m(s,o){H(s,t,o),v(t,l)},p(s,o){o&8&&e!==(e=s[3].t("Export chat (.json)")+"")&&St(l,e)},d(s){s&&m(t)}}}function Lr(n){let t,e=n[3].t("Plain text (.txt)")+"",l;return{c(){t=S("div"),l=mt(e),this.h()},l(s){t=I(s,"DIV",{class:!0});var o=E(t);l=ht(o,e),o.forEach(m),this.h()},h(){f(t,"class","flex items-center line-clamp-1")},m(s,o){H(s,t,o),v(t,l)},p(s,o){o&8&&e!==(e=s[3].t("Plain text (.txt)")+"")&&St(l,e)},d(s){s&&m(t)}}}function Pr(n){let t,e=n[3].t("PDF document (.pdf)")+"",l;return{c(){t=S("div"),l=mt(e),this.h()},l(s){t=I(s,"DIV",{class:!0});var o=E(t);l=ht(o,e),o.forEach(m),this.h()},h(){f(t,"class","flex items-center line-clamp-1")},m(s,o){H(s,t,o),v(t,l)},p(s,o){o&8&&e!==(e=s[3].t("PDF document (.pdf)")+"")&&St(l,e)},d(s){s&&m(t)}}}function Ur(n){let t,e,l,s,o,r;return t=new Ne({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ar]},$$scope:{ctx:n}}}),t.$on("click",n[12]),l=new Ne({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Lr]},$$scope:{ctx:n}}}),l.$on("click",n[13]),o=new Ne({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Pr]},$$scope:{ctx:n}}}),o.$on("click",n[14]),{c(){at(t.$$.fragment),e=J(),at(l.$$.fragment),s=J(),at(o.$$.fragment)},l(i){ct(t.$$.fragment,i),e=Q(i),ct(l.$$.fragment,i),s=Q(i),ct(o.$$.fragment,i)},m(i,a){ut(t,i,a),H(i,e,a),ut(l,i,a),H(i,s,a),ut(o,i,a),r=!0},p(i,a){const u={};a&65544&&(u.$$scope={dirty:a,ctx:i}),t.$set(u);const c={};a&65544&&(c.$$scope={dirty:a,ctx:i}),l.$set(c);const d={};a&65544&&(d.$$scope={dirty:a,ctx:i}),o.$set(d)},i(i){r||(O(t.$$.fragment,i),O(l.$$.fragment,i),O(o.$$.fragment,i),r=!0)},o(i){U(t.$$.fragment,i),U(l.$$.fragment,i),U(o.$$.fragment,i),r=!1},d(i){i&&(m(e),m(s)),ft(t,i),ft(l,i),ft(o,i)}}}function Rr(n){let t,e,l,s;return t=new Ms({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Hr]},$$scope:{ctx:n}}}),l=new vs({props:{class:"w-full rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",transition:Ge,sideOffset:8,$$slots:{default:[Ur]},$$scope:{ctx:n}}}),{c(){at(t.$$.fragment),e=J(),at(l.$$.fragment)},l(o){ct(t.$$.fragment,o),e=Q(o),ct(l.$$.fragment,o)},m(o,r){ut(t,o,r),H(o,e,r),ut(l,o,r),s=!0},p(o,r){const i={};r&65544&&(i.$$scope={dirty:r,ctx:o}),t.$set(i);const a={};r&65544&&(a.$$scope={dirty:r,ctx:o}),l.$set(a)},i(o){s||(O(t.$$.fragment,o),O(l.$$.fragment,o),s=!0)},o(o){U(t.$$.fragment,o),U(l.$$.fragment,o),s=!1},d(o){o&&m(e),ft(t,o),ft(l,o)}}}function jr(n){let t,e,l,s,o,r,i,a,u;return t=new Ne({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[Or]},$$scope:{ctx:n}}}),t.$on("click",n[11]),l=new ss({props:{$$slots:{default:[Rr]},$$scope:{ctx:n}}}),a=new Zn({props:{chatId:n[1].id}}),{c(){at(t.$$.fragment),e=J(),at(l.$$.fragment),s=J(),o=S("hr"),r=J(),i=S("div"),at(a.$$.fragment),this.h()},l(c){ct(t.$$.fragment,c),e=Q(c),ct(l.$$.fragment,c),s=Q(c),o=I(c,"HR",{class:!0}),r=Q(c),i=I(c,"DIV",{class:!0});var d=E(i);ct(a.$$.fragment,d),d.forEach(m),this.h()},h(){f(o,"class","border-gray-100 dark:border-gray-800 mt-2.5 mb-1.5"),f(i,"class","flex p-1")},m(c,d){ut(t,c,d),H(c,e,d),ut(l,c,d),H(c,s,d),H(c,o,d),H(c,r,d),H(c,i,d),ut(a,i,null),u=!0},p(c,d){const k={};d&65544&&(k.$$scope={dirty:d,ctx:c}),t.$set(k);const _={};d&65544&&(_.$$scope={dirty:d,ctx:c}),l.$set(_);const p={};d&2&&(p.chatId=c[1].id),a.$set(p)},i(c){u||(O(t.$$.fragment,c),O(l.$$.fragment,c),O(a.$$.fragment,c),u=!0)},o(c){U(t.$$.fragment,c),U(l.$$.fragment,c),U(a.$$.fragment,c),u=!1},d(c){c&&(m(e),m(s),m(o),m(r),m(i)),ft(t,c),ft(l,c),ft(a)}}}function zr(n){let t,e,l;return e=new cn({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"end",transition:Ge,$$slots:{default:[jr]},$$scope:{ctx:n}}}),{c(){t=S("div"),at(e.$$.fragment),this.h()},l(s){t=I(s,"DIV",{slot:!0});var o=E(t);ct(e.$$.fragment,o),o.forEach(m),this.h()},h(){f(t,"slot","content")},m(s,o){H(s,t,o),ut(e,t,null),l=!0},p(s,o){const r={};o&65547&&(r.$$scope={dirty:o,ctx:s}),e.$set(r)},i(s){l||(O(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){s&&m(t),ft(e)}}}function Fr(n){let t,e;return t=new an({props:{$$slots:{content:[zr],default:[Nr]},$$scope:{ctx:n}}}),t.$on("change",n[15]),{c(){at(t.$$.fragment)},l(l){ct(t.$$.fragment,l)},m(l,s){ut(t,l,s),e=!0},p(l,[s]){const o={};s&65547&&(o.$$scope={dirty:s,ctx:l}),t.$set(o)},i(l){e||(O(t.$$.fragment,l),e=!0)},o(l){U(t.$$.fragment,l),e=!1},d(l){ft(t,l)}}}function qr(n,t,e){let l,{$$slots:s={},$$scope:o}=t;const{saveAs:r}=Kn,i=fe("i18n");it(n,i,D=>e(3,l=D));let{shareEnabled:a=!1}=t,{shareHandler:u}=t,{downloadHandler:c}=t,{chat:d}=t,{onClose:k=()=>{}}=t;const _=async()=>{const D=d.chat;console.log("download",d);const T=D.messages.reduce((C,$,L,Z)=>`${C}### ${$.role.toUpperCase()}
${$.content}

`,"");let B=new Blob([T],{type:"text/plain"});r(B,`chat-${D.title}.txt`)},p=async()=>{const D=d.chat;console.log("download",d);const T=await xn(D),B=window.URL.createObjectURL(T),C=document.createElement("a");C.href=B,C.download=`chat-${D.title}.pdf`,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(B)},g=async()=>{let D=new Blob([JSON.stringify([d])],{type:"application/json"});r(D,`chat-export-${Date.now()}.json`)},h=()=>{u()},w=()=>{g()},y=()=>{_()},V=()=>{p()},N=D=>{D.detail===!1&&k()};return n.$$set=D=>{"shareEnabled"in D&&e(8,a=D.shareEnabled),"shareHandler"in D&&e(0,u=D.shareHandler),"downloadHandler"in D&&e(9,c=D.downloadHandler),"chat"in D&&e(1,d=D.chat),"onClose"in D&&e(2,k=D.onClose),"$$scope"in D&&e(16,o=D.$$scope)},[u,d,k,l,i,_,p,g,a,c,s,h,w,y,V,N,o]}class Wr extends Yt{constructor(t){super(),Xt(this,t,qr,Fr,Qt,{shareEnabled:8,shareHandler:0,downloadHandler:9,chat:1,onClose:2})}}function jl(n){let t,e,l;function s(r){n[15](r)}let o={showSetDefault:!n[2]};return n[0]!==void 0&&(o.selectedModels=n[0]),t=new Br({props:o}),vt.push(()=>Lt(t,"selectedModels",s)),{c(){at(t.$$.fragment)},l(r){ct(t.$$.fragment,r)},m(r,i){ut(t,r,i),l=!0},p(r,i){const a={};i&4&&(a.showSetDefault=!r[2]),!e&&i&1&&(e=!0,a.selectedModels=r[0],At(()=>e=!1)),t.$set(a)},i(r){l||(O(t.$$.fragment,r),l=!0)},o(r){U(t.$$.fragment,r),l=!1},d(r){ft(t,r)}}}function zl(n){let t,e;return t=new Wr({props:{chat:n[3],shareEnabled:n[2],shareHandler:n[16],downloadHandler:n[17],$$slots:{default:[Zr]},$$scope:{ctx:n}}}),{c(){at(t.$$.fragment)},l(l){ct(t.$$.fragment,l)},m(l,s){ut(t,l,s),e=!0},p(l,s){const o={};s&8&&(o.chat=l[3]),s&4&&(o.shareEnabled=l[2]),s&32&&(o.shareHandler=l[16]),s&64&&(o.downloadHandler=l[17]),s&2097152&&(o.$$scope={dirty:s,ctx:l}),t.$set(o)},i(l){e||(O(t.$$.fragment,l),e=!0)},o(l){U(t.$$.fragment,l),e=!1},d(l){ft(t,l)}}}function Zr(n){let t,e='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"></path></svg></div>';return{c(){t=S("button"),t.innerHTML=e,this.h()},l(l){t=I(l,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),Kt(t)!=="svelte-9m6068"&&(t.innerHTML=e),this.h()},h(){f(t,"class","hidden md:flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition"),f(t,"id","chat-context-menu-button")},m(l,s){H(l,t,s)},p:Tt,d(l){l&&m(t)}}}function Gr(n){let t,e,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"></path><path d="M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"></path></svg>',s,o,r;return{c(){t=S("button"),e=S("div"),e.innerHTML=l,this.h()},l(i){t=I(i,"BUTTON",{id:!0,class:!0});var a=E(t);e=I(a,"DIV",{class:!0,"data-svelte-h":!0}),Kt(e)!=="svelte-1fcii9y"&&(e.innerHTML=l),a.forEach(m),this.h()},h(){f(e,"class","m-auto self-center"),f(t,"id","new-chat-button"),f(t,"class",s="flex "+(n[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition")},m(i,a){H(i,t,a),v(t,e),o||(r=tt(t,"click",n[18]),o=!0)},p(i,a){a&256&&s!==(s="flex "+(i[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition")&&f(t,"class",s)},d(i){i&&m(t),o=!1,r()}}}function Fl(n){let t,e;return t=new Jn({props:{className:"max-w-[200px]",role:n[10].role,$$slots:{default:[Jr]},$$scope:{ctx:n}}}),t.$on("show",n[19]),{c(){at(t.$$.fragment)},l(l){ct(t.$$.fragment,l)},m(l,s){ut(t,l,s),e=!0},p(l,s){const o={};s&1024&&(o.role=l[10].role),s&2098176&&(o.$$scope={dirty:s,ctx:l}),t.$set(o)},i(l){e||(O(t.$$.fragment,l),e=!0)},o(l){U(t.$$.fragment,l),e=!1},d(l){ft(t,l)}}}function Jr(n){let t,e,l,s;return{c(){t=S("button"),e=S("div"),l=S("img"),this.h()},l(o){t=I(o,"BUTTON",{class:!0,"aria-label":!0});var r=E(t);e=I(r,"DIV",{class:!0});var i=E(e);l=I(i,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),i.forEach(m),r.forEach(m),this.h()},h(){ke(l.src,s=n[10].profile_image_url)||f(l,"src",s),f(l,"class","size-6 object-cover rounded-full"),f(l,"alt","User profile"),f(l,"draggable","false"),f(e,"class","self-center"),f(t,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-100 dark:hover:bg-gray-850 transition"),f(t,"aria-label","User Menu")},m(o,r){H(o,t,r),v(t,e),v(e,l)},p(o,r){r&1024&&!ke(l.src,s=o[10].profile_image_url)&&f(l,"src",s)},d(o){o&&m(t)}}}function Qr(n){let t,e,l,s,o,r,i,a,u,c,d,k,_,p,g,h,w,y,V,N,D;function T(Z){n[13](Z)}let B={chatId:n[7]};n[5]!==void 0&&(B.show=n[5]),t=new Gn({props:B}),vt.push(()=>Lt(t,"show",T)),c=new $n({});let C=n[4]&&jl(n),$=n[2]&&n[3]&&n[3].id&&zl(n);w=new he({props:{content:n[9].t("New Chat"),$$slots:{default:[Gr]},$$scope:{ctx:n}}});let L=n[10]!==void 0&&Fl(n);return{c(){at(t.$$.fragment),l=J(),s=S("nav"),o=S("div"),r=S("div"),i=S("div"),a=S("button"),u=S("div"),at(c.$$.fragment),k=J(),_=S("div"),C&&C.c(),p=J(),g=S("div"),$&&$.c(),h=J(),at(w.$$.fragment),y=J(),L&&L.c(),this.h()},l(Z){ct(t.$$.fragment,Z),l=Q(Z),s=I(Z,"NAV",{id:!0,class:!0});var P=E(s);o=I(P,"DIV",{class:!0});var A=E(o);r=I(A,"DIV",{class:!0});var et=E(r);i=I(et,"DIV",{class:!0});var wt=E(i);a=I(wt,"BUTTON",{id:!0,class:!0});var kt=E(a);u=I(kt,"DIV",{class:!0});var Zt=E(u);ct(c.$$.fragment,Zt),Zt.forEach(m),kt.forEach(m),wt.forEach(m),k=Q(et),_=I(et,"DIV",{class:!0});var jt=E(_);C&&C.l(jt),jt.forEach(m),p=Q(et),g=I(et,"DIV",{class:!0});var Ot=E(g);$&&$.l(Ot),h=Q(Ot),ct(w.$$.fragment,Ot),y=Q(Ot),L&&L.l(Ot),Ot.forEach(m),et.forEach(m),A.forEach(m),P.forEach(m),this.h()},h(){f(u,"class","m-auto self-center"),f(a,"id","sidebar-toggle-button"),f(a,"class","cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition"),f(i,"class",d=(n[8]?"md:hidden":"")+" mr-3 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),f(_,"class","flex-1 overflow-hidden max-w-full"),f(g,"class","self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),f(r,"class","flex items-center w-full max-w-full"),f(o,"class","flex max-w-full w-full mx-auto px-5 pt-0.5 md:px-[1rem]"),f(s,"id","nav"),f(s,"class","sticky py-2.5 top-0 flex flex-row justify-center z-30")},m(Z,P){ut(t,Z,P),H(Z,l,P),H(Z,s,P),v(s,o),v(o,r),v(r,i),v(i,a),v(a,u),ut(c,u,null),v(r,k),v(r,_),C&&C.m(_,null),v(r,p),v(r,g),$&&$.m(g,null),v(g,h),ut(w,g,null),v(g,y),L&&L.m(g,null),V=!0,N||(D=tt(a,"click",n[14]),N=!0)},p(Z,[P]){const A={};P&128&&(A.chatId=Z[7]),!e&&P&32&&(e=!0,A.show=Z[5],At(()=>e=!1)),t.$set(A),(!V||P&256&&d!==(d=(Z[8]?"md:hidden":"")+" mr-3 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"))&&f(i,"class",d),Z[4]?C?(C.p(Z,P),P&16&&O(C,1)):(C=jl(Z),C.c(),O(C,1),C.m(_,null)):C&&(qt(),U(C,1,1,()=>{C=null}),Wt()),Z[2]&&Z[3]&&Z[3].id?$?($.p(Z,P),P&12&&O($,1)):($=zl(Z),$.c(),O($,1),$.m(g,h)):$&&(qt(),U($,1,1,()=>{$=null}),Wt());const et={};P&512&&(et.content=Z[9].t("New Chat")),P&2097410&&(et.$$scope={dirty:P,ctx:Z}),w.$set(et),Z[10]!==void 0?L?(L.p(Z,P),P&1024&&O(L,1)):(L=Fl(Z),L.c(),O(L,1),L.m(g,null)):L&&(qt(),U(L,1,1,()=>{L=null}),Wt())},i(Z){V||(O(t.$$.fragment,Z),O(c.$$.fragment,Z),O(C),O($),O(w.$$.fragment,Z),O(L),V=!0)},o(Z){U(t.$$.fragment,Z),U(c.$$.fragment,Z),U(C),U($),U(w.$$.fragment,Z),U(L),V=!1},d(Z){Z&&(m(l),m(s)),ft(t,Z),ft(c),C&&C.d(),$&&$.d(),ft(w),L&&L.d(),N=!1,D()}}}function Yr(n,t,e){let l,s,o,r,i;it(n,nn,C=>e(20,l=C)),it(n,we,C=>e(7,s=C)),it(n,Ae,C=>e(8,o=C)),it(n,sn,C=>e(10,i=C));const a=fe("i18n");it(n,a,C=>e(9,r=C));let{initNewChat:u}=t,{title:c=l}=t,{shareEnabled:d=!1}=t,{chat:k}=t,{selectedModels:_}=t,{showModelSelector:p=!0}=t,g=!1,h=!1;function w(C){g=C,e(5,g)}const y=()=>{Ae.set(!o)};function V(C){_=C,e(0,_)}const N=()=>{e(5,g=!g)},D=()=>{e(6,h=!h)},T=()=>{u()},B=C=>{C.detail==="archived-chat"&&kn.set(!0)};return n.$$set=C=>{"initNewChat"in C&&e(1,u=C.initNewChat),"title"in C&&e(12,c=C.title),"shareEnabled"in C&&e(2,d=C.shareEnabled),"chat"in C&&e(3,k=C.chat),"selectedModels"in C&&e(0,_=C.selectedModels),"showModelSelector"in C&&e(4,p=C.showModelSelector)},[_,u,d,k,p,g,h,s,o,r,i,a,c,w,y,V,N,D,T,B]}class Xr extends Yt{constructor(t){super(),Xt(this,t,Yr,Qr,Qt,{initNewChat:1,title:12,shareEnabled:2,chat:3,selectedModels:0,showModelSelector:4})}}function Kr(n){let t,e,l,s,o,r,i;return a(),{feed:u,reset:a};function a(){t=!0,e="",l=0,s=-1,o=void 0,r=void 0,i=""}function u(d){e=e?e+d:d,t&&xr(e)&&(e=e.slice(un.length)),t=!1;const k=e.length;let _=0,p=!1;for(;_<k;){p&&(e[_]===`
`&&++_,p=!1);let g=-1,h=s,w;for(let y=l;g<0&&y<k;++y)w=e[y],w===":"&&h<0?h=y-_:w==="\r"?(p=!0,g=y-_):w===`
`&&(g=y-_);if(g<0){l=k-_,s=h;break}else l=0,s=-1;c(e,_,h,g),_+=g+1}_===k?e="":_>0&&(e=e.slice(_))}function c(d,k,_,p){if(p===0){i.length>0&&(n({type:"event",id:o,event:r||void 0,data:i.slice(0,-1)}),i="",o=void 0),r=void 0;return}const g=_<0,h=d.slice(k,k+(g?p:_));let w=0;g?w=p:d[k+_+1]===" "?w=_+2:w=_+1;const y=k+w,V=p-w,N=d.slice(y,y+V).toString();if(h==="data")i+=N?"".concat(N,`
`):`
`;else if(h==="event")r=N;else if(h==="id"&&!N.includes("\0"))o=N;else if(h==="retry"){const D=parseInt(N,10);Number.isNaN(D)||n({type:"reconnect-interval",value:D})}}}const un=[239,187,191];function xr(n){return un.every((t,e)=>n.charCodeAt(e)===t)}class $r extends TransformStream{constructor(){let t;super({start(e){t=Kr(l=>{l.type==="event"&&e.enqueue(l)})},transform(e){t.feed(e)}})}}async function to(n,t){const e=n.pipeThrough(new TextDecoderStream).pipeThrough(new $r).getReader();let l=eo(e);return t&&(l=lo(l)),l}async function*eo(n){var t,e,l;for(;;){const{value:s,done:o}=await n.read();if(o){yield{done:!0,value:""};break}if(!s)continue;const r=s.data;if(r.startsWith("[DONE]")){yield{done:!0,value:""};break}try{const i=JSON.parse(r);if(console.log(i),i.error){yield{done:!0,value:"",error:i.error};break}if(i.citations){yield{done:!1,value:"",citations:i.citations};continue}yield{done:!1,value:((l=(e=(t=i.choices)==null?void 0:t[0])==null?void 0:e.delta)==null?void 0:l.content)??"",usage:i.usage}}catch(i){console.error("Error extracting delta from SSE event:",i)}}}async function*lo(n){for await(const t of n){if(t.done){yield t;return}if(t.citations){yield t;continue}let e=t.value;if(e.length<5){yield{done:!1,value:e};continue}for(;e!="";){const l=Math.min(Math.floor(Math.random()*3)+1,e.length);yield{done:!1,value:e.slice(0,l)},(document==null?void 0:document.visibilityState)!=="hidden"&&await no(5),e=e.slice(l)}}}const no=n=>new Promise(t=>setTimeout(t,n));function ql(n){let t,e=n[2]&&Wl(n);return{c(){e&&e.c(),t=Pt()},l(l){e&&e.l(l),t=Pt()},m(l,s){e&&e.m(l,s),H(l,t,s)},p(l,s){l[2]?e?(e.p(l,s),s&4&&O(e,1)):(e=Wl(l),e.c(),O(e,1),e.m(t.parentNode,t)):e&&(qt(),U(e,1,1,()=>{e=null}),Wt())},d(l){l&&m(t),e&&e.d(l)}}}function Wl(n){let t,e,l,s,o=n[1].type+"",r,i,a,u,c,d=n[1].content+"",k,_,p,g,h,w,y=n[1].url&&Zl(),V=n[1].url&&Gl(),N=n[1].dismissible&&Jl(n);return{c(){t=S("div"),e=S("div"),l=S("div"),s=S("div"),r=mt(o),a=J(),y&&y.c(),u=J(),c=S("div"),k=mt(d),_=J(),V&&V.c(),p=J(),g=S("div"),N&&N.c(),this.h()},l(D){t=I(D,"DIV",{class:!0});var T=E(t);e=I(T,"DIV",{class:!0});var B=E(e);l=I(B,"DIV",{class:!0});var C=E(l);s=I(C,"DIV",{class:!0});var $=E(s);r=ht($,o),$.forEach(m),a=Q(C),y&&y.l(C),C.forEach(m),u=Q(B),c=I(B,"DIV",{class:!0});var L=E(c);k=ht(L,d),L.forEach(m),B.forEach(m),_=Q(T),V&&V.l(T),p=Q(T),g=I(T,"DIV",{class:!0});var Z=E(g);N&&N.l(Z),Z.forEach(m),T.forEach(m),this.h()},h(){f(s,"class",i="text-xs font-black "+(n[3][n[1].type]??n[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"),f(l,"class","flex justify-between self-start"),f(c,"class","flex-1 text-xs text-gray-700 dark:text-white"),f(e,"class","flex flex-col md:flex-row md:items-center flex-1 text-sm w-fit gap-1.5"),f(g,"class","flex self-start"),f(t,"class","top-0 left-0 right-0 p-2 mx-4 px-3 flex justify-center items-center relative rounded-xl border border-gray-50 dark:border-gray-850 text-gray-800 dark:text-gary-100 bg-white dark:bg-gray-900 backdrop-blur-xl z-30")},m(D,T){H(D,t,T),v(t,e),v(e,l),v(l,s),v(s,r),v(l,a),y&&y.m(l,null),v(e,u),v(e,c),v(c,k),v(t,_),V&&V.m(t,null),v(t,p),v(t,g),N&&N.m(g,null),w=!0},p(D,T){(!w||T&2)&&o!==(o=D[1].type+"")&&St(r,o),(!w||T&2&&i!==(i="text-xs font-black "+(D[3][D[1].type]??D[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"))&&f(s,"class",i),D[1].url?y||(y=Zl(),y.c(),y.m(l,null)):y&&(y.d(1),y=null),(!w||T&2)&&d!==(d=D[1].content+"")&&St(k,d),D[1].url?V||(V=Gl(),V.c(),V.m(t,p)):V&&(V.d(1),V=null),D[1].dismissible?N?N.p(D,T):(N=Jl(D),N.c(),N.m(g,null)):N&&(N.d(1),N=null)},i(D){w||(D&&Pe(()=>{w&&(h||(h=He(t,Ke,{delay:100,duration:300},!0)),h.run(1))}),w=!0)},o(D){D&&(h||(h=He(t,Ke,{delay:100,duration:300},!1)),h.run(0)),w=!1},d(D){D&&m(t),y&&y.d(),V&&V.d(),N&&N.d(),D&&h&&h.end()}}}function Zl(n){let t,e='<a class="text-gray-700 dark:text-white text-xs font-bold underline" href="/assets/files/whitepaper.pdf" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){t=S("div"),t.innerHTML=e,this.h()},l(l){t=I(l,"DIV",{class:!0,"data-svelte-h":!0}),Kt(t)!=="svelte-1ofrdjc"&&(t.innerHTML=e),this.h()},h(){f(t,"class","flex md:hidden group w-fit md:items-center")},m(l,s){H(l,t,s)},d(l){l&&m(t)}}}function Gl(n){let t,e='<a class="text-gray-700 dark:text-white text-xs font-bold underline" href="/" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){t=S("div"),t.innerHTML=e,this.h()},l(l){t=I(l,"DIV",{class:!0,"data-svelte-h":!0}),Kt(t)!=="svelte-15ujvd1"&&(t.innerHTML=e),this.h()},h(){f(t,"class","hidden md:flex group w-fit md:items-center")},m(l,s){H(l,t,s)},d(l){l&&m(t)}}}function Jl(n){let t,e="",l,s;return{c(){t=S("button"),t.textContent=e,this.h()},l(o){t=I(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Kt(t)!=="svelte-17pf3tf"&&(t.textContent=e),this.h()},h(){f(t,"class","-mt-[3px] ml-1.5 mr-1 text-gray-400 dark:hover:text-white h-1")},m(o,r){H(o,t,r),l||(s=tt(t,"click",n[5]),l=!0)},p:Tt,d(o){o&&m(t),l=!1,s()}}}function so(n){let t,e=!n[0]&&ql(n);return{c(){e&&e.c(),t=Pt()},l(l){e&&e.l(l),t=Pt()},m(l,s){e&&e.m(l,s),H(l,t,s)},p(l,[s]){l[0]?e&&(e.d(1),e=null):e?e.p(l,s):(e=ql(l),e.c(),e.m(t.parentNode,t))},i:Tt,o:Tt,d(l){l&&m(t),e&&e.d(l)}}}function ro(n,t,e){const l=We();let{banner:s={id:"",type:"info",title:"",content:"",url:"",dismissable:!0,timestamp:Math.floor(Date.now()/1e3)}}=t,{dismissed:o=!1}=t,r=!1;const i={info:"bg-blue-500/20 text-blue-700 dark:text-blue-200 ",success:"bg-green-500/20 text-green-700 dark:text-green-200",warning:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-200",error:"bg-red-500/20 text-red-700 dark:text-red-200"},a=c=>{e(0,o=!0),l("dismiss",c)};Ze(()=>{e(2,r=!0)});const u=()=>{a(s.id)};return n.$$set=c=>{"banner"in c&&e(1,s=c.banner),"dismissed"in c&&e(0,o=c.dismissed)},[o,s,r,i,a,u]}class oo extends Yt{constructor(t){super(),Xt(this,t,ro,so,Qt,{banner:1,dismissed:0})}}const{document:qe}=gn;function Ql(n,t,e){const l=n.slice();return l[64]=t[e],l}function Yl(n){let t,e,l,s,o,r,i,a,u,c,d,k,_,p,g,h,w,y,V,N,D,T,B,C,$,L;function Z(W){n[25](W)}function P(W){n[26](W)}let A={title:n[10],shareEnabled:n[13].length>0,chat:n[9],initNewChat:n[19]};n[6]!==void 0&&(A.selectedModels=n[6]),n[5]!==void 0&&(A.showModelSelector=n[5]),e=new Xr({props:A}),vt.push(()=>Lt(e,"selectedModels",Z)),vt.push(()=>Lt(e,"showModelSelector",P));let et=n[17].length>0&&n[13].length===0&&!n[14]&&n[6].length<=1&&Xl(n);function wt(W){n[29](W)}function kt(W){n[30](W)}function Zt(W){n[31](W)}function jt(W){n[32](W)}let Ot={chatId:n[14],selectedModels:n[6],processing:ao,bottomPadding:n[12].length>0,sendPrompt:n[21],continueGeneration:n[24],regenerateResponse:n[23]};n[1]!==void 0&&(Ot.history=n[1]),n[13]!==void 0&&(Ot.messages=n[13]),n[3]!==void 0&&(Ot.autoScroll=n[3]),n[11]!==void 0&&(Ot.prompt=n[11]),c=new pn({props:Ot}),vt.push(()=>Lt(c,"history",wt)),vt.push(()=>Lt(c,"messages",kt)),vt.push(()=>Lt(c,"autoScroll",Zt)),vt.push(()=>Lt(c,"prompt",jt));function Ut(W){n[35](W)}function Vt(W){n[36](W)}function Gt(W){n[37](W)}function xt(W){n[38](W)}function Jt(W){n[39](W)}let R={selectedModels:n[6],messages:n[13],submitPrompt:n[20],stopResponse:n[22]};return n[12]!==void 0&&(R.files=n[12]),n[11]!==void 0&&(R.prompt=n[11]),n[3]!==void 0&&(R.autoScroll=n[3]),n[8]!==void 0&&(R.webSearchEnabled=n[8]),n[7]!==void 0&&(R.atSelectedModel=n[7]),w=new Sr({props:R}),vt.push(()=>Lt(w,"files",Ut)),vt.push(()=>Lt(w,"prompt",Vt)),vt.push(()=>Lt(w,"autoScroll",Gt)),vt.push(()=>Lt(w,"webSearchEnabled",xt)),vt.push(()=>Lt(w,"atSelectedModel",Jt)),{c(){t=S("div"),at(e.$$.fragment),o=J(),et&&et.c(),r=J(),i=S("div"),a=S("div"),u=S("div"),at(c.$$.fragment),h=J(),at(w.$$.fragment),this.h()},l(W){t=I(W,"DIV",{class:!0});var nt=E(t);ct(e.$$.fragment,nt),o=Q(nt),et&&et.l(nt),r=Q(nt),i=I(nt,"DIV",{class:!0});var zt=E(i);a=I(zt,"DIV",{class:!0,id:!0});var Ft=E(a);u=I(Ft,"DIV",{class:!0});var dt=E(u);ct(c.$$.fragment,dt),dt.forEach(m),Ft.forEach(m),h=Q(zt),ct(w.$$.fragment,zt),zt.forEach(m),nt.forEach(m),this.h()},h(){f(u,"class",g="h-full w-full flex flex-col "+(n[0]?"py-4":"pt-2 pb-4")),f(a,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 max-w-full"),f(a,"id","messages-container"),f(i,"class","flex flex-col flex-auto"),f(t,"class",B="h-screen max-h-[100dvh] "+(n[16]?"md:max-w-[calc(100%-260px)]":"")+" w-full max-w-full flex flex-col")},m(W,nt){H(W,t,nt),ut(e,t,null),v(t,o),et&&et.m(t,null),v(t,r),v(t,i),v(i,a),v(a,u),ut(c,u,null),n[33](a),v(i,h),ut(w,i,null),C=!0,$||(L=tt(a,"scroll",n[34]),$=!0)},p(W,nt){const zt={};nt[0]&1024&&(zt.title=W[10]),nt[0]&8192&&(zt.shareEnabled=W[13].length>0),nt[0]&512&&(zt.chat=W[9]),!l&&nt[0]&64&&(l=!0,zt.selectedModels=W[6],At(()=>l=!1)),!s&&nt[0]&32&&(s=!0,zt.showModelSelector=W[5],At(()=>s=!1)),e.$set(zt),W[17].length>0&&W[13].length===0&&!W[14]&&W[6].length<=1?et?(et.p(W,nt),nt[0]&155712&&O(et,1)):(et=Xl(W),et.c(),O(et,1),et.m(t,r)):et&&(qt(),U(et,1,1,()=>{et=null}),Wt());const Ft={};nt[0]&16384&&(Ft.chatId=W[14]),nt[0]&64&&(Ft.selectedModels=W[6]),nt[0]&4096&&(Ft.bottomPadding=W[12].length>0),!d&&nt[0]&2&&(d=!0,Ft.history=W[1],At(()=>d=!1)),!k&&nt[0]&8192&&(k=!0,Ft.messages=W[13],At(()=>k=!1)),!_&&nt[0]&8&&(_=!0,Ft.autoScroll=W[3],At(()=>_=!1)),!p&&nt[0]&2048&&(p=!0,Ft.prompt=W[11],At(()=>p=!1)),c.$set(Ft),(!C||nt[0]&1&&g!==(g="h-full w-full flex flex-col "+(W[0]?"py-4":"pt-2 pb-4")))&&f(u,"class",g);const dt={};nt[0]&64&&(dt.selectedModels=W[6]),nt[0]&8192&&(dt.messages=W[13]),!y&&nt[0]&4096&&(y=!0,dt.files=W[12],At(()=>y=!1)),!V&&nt[0]&2048&&(V=!0,dt.prompt=W[11],At(()=>V=!1)),!N&&nt[0]&8&&(N=!0,dt.autoScroll=W[3],At(()=>N=!1)),!D&&nt[0]&256&&(D=!0,dt.webSearchEnabled=W[8],At(()=>D=!1)),!T&&nt[0]&128&&(T=!0,dt.atSelectedModel=W[7],At(()=>T=!1)),w.$set(dt),(!C||nt[0]&65536&&B!==(B="h-screen max-h-[100dvh] "+(W[16]?"md:max-w-[calc(100%-260px)]":"")+" w-full max-w-full flex flex-col"))&&f(t,"class",B)},i(W){C||(O(e.$$.fragment,W),O(et),O(c.$$.fragment,W),O(w.$$.fragment,W),C=!0)},o(W){U(e.$$.fragment,W),U(et),U(c.$$.fragment,W),U(w.$$.fragment,W),C=!1},d(W){W&&m(t),ft(e),et&&et.d(),ft(c),n[33](null),ft(w),$=!1,L()}}}function Xl(n){let t,e,l,s,o=ne(n[17].filter(n[27])),r=[];for(let a=0;a<o.length;a+=1)r[a]=Kl(Ql(n,o,a));const i=a=>U(r[a],1,1,()=>{r[a]=null});return{c(){t=S("div"),e=S("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){t=I(a,"DIV",{class:!0});var u=E(t);e=I(u,"DIV",{class:!0});var c=E(e);for(let d=0;d<r.length;d+=1)r[d].l(c);c.forEach(m),u.forEach(m),this.h()},h(){f(e,"class","flex flex-col gap-1 w-full"),f(t,"class",l="absolute top-[4.25rem] w-full "+(n[16]?"md:max-w-[calc(100%-260px)]":""))},m(a,u){H(a,t,u),v(t,e);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);s=!0},p(a,u){if(u[0]&131072){o=ne(a[17].filter(a[27]));let c;for(c=0;c<o.length;c+=1){const d=Ql(a,o,c);r[c]?(r[c].p(d,u),O(r[c],1)):(r[c]=Kl(d),r[c].c(),O(r[c],1),r[c].m(e,null))}for(qt(),c=o.length;c<r.length;c+=1)i(c);Wt()}(!s||u[0]&65536&&l!==(l="absolute top-[4.25rem] w-full "+(a[16]?"md:max-w-[calc(100%-260px)]":"")))&&f(t,"class",l)},i(a){if(!s){for(let u=0;u<o.length;u+=1)O(r[u]);s=!0}},o(a){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)U(r[u]);s=!1},d(a){a&&m(t),Ee(r,a)}}}function Kl(n){let t,e;return t=new oo({props:{banner:n[64]}}),t.$on("dismiss",n[28]),{c(){at(t.$$.fragment)},l(l){ct(t.$$.fragment,l)},m(l,s){ut(t,l,s),e=!0},p(l,s){const o={};s[0]&131072&&(o.banner=l[64]),t.$set(o)},i(l){e||(O(t.$$.fragment,l),e=!0)},o(l){U(t.$$.fragment,l),e=!1},d(l){ft(t,l)}}}function io(n){let t,e,l,s;qe.title=t=`\r
		`+(n[10]?`${n[10].length>30?`${n[10].slice(0,30)}...`:n[10]} | ${n[15]}`:`${n[15]}`)+`\r
	`;let o=(!n[0]||n[2]&&n[0])&&Yl(n);return{c(){e=J(),o&&o.c(),l=Pt()},l(r){hn("svelte-1123lr8",qe.head).forEach(m),e=Q(r),o&&o.l(r),l=Pt()},m(r,i){H(r,e,i),o&&o.m(r,i),H(r,l,i),s=!0},p(r,i){(!s||i[0]&33792)&&t!==(t=`\r
		`+(r[10]?`${r[10].length>30?`${r[10].slice(0,30)}...`:r[10]} | ${r[15]}`:`${r[15]}`)+`\r
	`)&&(qe.title=t),!r[0]||r[2]&&r[0]?o?(o.p(r,i),i[0]&5&&O(o,1)):(o=Yl(r),o.c(),O(o,1),o.m(l.parentNode,l)):o&&(qt(),U(o,1,1,()=>{o=null}),Wt())},i(r){s||(O(o),s=!0)},o(r){U(o),s=!1},d(r){r&&(m(e),m(l)),o&&o.d(r)}}}let ao="";function co(n,t,e){let l,s,o,r,i,a,u,c,d,k,_;it(n,we,M=>e(14,l=M)),it(n,ue,M=>e(42,s=M)),it(n,Ue,M=>e(43,o=M)),it(n,sn,M=>e(45,i=M)),it(n,yn,M=>e(46,a=M)),it(n,bn,M=>e(47,u=M)),it(n,en,M=>e(48,c=M)),it(n,nn,M=>e(15,d=M)),it(n,Ae,M=>e(16,k=M)),it(n,En,M=>e(17,_=M));const p=fe("i18n");it(n,p,M=>e(44,r=M));let{chatIdProp:g=""}=t,h=!1,w=!1,y=!0,V,N=!0,D=[""],T,B=!1,C=null,$="",L="",Z=[],P=[],A={messages:{},currentId:null};Ze(async()=>{l?(s.saveChatHistory??!0)||await Re("/"):await et()});const et=async()=>{var X;window.history.replaceState(A.state,"","/"),await we.set(""),e(3,y=!0),e(10,$=""),e(13,P=[]),e(1,A={messages:{},currentId:null}),u.url.searchParams.get("models")?e(6,D=(X=u.url.searchParams.get("models"))==null?void 0:X.split(",")):s!=null&&s.models?e(6,D=s==null?void 0:s.models):c!=null&&c.default_models?(console.log((c==null?void 0:c.default_models.split(","))??""),e(6,D=c==null?void 0:c.default_models.split(","))):e(6,D=[""]),u.url.searchParams.get("q")&&(e(11,L=u.url.searchParams.get("q")??""),L&&(await Dt(),Ut(L))),e(6,D=D.map(z=>o.map(j=>j.id).includes(z)?z:""));const M=await ol(localStorage.token);M?ue.set(M.ui):ue.set(JSON.parse(localStorage.getItem("settings")??"{}"));const q=document.getElementById("chat-textarea");setTimeout(()=>q==null?void 0:q.focus(),0)},wt=async()=>{if(we.set(g),e(9,C=await Nn(localStorage.token,l).catch(async M=>(await Re("/"),null))),C){await ge();const M=C.chat;if(M){console.log(M),e(6,D=((M==null?void 0:M.models)??void 0)!==void 0?M.models:[M.models??""]),e(1,A=((M==null?void 0:M.history)??void 0)!==void 0?M.history:In(M.messages)),e(10,$=M.title);const q=await ol(localStorage.token);return q?await ue.set(q.ui):await ue.set(JSON.parse(localStorage.getItem("settings")??"{}")),await ue.set({...s,system:M.system??s.system,params:M.options??s.params}),e(3,y=!0),await Dt(),P.length>0&&e(1,A.messages[P.at(-1).id].done=!0,A),await Dt(),!0}else return null}},kt=async()=>{await Dt(),V&&e(4,V.scrollTop=V.scrollHeight,V)},Zt=M=>{const q=A.messages[M];return q.parentId?[...Zt(q.parentId),q]:[q]},jt=async(M,q)=>{await _n.run({querySelector:".mermaid"});const X=await ts(localStorage.token,{model:M,messages:q.map(z=>({id:z.id,role:z.role,content:z.content,timestamp:z.timestamp})),chat_id:l}).catch(z=>(console.error(z),null));if(X!==null)for(const z of X.messages)e(1,A.messages[z.id]={...A.messages[z.id],...A.messages[z.id].content!==z.content?{originalContent:A.messages[z.id].content}:{},...z},A)},Ot=async(M,q="")=>setInterval(()=>{a==null||a.emit("usage",{action:"chat",model:M,chat_id:q})},1e3),Ut=async(M,q=null)=>{if(console.log("submitPrompt",l),e(6,D=D.map(X=>o.map(z=>z.id).includes(X)?X:"")),D.includes(""))bt.error(r.t("Model not selected"));else if(P.length!=0&&P.at(-1).done!=!0)console.log("wait");else if(Z.length>0&&Z.filter(X=>X.upload_status===!1).length>0)bt.error(r.t("Oops! Hold tight! Your files are still in the processing oven. We're cooking them up to perfection. Please be patient and we'll let you know once they're ready."));else{document.getElementById("chat-textarea").style.height="";let X=nl(),z={id:X,parentId:P.length!==0?P.at(-1).id:null,childrenIds:[],role:"user",user:q??void 0,content:M,files:Z.length>0?Z:void 0,timestamp:Math.floor(Date.now()/1e3),models:D.filter((j,K)=>D.indexOf(j)===K)};e(1,A.messages[X]=z,A),e(1,A.currentId=X,A),P.length!==0&&A.messages[P.at(-1).id].childrenIds.push(X),await Dt(),P.length==1&&(s.saveChatHistory??!0?(e(9,C=await Bn(localStorage.token,{id:l,title:r.t("New Chat"),models:D,system:s.system??void 0,options:{...s.params??{}},messages:P,history:A,tags:[],timestamp:Date.now()})),await Ve.set(await Be(localStorage.token)),await we.set(C.id)):await we.set("local"),await Dt()),e(11,L=""),document.getElementById("chat-textarea").style.height="",e(12,Z=[]),await Vt(M,X)}},Vt=async(M,q,X=null)=>{const z=JSON.parse(JSON.stringify(l));await Promise.all((X?[X]:T!==void 0?[T.id]:D).map(async j=>{var yt,Ct,Et;console.log("modelId",j);const K=o.filter(b=>b.id===j).at(0);if(K){P.some(x=>{var It;return(It=x.files)==null?void 0:It.some(Mt=>Mt.type==="image")})&&!(((Et=(Ct=(yt=K.info)==null?void 0:yt.meta)==null?void 0:Ct.capabilities)==null?void 0:Et.vision)??!0)&&bt.error(r.t("Model {{modelName}} is not vision capable",{modelName:K.name??K.id}));let Y=nl(),lt={parentId:q,id:Y,childrenIds:[],role:"assistant",content:"",model:K.id,modelName:K.name??K.id,userContext:null,timestamp:Math.floor(Date.now()/1e3)};e(1,A.messages[Y]=lt,A),e(1,A.currentId=Y,A),q!==null&&e(1,A.messages[q].childrenIds=[...A.messages[q].childrenIds,Y],A),await Dt();let G=null;if(((s==null?void 0:s.memory)??!1)&&G===null){const x=await Qn(localStorage.token,M).catch(It=>(bt.error(It),null));x&&(x.documents[0].length>0&&(G=x.documents.reduce((It,Mt,Ht)=>{const rt=x.metadatas[Ht][0].created_at,_t=new Date(rt*1e3).toISOString().split("T")[0];return It.push(`${Ht+1}. [${_t}]. ${Mt[0]}`),It},[])),console.log(G))}lt.userContext=G;const ot=await Ot(K.id,z);B&&await Gt(K.id,q,Y),(K==null?void 0:K.owned_by)==="openai"?await Jt(K,M,Y,z):K&&await xt(K,M,Y,z),console.log("chatEventEmitter",ot),ot&&clearInterval(ot)}else bt.error(r.t("Model {{modelId}} not found",{modelId:j}))})),await Ve.set(await Be(localStorage.token))},Gt=async(M,q,X)=>{const z=A.messages[X];z.status={done:!1,action:"web_search",description:r.t("Generating search query")},e(13,P),e(1,A);const j=A.messages[q].content;let K=j;if(j.length>100&&(K=await dt(M,j),!K)){bt.warning(r.t("No search query generated")),z.status={...z.status,done:!0,error:!0,description:"No search query generated"},e(13,P),e(1,A);return}z.status={...z.status,description:r.t("Searching the web for '{{searchQuery}}'",{searchQuery:K})},e(13,P),e(1,A);const yt=await Un(localStorage.token,K).catch(Ct=>(console.log(Ct),bt.error(Ct),null));yt?(z.status={...z.status,done:!0,description:r.t("Searched {{count}} sites",{count:yt.filenames.length}),urls:yt.filenames},((z==null?void 0:z.files)??!0)&&(z.files=[]),z.files.push({collection_name:yt.collection_name,name:K,type:"web_search_results",urls:yt.filenames}),e(13,P),e(1,A)):(z.status={...z.status,done:!0,error:!0,description:"No search results found"},e(13,P),e(1,A))},xt=async(M,q,X,z)=>{var Y,lt,G,ot;M=M.id;const j=A.messages[X];await Dt(),kt();const K=[s.system||((j==null?void 0:j.userContext)??null)?{role:"system",content:`${sl((s==null?void 0:s.system)??"",i.name)}${(j==null?void 0:j.userContext)??null?`

User Context:
${((j==null?void 0:j.userContext)??[]).join(`
`)}`:""}`}:void 0,...P].filter(x=>{var It;return(It=x==null?void 0:x.content)==null?void 0:It.trim()}).map((x,It,Mt)=>{var _t;const Ht={role:x.role,content:x.content},rt=(_t=x.files)==null?void 0:_t.filter($t=>$t.type==="image").map($t=>$t.url.slice($t.url.indexOf(",")+1));return rt&&rt.length>0&&x.role==="user"&&(Ht.images=rt),Ht});let yt=-1;K.forEach((x,It)=>{x.images&&(yt=It)}),K.forEach((x,It)=>{It!==yt&&delete x.images});const Ct=P.filter(x=>(x==null?void 0:x.files)??null).map(x=>x.files.filter(It=>["doc","collection","web_search_results"].includes(It.type))).flat(1),[Et,b]=await Mn(localStorage.token,{model:M,messages:K,options:{...s.params??{},stop:((Y=s==null?void 0:s.params)==null?void 0:Y.stop)??void 0?s.params.stop.map(x=>decodeURIComponent(JSON.parse('"'+x.replace(/\"/g,'\\"')+'"'))):void 0,num_predict:((lt=s==null?void 0:s.params)==null?void 0:lt.max_tokens)??void 0,repeat_penalty:((G=s==null?void 0:s.params)==null?void 0:G.frequency_penalty)??void 0},format:s.requestFormat??void 0,keep_alive:s.keepAlive??void 0,docs:Ct.length>0?Ct:void 0,citations:Ct.length>0,chat_id:l});if(Et&&Et.ok){console.log("controller",b);const x=Et.body.pipeThrough(new TextDecoderStream).pipeThrough(Sn(`
`)).getReader();for(;;){const{value:It,done:Mt}=await x.read();if(Mt||w||z!==l){if(j.done=!0,e(13,P),e(1,A),w)b.abort("User: Stop Response");else{const Ht=Zt(X);await jt(M,Ht)}break}try{let Ht=It.split(`
`);for(const rt of Ht)if(rt!==""){console.log(rt);let _t=JSON.parse(rt);if("citations"in _t){j.citations=_t.citations;continue}if("detail"in _t)throw _t;if(_t.done==!1){if(j.content==""&&_t.message.content==`
`)continue;j.content+=_t.message.content,e(13,P),e(1,A)}else{if(j.done=!0,j.content==""&&(j.error={code:400,content:"Oops! No text generated from Ollama, Please try again."}),j.context=_t.context??null,j.info={total_duration:_t.total_duration,load_duration:_t.load_duration,sample_count:_t.sample_count,sample_duration:_t.sample_duration,prompt_eval_count:_t.prompt_eval_count,prompt_eval_duration:_t.prompt_eval_duration,eval_count:_t.eval_count,eval_duration:_t.eval_duration},e(13,P),e(1,A),s.notificationEnabled&&!document.hasFocus()){const $t=new Notification(selectedModelfile?`${selectedModelfile.title.charAt(0).toUpperCase()+selectedModelfile.title.slice(1)}`:`${M}`,{body:j.content,icon:(selectedModelfile==null?void 0:selectedModelfile.imageUrl)??`${Le}/static/favicon.png`})}s.responseAutoCopy&&rl(j.content),s.responseAutoPlayback&&(await Dt(),(ot=document.getElementById(`speak-button-${j.id}`))==null||ot.click())}}}catch(Ht){console.log(Ht),"detail"in Ht&&bt.error(Ht.detail);break}y&&kt()}l==z&&(s.saveChatHistory??!0)&&(e(9,C=await Fe(localStorage.token,z,{messages:P,history:A,models:D})),await Ve.set(await Be(localStorage.token)))}else{if(Et!==null){const x=await Et.json();console.log(x),"detail"in x?(bt.error(x.detail),j.error={content:x.detail}):(bt.error(x.error),j.error={content:x.error})}else bt.error(r.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:"Ollama"})),j.error={content:r.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:"Ollama"})};j.done=!0,e(13,P),e(1,A)}if(w=!1,await Dt(),y&&kt(),P.length==2&&P.at(1).content!==""){window.history.replaceState(A.state,"",`/c/${z}`);const x=await Ft(q);await Rt(z,x)}},Jt=async(M,q,X,z)=>{var yt,Ct,Et,b,Y,lt,G,ot,x,It;const j=A.messages[X],K=P.filter(Mt=>(Mt==null?void 0:Mt.files)??null).map(Mt=>Mt.files.filter(Ht=>["doc","collection","web_search_results"].includes(Ht.type))).flat(1);console.log(K),kt();try{const[Mt,Ht]=await Dn(localStorage.token,{model:M.id,stream:!0,stream_options:((Et=(Ct=(yt=M.info)==null?void 0:yt.meta)==null?void 0:Ct.capabilities)==null?void 0:Et.usage)??!1?{include_usage:!0}:void 0,messages:[s.system||((j==null?void 0:j.userContext)??null)?{role:"system",content:`${sl((s==null?void 0:s.system)??"",i.name)}${(j==null?void 0:j.userContext)??null?`

User Context:
${((j==null?void 0:j.userContext)??[]).join(`
`)}`:""}`}:void 0,...P].filter(rt=>{var _t;return(_t=rt==null?void 0:rt.content)==null?void 0:_t.trim()}).map((rt,_t,$t)=>{var Te;return{role:rt.role,...((Te=rt.files)==null?void 0:Te.filter(me=>me.type==="image").length)>0&&rt.role==="user"?{content:[{type:"text",text:$t.length-1!==_t?rt.content:(rt==null?void 0:rt.raContent)??rt.content},...rt.files.filter(me=>me.type==="image").map(me=>({type:"image_url",image_url:{url:me.url}}))]}:{content:$t.length-1!==_t?rt.content:(rt==null?void 0:rt.raContent)??rt.content}}}),seed:((b=s==null?void 0:s.params)==null?void 0:b.seed)??void 0,stop:((Y=s==null?void 0:s.params)==null?void 0:Y.stop)??void 0?s.params.stop.map(rt=>decodeURIComponent(JSON.parse('"'+rt.replace(/\"/g,'\\"')+'"'))):void 0,temperature:((lt=s==null?void 0:s.params)==null?void 0:lt.temperature)??void 0,top_p:((G=s==null?void 0:s.params)==null?void 0:G.top_p)??void 0,frequency_penalty:((ot=s==null?void 0:s.params)==null?void 0:ot.frequency_penalty)??void 0,max_tokens:((x=s==null?void 0:s.params)==null?void 0:x.max_tokens)??void 0,docs:K.length>0?K:void 0,citations:K.length>0,chat_id:l},`${je}`);if(await Dt(),kt(),Mt&&Mt.ok&&Mt.body){const rt=await to(Mt.body,s.splitLargeChunks);let _t=null;for await(const $t of rt){const{value:Te,done:me,citations:Je,error:Qe,usage:Ye}=$t;if(Qe){await R(Qe,null,M,j);break}if(me||w||z!==l){if(j.done=!0,e(13,P),e(1,A),w)Ht.abort("User: Stop Response");else{const fn=Zt(X);await jt(M.id,fn)}break}if(Ye&&(_t=Ye),Je){j.citations=Je;continue}j.content==""&&Te==`
`||(j.content+=Te,e(13,P),e(1,A),y&&kt())}if(s.notificationEnabled&&!document.hasFocus()){const $t=new Notification(`OpenAI ${M}`,{body:j.content,icon:`${Le}/static/favicon.png`})}s.responseAutoCopy&&rl(j.content),s.responseAutoPlayback&&(await Dt(),(It=document.getElementById(`speak-button-${j.id}`))==null||It.click()),_t&&(j.info={..._t,openai:!0}),l==z&&(s.saveChatHistory??!0)&&(e(9,C=await Fe(localStorage.token,z,{models:D,messages:P,history:A})),await Ve.set(await Be(localStorage.token)))}else await R(null,Mt,M,j)}catch(Mt){await R(Mt,null,M,j)}if(e(13,P),e(1,A),w=!1,await Dt(),y&&kt(),P.length==2){window.history.replaceState(A.state,"",`/c/${z}`);const Mt=await Ft(q);await Rt(z,Mt)}},R=async(M,q,X,z)=>{let j="",K;M?K=M:q!==null&&(K=await q.json()),console.error(K),"detail"in K?(bt.error(K.detail),j=K.detail):"error"in K?"message"in K.error?(bt.error(K.error.message),j=K.error.message):(bt.error(K.error),j=K.error):"message"in K&&(bt.error(K.message),j=K.message),z.error={content:r.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:X.name??X.id})+`
`+j},z.done=!0,e(13,P),e(1,A)},W=()=>{w=!0,console.log("stopResponse")},nt=async M=>{if(console.log("regenerateResponse"),P.length!=0){let q=A.messages[M.parentId],X=q.content;((q==null?void 0:q.models)??[...D]).length==1?await Vt(X,q.id):await Vt(X,q.id,M.model)}},zt=async()=>{console.log("continueGeneration");const M=JSON.parse(JSON.stringify(l));if(P.length!=0&&P.at(-1).done==!0){const q=A.messages[A.currentId];q.done=!1,await Dt();const X=o.filter(z=>z.id===q.model).at(0);X&&((X==null?void 0:X.owned_by)==="openai"?await Jt(X,A.messages[q.parentId].content,q.id,M):await xt(X,A.messages[q.parentId].content,q.id,M))}else bt.error(r.t("Model {{modelId}} not found",{modelId}))},Ft=async M=>{var q,X,z,j;if(((q=s==null?void 0:s.title)==null?void 0:q.auto)??!0){const K=o.find(b=>b.id===D[0]),yt=(K==null?void 0:K.owned_by)==="openai"?((X=s==null?void 0:s.title)==null?void 0:X.modelExternal)??D[0]:((z=s==null?void 0:s.title)==null?void 0:z.model)??D[0],Ct=o.find(b=>b.id===yt);return console.log(Ct),await Cn(localStorage.token,((j=s==null?void 0:s.title)==null?void 0:j.prompt)??r.t("Create a concise, 3-5 word phrase as a header for the following query, strictly adhering to the 3-5 word limit and avoiding the use of the word 'title':")+" {{prompt}}",yt,M,l,(Ct==null?void 0:Ct.owned_by)==="openai"?`${je}`:`${tl}/v1`)}else return`${M}`},dt=async(M,q)=>{var yt,Ct;const X=o.find(Et=>Et.id===M),z=(X==null?void 0:X.owned_by)==="openai"?((yt=s==null?void 0:s.title)==null?void 0:yt.modelExternal)??M:((Ct=s==null?void 0:s.title)==null?void 0:Ct.model)??M,j=o.find(Et=>Et.id===z),K=P.filter(Et=>Et.role==="user").map(Et=>Et.content);return await Tn(localStorage.token,z,K,q,(j==null?void 0:j.owned_by)==="openai"?`${je}`:`${tl}/v1`)},Rt=async(M,q)=>{M===l&&e(10,$=q),(s.saveChatHistory??!0)&&(e(9,C=await Fe(localStorage.token,M,{title:q})),await Ve.set(await Be(localStorage.token)))},ge=async()=>await On(localStorage.token,l).catch(async M=>[]);function te(M){D=M,e(6,D)}function pe(M){N=M,e(5,N)}const Ie=M=>M.dismissible?!JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]").includes(M.id):!0,Me=M=>{const q=M.detail;localStorage.setItem("dismissedBannerIds",JSON.stringify([q,...JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]")].filter(X=>_.find(z=>z.id===X))))};function De(M){A=M,e(1,A)}function de(M){P=M,e(13,P),e(1,A)}function Bt(M){y=M,e(3,y)}function Nt(M){L=M,e(11,L)}function Ce(M){vt[M?"unshift":"push"](()=>{V=M,e(4,V)})}const _e=M=>{e(3,y=V.scrollHeight-V.scrollTop<=V.clientHeight+5)};function be(M){Z=M,e(12,Z)}function ee(M){L=M,e(11,L)}function ve(M){y=M,e(3,y)}function F(M){B=M,e(8,B)}function st(M){T=M,e(7,T)}return n.$$set=M=>{"chatIdProp"in M&&e(0,g=M.chatIdProp)},n.$$.update=()=>{if(n.$$.dirty[0]&2)if(A.currentId!==null){let M=[],q=A.messages[A.currentId];for(;q!==null;)M.unshift({...q}),q=q.parentId!==null?A.messages[q.parentId]:null;e(13,P=M)}else e(13,P=[]);n.$$.dirty[0]&1&&g&&(async()=>{if(await wt()){await Dt(),e(2,h=!0),window.setTimeout(()=>kt(),0);const M=document.getElementById("chat-textarea");M==null||M.focus()}else await Re("/")})()},[g,A,h,y,V,N,D,T,B,C,$,L,Z,P,l,d,k,_,p,et,Ut,Vt,W,nt,zt,te,pe,Ie,Me,De,de,Bt,Nt,Ce,_e,be,ee,ve,F,st]}class Fo extends Yt{constructor(t){super(),Xt(this,t,co,io,Qt,{chatIdProp:0},null,[-1,-1,-1])}}export{Fo as C};
//# sourceMappingURL=Chat.9037dda9.js.map
