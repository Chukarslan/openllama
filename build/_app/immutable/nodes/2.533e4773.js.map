{"version":3,"file":"2.533e4773.js","sources":["../../../../../../node_modules/idb/build/wrap-idb-value.js","../../../../../../node_modules/idb/build/index.js","../../../../../../src/lib/components/chat/Settings/Account.svelte","../../../../../../src/lib/components/chat/Settings/About.svelte","../../../../../../src/lib/components/chat/Settings/Models.svelte","../../../../../../src/lib/components/chat/Settings/General.svelte","../../../../../../src/lib/components/chat/Settings/Interface.svelte","../../../../../../src/lib/components/chat/Settings/Audio.svelte","../../../../../../src/lib/components/chat/Settings/Chats.svelte","../../../../../../src/lib/components/chat/Settings/Connections.svelte","../../../../../../src/lib/components/chat/Settings/Images.svelte","../../../../../../src/lib/components/icons/User.svelte","../../../../../../src/lib/components/chat/Settings/Personalization/AddMemoryModal.svelte","../../../../../../src/lib/components/chat/Settings/Personalization/ManageModal.svelte","../../../../../../src/lib/components/chat/Settings/Personalization.svelte","../../../../../../src/lib/components/chat/SettingsModal.svelte","../../../../../../src/lib/components/icons/Pencil.svelte","../../../../../../src/lib/components/layout/Sidebar/ChatMenu.svelte","../../../../../../src/lib/components/layout/Sidebar/ArchivedChatsModal.svelte","../../../../../../src/lib/components/layout/Sidebar.svelte","../../../../../../src/lib/components/chat/ShortcutsModal.svelte","../../../../../../node_modules/svelte-confetti/dist/Confetti.svelte","../../../../../../src/lib/components/ChangelogModal.svelte","../../../../../../src/lib/components/icons/QuestionMarkCircle.svelte","../../../../../../src/lib/components/icons/Keyboard.svelte","../../../../../../src/lib/components/layout/Help/HelpMenu.svelte","../../../../../../src/lib/components/layout/Help.svelte","../../../../../../src/lib/components/layout/Overlay/AccountPending.svelte","../../../../../../src/routes/(app)/+layout.svelte"],"sourcesContent":["const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { onMount, getContext } from 'svelte';\r\n\r\n\timport { user } from '$lib/stores';\r\n\timport { updateUserProfile, createAPIKey, getAPIKey } from '$lib/apis/auths';\r\n\r\n\timport UpdatePassword from './Account/UpdatePassword.svelte';\r\n\timport { getGravatarUrl } from '$lib/apis/utils';\r\n\timport { generateInitialsImage, canvasPixelTest } from '$lib/utils';\r\n\timport { copyToClipboard } from '$lib/utils';\r\n\timport Plus from '$lib/components/icons/Plus.svelte';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let saveHandler: Function;\r\n\r\n\tlet profileImageUrl = '';\r\n\tlet name = '';\r\n\r\n\tlet showAPIKeys = false;\r\n\r\n\tlet showJWTToken = false;\r\n\tlet JWTTokenCopied = false;\r\n\r\n\tlet APIKey = '';\r\n\tlet showAPIKey = false;\r\n\tlet APIKeyCopied = false;\r\n\r\n\tlet profileImageInputElement: HTMLInputElement;\r\n\r\n\tconst submitHandler = async () => {\r\n\t\tif (name !== $user.name) {\r\n\t\t\tif (profileImageUrl === generateInitialsImage($user.name) || profileImageUrl === '') {\r\n\t\t\t\tprofileImageUrl = generateInitialsImage(name);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst updatedUser = await updateUserProfile(localStorage.token, name, profileImageUrl).catch(\r\n\t\t\t(error) => {\r\n\t\t\t\ttoast.error(error);\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tif (updatedUser) {\r\n\t\t\tawait user.set(updatedUser);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tconst createAPIKeyHandler = async () => {\r\n\t\tAPIKey = await createAPIKey(localStorage.token);\r\n\t\tif (APIKey) {\r\n\t\t\ttoast.success($i18n.t('API Key created.'));\r\n\t\t} else {\r\n\t\t\ttoast.error($i18n.t('Failed to create API Key.'));\r\n\t\t}\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tname = $user.name;\r\n\t\tprofileImageUrl = $user.profile_image_url;\r\n\r\n\t\tAPIKey = await getAPIKey(localStorage.token).catch((error) => {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn '';\r\n\t\t});\r\n\t});\r\n</script>\r\n\r\n<div class=\"flex flex-col h-full justify-between text-sm\">\r\n\t<div class=\" space-y-3 pr-1.5 overflow-y-scroll max-h-[25rem]\">\r\n\t\t<input\r\n\t\t\tid=\"profile-image-input\"\r\n\t\t\tbind:this={profileImageInputElement}\r\n\t\t\ttype=\"file\"\r\n\t\t\thidden\r\n\t\t\taccept=\"image/*\"\r\n\t\t\ton:change={(e) => {\r\n\t\t\t\tconst files = profileImageInputElement.files ?? [];\r\n\t\t\t\tlet reader = new FileReader();\r\n\t\t\t\treader.onload = (event) => {\r\n\t\t\t\t\tlet originalImageUrl = `${event.target.result}`;\r\n\r\n\t\t\t\t\tconst img = new Image();\r\n\t\t\t\t\timg.src = originalImageUrl;\r\n\r\n\t\t\t\t\timg.onload = function () {\r\n\t\t\t\t\t\tconst canvas = document.createElement('canvas');\r\n\t\t\t\t\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\t\t\t\t\t// Calculate the aspect ratio of the image\r\n\t\t\t\t\t\tconst aspectRatio = img.width / img.height;\r\n\r\n\t\t\t\t\t\t// Calculate the new width and height to fit within 100x100\r\n\t\t\t\t\t\tlet newWidth, newHeight;\r\n\t\t\t\t\t\tif (aspectRatio > 1) {\r\n\t\t\t\t\t\t\tnewWidth = 100 * aspectRatio;\r\n\t\t\t\t\t\t\tnewHeight = 100;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewWidth = 100;\r\n\t\t\t\t\t\t\tnewHeight = 100 / aspectRatio;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Set the canvas size\r\n\t\t\t\t\t\tcanvas.width = 100;\r\n\t\t\t\t\t\tcanvas.height = 100;\r\n\r\n\t\t\t\t\t\t// Calculate the position to center the image\r\n\t\t\t\t\t\tconst offsetX = (100 - newWidth) / 2;\r\n\t\t\t\t\t\tconst offsetY = (100 - newHeight) / 2;\r\n\r\n\t\t\t\t\t\t// Draw the image on the canvas\r\n\t\t\t\t\t\tctx.drawImage(img, offsetX, offsetY, newWidth, newHeight);\r\n\r\n\t\t\t\t\t\t// Get the base64 representation of the compressed image\r\n\t\t\t\t\t\tconst compressedSrc = canvas.toDataURL('image/jpeg');\r\n\r\n\t\t\t\t\t\t// Display the compressed image\r\n\t\t\t\t\t\tprofileImageUrl = compressedSrc;\r\n\r\n\t\t\t\t\t\tprofileImageInputElement.files = null;\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tfiles.length > 0 &&\r\n\t\t\t\t\t['image/gif', 'image/webp', 'image/jpeg', 'image/png'].includes(files[0]['type'])\r\n\t\t\t\t) {\r\n\t\t\t\t\treader.readAsDataURL(files[0]);\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\r\n\t\t<div class=\"space-y-1\">\r\n\t\t\t<!-- <div class=\" text-sm font-medium\">{$i18n.t('Account')}</div> -->\r\n\r\n\t\t\t<div class=\"flex space-x-5\">\r\n\t\t\t\t<div class=\"flex flex-col\">\r\n\t\t\t\t\t<div class=\"self-center mt-2\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"relative rounded-full dark:bg-gray-700\"\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tprofileImageInputElement.click();\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={profileImageUrl !== '' ? profileImageUrl : generateInitialsImage(name)}\r\n\t\t\t\t\t\t\t\talt=\"profile\"\r\n\t\t\t\t\t\t\t\tclass=\" rounded-full size-16 object-cover\"\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"absolute flex justify-center rounded-full bottom-0 left-0 right-0 top-0 h-full w-full overflow-hidden bg-gray-700 bg-fixed opacity-0 transition duration-300 ease-in-out hover:opacity-50\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div class=\"my-auto text-gray-100\">\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\td=\"m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a4 4 0 0 0 1.343-.886L17.5 5.501a2.121 2.121 0 0 0-3-3L3.58 13.419a4 4 0 0 0-.885 1.343Z\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"flex-1 flex flex-col self-center gap-0.5\">\r\n\t\t\t\t\t<div class=\" mb-0.5 text-sm font-medium\">{$i18n.t('Profile Image')}</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" text-xs text-center text-gray-800 dark:text-gray-400 rounded-full px-4 py-0.5 bg-gray-100 dark:bg-gray-850\"\r\n\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\tif (canvasPixelTest()) {\r\n\t\t\t\t\t\t\t\t\tprofileImageUrl = generateInitialsImage(name);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\ttoast.info(\r\n\t\t\t\t\t\t\t\t\t\t$i18n.t(\r\n\t\t\t\t\t\t\t\t\t\t\t'Fingerprint spoofing detected: Unable to use initials as avatar. Defaulting to default profile image.'\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tduration: 1000 * 10\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}>{$i18n.t('Use Initials')}</button\r\n\t\t\t\t\t\t>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" text-xs text-center text-gray-800 dark:text-gray-400 rounded-full px-4 py-0.5 bg-gray-100 dark:bg-gray-850\"\r\n\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\tconst url = await getGravatarUrl($user.email);\r\n\r\n\t\t\t\t\t\t\t\tprofileImageUrl = url;\r\n\t\t\t\t\t\t\t}}>{$i18n.t('Use Gravatar')}</button\r\n\t\t\t\t\t\t>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" text-xs text-center text-gray-800 dark:text-gray-400 rounded-lg px-2 py-1\"\r\n\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\tprofileImageUrl = '/user.png';\r\n\t\t\t\t\t\t\t}}>{$i18n.t('Remove')}</button\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"pt-0.5\">\r\n\t\t\t\t<div class=\"flex flex-col w-full\">\r\n\t\t\t\t\t<div class=\" mb-1 text-xs font-medium\">{$i18n.t('Name')}</div>\r\n\r\n\t\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tbind:value={name}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- <div class=\"py-0.5\">\r\n\t\t\t<UpdatePassword />\r\n\t\t</div> -->\r\n\r\n\t\t<hr class=\" dark:border-gray-700 my-4\" />\r\n\r\n\t\t<!-- <div class=\"flex justify-between items-center text-sm\">\r\n\t\t\t<div class=\"  font-medium\">{$i18n.t('API keys')}</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\" text-xs font-medium text-gray-500\"\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshowAPIKeys = !showAPIKeys;\r\n\t\t\t\t}}>{showAPIKeys ? $i18n.t('Hide') : $i18n.t('Show')}</button\r\n\t\t\t>\r\n\t\t</div> -->\r\n\r\n\t\t{#if showAPIKeys}\r\n\t\t\t<div class=\"flex flex-col gap-4\">\r\n\t\t\t\t<div class=\"justify-between w-full\">\r\n\t\t\t\t\t<div class=\"flex justify-between w-full\">\r\n\t\t\t\t\t\t<div class=\"self-center text-xs font-medium\">{$i18n.t('JWT Token')}</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex mt-2\">\r\n\t\t\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclass=\"w-full rounded-l-lg py-1.5 pl-4 text-sm bg-white dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\ttype={showJWTToken ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\tvalue={localStorage.token}\r\n\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"px-2 transition rounded-r-lg bg-white dark:bg-gray-850\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\tshowJWTToken = !showJWTToken;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{#if showJWTToken}\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M3.28 2.22a.75.75 0 0 0-1.06 1.06l10.5 10.5a.75.75 0 1 0 1.06-1.06l-1.322-1.323a7.012 7.012 0 0 0 2.16-3.11.87.87 0 0 0 0-.567A7.003 7.003 0 0 0 4.82 3.76l-1.54-1.54Zm3.196 3.195 1.135 1.136A1.502 1.502 0 0 1 9.45 8.389l1.136 1.135a3 3 0 0 0-4.109-4.109Z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\td=\"m7.812 10.994 1.816 1.816A7.003 7.003 0 0 1 1.38 8.28a.87.87 0 0 1 0-.566 6.985 6.985 0 0 1 1.113-2.039l2.513 2.513a3 3 0 0 0 2.806 2.806Z\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path d=\"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z\" />\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M1.38 8.28a.87.87 0 0 1 0-.566 7.003 7.003 0 0 1 13.238.006.87.87 0 0 1 0 .566A7.003 7.003 0 0 1 1.379 8.28ZM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"ml-1.5 px-1.5 py-1 dark:hover:bg-gray-850 transition rounded-lg\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tcopyToClipboard(localStorage.token);\r\n\t\t\t\t\t\t\t\tJWTTokenCopied = true;\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tJWTTokenCopied = false;\r\n\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{#if JWTTokenCopied}\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z\"\r\n\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M11.986 3H12a2 2 0 0 1 2 2v6a2 2 0 0 1-1.5 1.937V7A2.5 2.5 0 0 0 10 4.5H4.063A2 2 0 0 1 6 3h.014A2.25 2.25 0 0 1 8.25 1h1.5a2.25 2.25 0 0 1 2.236 2ZM10.5 4v-.75a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75V4h3Z\"\r\n\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M3 6a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H3Zm1.75 2.5a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5h-3.5ZM4 11.75a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z\"\r\n\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- <div class=\"justify-between w-full\">\r\n\t\t\t\t\t<div class=\"flex justify-between w-full\">\r\n\t\t\t\t\t\t<div class=\"self-center text-xs font-medium\">{$i18n.t('API Key')}</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex mt-2\">\r\n\t\t\t\t\t\t{#if APIKey}\r\n\t\t\t\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-l-lg py-1.5 pl-4 text-sm bg-white dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\t\ttype={showAPIKey ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\t\tvalue={APIKey}\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclass=\"px-2 transition rounded-r-lg bg-white dark:bg-gray-850\"\r\n\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\tshowAPIKey = !showAPIKey;\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{#if showAPIKey}\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M3.28 2.22a.75.75 0 0 0-1.06 1.06l10.5 10.5a.75.75 0 1 0 1.06-1.06l-1.322-1.323a7.012 7.012 0 0 0 2.16-3.11.87.87 0 0 0 0-.567A7.003 7.003 0 0 0 4.82 3.76l-1.54-1.54Zm3.196 3.195 1.135 1.136A1.502 1.502 0 0 1 9.45 8.389l1.136 1.135a3 3 0 0 0-4.109-4.109Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"m7.812 10.994 1.816 1.816A7.003 7.003 0 0 1 1.38 8.28a.87.87 0 0 1 0-.566 6.985 6.985 0 0 1 1.113-2.039l2.513 2.513a3 3 0 0 0 2.806 2.806Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path d=\"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M1.38 8.28a.87.87 0 0 1 0-.566 7.003 7.003 0 0 1 13.238.006.87.87 0 0 1 0 .566A7.003 7.003 0 0 1 1.379 8.28ZM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"ml-1.5 px-1.5 py-1 dark:hover:bg-gray-850 transition rounded-lg\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\tcopyToClipboard(APIKey);\r\n\t\t\t\t\t\t\t\t\tAPIKeyCopied = true;\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tAPIKeyCopied = false;\r\n\t\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{#if APIKeyCopied}\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M11.986 3H12a2 2 0 0 1 2 2v6a2 2 0 0 1-1.5 1.937V7A2.5 2.5 0 0 0 10 4.5H4.063A2 2 0 0 1 6 3h.014A2.25 2.25 0 0 1 8.25 1h1.5a2.25 2.25 0 0 1 2.236 2ZM10.5 4v-.75a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75V4h3Z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M3 6a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H3Zm1.75 2.5a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5h-3.5ZM4 11.75a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Create new key')}>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclass=\" px-1.5 py-1 dark:hover:bg-gray-850transition rounded-lg\"\r\n\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\tcreateAPIKeyHandler();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2\"\r\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"size-4\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"flex gap-1.5 items-center font-medium px-3.5 py-1.5 rounded-lg bg-gray-100/70 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-850 transition\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\tcreateAPIKeyHandler();\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Plus strokeWidth=\"2\" className=\" size-3.5\" />\r\n\r\n\t\t\t\t\t\t\t\t{$i18n.t('Create new secret key')}</button\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> -->\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\"  px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\ton:click={async () => {\r\n\t\t\t\tconst res = await submitHandler();\r\n\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tsaveHandler();\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\t\t</button>\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { getVersionUpdates } from '$lib/apis';\r\n\timport { getOllamaVersion } from '$lib/apis/ollama';\r\n\timport { WEBUI_BUILD_HASH, WEBUI_VERSION } from '$lib/constants';\r\n\timport { WEBUI_NAME, config, showChangelog } from '$lib/stores';\r\n\timport { compareVersion } from '$lib/utils';\r\n\timport { onMount, getContext } from 'svelte';\r\n\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet ollamaVersion = '';\r\n\r\n\tlet updateAvailable = null;\r\n\tlet version = {\r\n\t\tcurrent: '',\r\n\t\tlatest: ''\r\n\t};\r\n\r\n\tconst checkForVersionUpdates = async () => {\r\n\t\tupdateAvailable = null;\r\n\t\tversion = await getVersionUpdates(localStorage.token).catch((error) => {\r\n\t\t\treturn {\r\n\t\t\t\tcurrent: WEBUI_VERSION,\r\n\t\t\t\tlatest: WEBUI_VERSION\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tconsole.log(version);\r\n\r\n\t\tupdateAvailable = compareVersion(version.latest, version.current);\r\n\t\tconsole.log(updateAvailable);\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tollamaVersion = await getOllamaVersion(localStorage.token).catch((error) => {\r\n\t\t\treturn '';\r\n\t\t});\r\n\r\n\t\tcheckForVersionUpdates();\r\n\t});\r\n</script>\r\n\r\n<div class=\"flex flex-col h-full justify-between space-y-3 text-sm mb-6\">\r\n\t<div class=\" space-y-3\">\r\n\t\t<div>\r\n\t\t\t<div class=\" mb-2.5 text-sm font-medium flex space-x-2 items-center\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{$WEBUI_NAME}\r\n\t\t\t\t\t{$i18n.t('Version')}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"flex w-full justify-between items-center\">\r\n\t\t\t\t<div class=\"flex flex-col text-xs text-gray-700 dark:text-gray-200\">\r\n\t\t\t\t\t<div class=\"flex gap-1\">\r\n\t\t\t\t\t\t<Tooltip content={WEBUI_BUILD_HASH}>\r\n\t\t\t\t\t\t\tv{WEBUI_VERSION}\r\n\t\t\t\t\t\t</Tooltip>\r\n\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref=\"https://github.com/open-webui/open-webui/releases/tag/v{version.latest}\"\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{updateAvailable === null\r\n\t\t\t\t\t\t\t\t? $i18n.t('Checking for updates...')\r\n\t\t\t\t\t\t\t\t: updateAvailable\r\n\t\t\t\t\t\t\t\t? `(v${version.latest} ${$i18n.t('available!')})`\r\n\t\t\t\t\t\t\t\t: $i18n.t('(latest)')}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\" underline flex items-center space-x-1 text-xs text-gray-500 dark:text-gray-500\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tshowChangelog.set(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div>{$i18n.t(\"See what's new\")}</div>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" text-xs px-3 py-1.5 bg-gray-100 hover:bg-gray-200 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-lg font-medium\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tcheckForVersionUpdates();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{$i18n.t('Check for updates')}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t{#if ollamaVersion}\r\n\t\t\t<hr class=\" dark:border-gray-700\" />\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('Ollama Version')}</div>\r\n\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t<div class=\"flex-1 text-xs text-gray-700 dark:text-gray-200\">\r\n\t\t\t\t\t\t{ollamaVersion ?? 'N/A'}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\r\n\t\t<hr class=\" dark:border-gray-700\" />\r\n\r\n\t\t<div class=\"flex space-x-1\">\r\n\t\t\t<a href=\"https://discord.gg/5rJgQTnV4s\" target=\"_blank\">\r\n\t\t\t\t<img\r\n\t\t\t\t\talt=\"Discord\"\r\n\t\t\t\t\tsrc=\"https://img.shields.io/badge/Discord-Open_WebUI-blue?logo=discord&logoColor=white\"\r\n\t\t\t\t/>\r\n\t\t\t</a>\r\n\r\n\t\t\t<a href=\"https://twitter.com/OpenWebUI\" target=\"_blank\">\r\n\t\t\t\t<img\r\n\t\t\t\t\talt=\"X (formerly Twitter) Follow\"\r\n\t\t\t\t\tsrc=\"https://img.shields.io/twitter/follow/OpenWebUI\"\r\n\t\t\t\t/>\r\n\t\t\t</a>\r\n\r\n\t\t\t<a href=\"https://github.com/open-webui/open-webui\" target=\"_blank\">\r\n\t\t\t\t<img\r\n\t\t\t\t\talt=\"Github Repo\"\r\n\t\t\t\t\tsrc=\"https://img.shields.io/github/stars/open-webui/open-webui?style=social&label=Star us on Github\"\r\n\t\t\t\t/>\r\n\t\t\t</a>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"mt-2 text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t{#if !$WEBUI_NAME.includes('Open WebUI')}\r\n\t\t\t\t<span class=\" text-gray-500 dark:text-gray-300 font-medium\">{$WEBUI_NAME}</span> -\r\n\t\t\t{/if}{$i18n.t('Created by')}\r\n\t\t\t<a\r\n\t\t\t\tclass=\" text-gray-500 dark:text-gray-300 font-medium\"\r\n\t\t\t\thref=\"https://github.com/tjbck\"\r\n\t\t\t\ttarget=\"_blank\">Timothy J. Baek</a\r\n\t\t\t>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\r\n\timport {\r\n\t\tcreateModel,\r\n\t\tdeleteModel,\r\n\t\tdownloadModel,\r\n\t\tgetOllamaUrls,\r\n\t\tgetOllamaVersion,\r\n\t\tpullModel,\r\n\t\tuploadModel,\r\n\t\tgetOllamaConfig\r\n\t} from '$lib/apis/ollama';\r\n\r\n\timport { WEBUI_API_BASE_URL, WEBUI_BASE_URL } from '$lib/constants';\r\n\timport { WEBUI_NAME, models, MODEL_DOWNLOAD_POOL, user, config } from '$lib/stores';\r\n\timport { splitStream } from '$lib/utils';\r\n\timport { onMount, getContext } from 'svelte';\r\n\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\timport Spinner from '$lib/components/common/Spinner.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let getModels: Function;\r\n\r\n\tlet modelUploadInputElement: HTMLInputElement;\r\n\r\n\t// Models\r\n\r\n\tlet ollamaEnabled = null;\r\n\r\n\tlet OLLAMA_URLS = [];\r\n\tlet selectedOllamaUrlIdx: string | null = null;\r\n\r\n\tlet updateModelId = null;\r\n\tlet updateProgress = null;\r\n\r\n\tlet showExperimentalOllama = false;\r\n\r\n\tlet ollamaVersion = null;\r\n\tconst MAX_PARALLEL_DOWNLOADS = 3;\r\n\r\n\tlet modelTransferring = false;\r\n\tlet modelTag = '';\r\n\r\n\tlet createModelLoading = false;\r\n\tlet createModelTag = '';\r\n\tlet createModelContent = '';\r\n\tlet createModelDigest = '';\r\n\tlet createModelPullProgress = null;\r\n\r\n\tlet digest = '';\r\n\tlet pullProgress = null;\r\n\r\n\tlet modelUploadMode = 'file';\r\n\tlet modelInputFile: File[] | null = null;\r\n\tlet modelFileUrl = '';\r\n\tlet modelFileContent = `TEMPLATE \"\"\"{{ .System }}\\nUSER: {{ .Prompt }}\\nASSISTANT: \"\"\"\\nPARAMETER num_ctx 4096\\nPARAMETER stop \"</s>\"\\nPARAMETER stop \"USER:\"\\nPARAMETER stop \"ASSISTANT:\"`;\r\n\tlet modelFileDigest = '';\r\n\r\n\tlet uploadProgress = null;\r\n\tlet uploadMessage = '';\r\n\r\n\tlet deleteModelTag = '';\r\n\r\n\tconst updateModelsHandler = async () => {\r\n\t\tfor (const model of $models.filter(\r\n\t\t\t(m) =>\r\n\t\t\t\t!(m?.preset ?? false) &&\r\n\t\t\t\tm.owned_by === 'ollama' &&\r\n\t\t\t\t(selectedOllamaUrlIdx === null\r\n\t\t\t\t\t? true\r\n\t\t\t\t\t: (m?.ollama?.urls ?? []).includes(selectedOllamaUrlIdx))\r\n\t\t)) {\r\n\t\t\tconsole.log(model);\r\n\r\n\t\t\tupdateModelId = model.id;\r\n\t\t\tconst [res, controller] = await pullModel(\r\n\t\t\t\tlocalStorage.token,\r\n\t\t\t\tmodel.id,\r\n\t\t\t\tselectedOllamaUrlIdx\r\n\t\t\t).catch((error) => {\r\n\t\t\t\ttoast.error(error);\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tconst reader = res.body\r\n\t\t\t\t\t.pipeThrough(new TextDecoderStream())\r\n\t\t\t\t\t.pipeThrough(splitStream('\\n'))\r\n\t\t\t\t\t.getReader();\r\n\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst { value, done } = await reader.read();\r\n\t\t\t\t\t\tif (done) break;\r\n\r\n\t\t\t\t\t\tlet lines = value.split('\\n');\r\n\r\n\t\t\t\t\t\tfor (const line of lines) {\r\n\t\t\t\t\t\t\tif (line !== '') {\r\n\t\t\t\t\t\t\t\tlet data = JSON.parse(line);\r\n\r\n\t\t\t\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t\t\t\tif (data.error) {\r\n\t\t\t\t\t\t\t\t\tthrow data.error;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (data.detail) {\r\n\t\t\t\t\t\t\t\t\tthrow data.detail;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (data.status) {\r\n\t\t\t\t\t\t\t\t\tif (data.digest) {\r\n\t\t\t\t\t\t\t\t\t\tupdateProgress = 0;\r\n\t\t\t\t\t\t\t\t\t\tif (data.completed) {\r\n\t\t\t\t\t\t\t\t\t\t\tupdateProgress = Math.round((data.completed / data.total) * 1000) / 10;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tupdateProgress = 100;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\ttoast.success(data.status);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tupdateModelId = null;\r\n\t\tupdateProgress = null;\r\n\t};\r\n\r\n\tconst pullModelHandler = async () => {\r\n\t\tconst sanitizedModelTag = modelTag.trim().replace(/^ollama\\s+(run|pull)\\s+/, '');\r\n\t\tconsole.log($MODEL_DOWNLOAD_POOL);\r\n\t\tif ($MODEL_DOWNLOAD_POOL[sanitizedModelTag]) {\r\n\t\t\ttoast.error(\r\n\t\t\t\t$i18n.t(`Model '{{modelTag}}' is already in queue for downloading.`, {\r\n\t\t\t\t\tmodelTag: sanitizedModelTag\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (Object.keys($MODEL_DOWNLOAD_POOL).length === MAX_PARALLEL_DOWNLOADS) {\r\n\t\t\ttoast.error(\r\n\t\t\t\t$i18n.t('Maximum of 3 models can be downloaded simultaneously. Please try again later.')\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst [res, controller] = await pullModel(localStorage.token, sanitizedModelTag, '0').catch(\r\n\t\t\t(error) => {\r\n\t\t\t\ttoast.error(error);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tif (res) {\r\n\t\t\tconst reader = res.body\r\n\t\t\t\t.pipeThrough(new TextDecoderStream())\r\n\t\t\t\t.pipeThrough(splitStream('\\n'))\r\n\t\t\t\t.getReader();\r\n\r\n\t\t\tMODEL_DOWNLOAD_POOL.set({\r\n\t\t\t\t...$MODEL_DOWNLOAD_POOL,\r\n\t\t\t\t[sanitizedModelTag]: {\r\n\t\t\t\t\t...$MODEL_DOWNLOAD_POOL[sanitizedModelTag],\r\n\t\t\t\t\tabortController: controller,\r\n\t\t\t\t\treader,\r\n\t\t\t\t\tdone: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\twhile (true) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst { value, done } = await reader.read();\r\n\t\t\t\t\tif (done) break;\r\n\r\n\t\t\t\t\tlet lines = value.split('\\n');\r\n\r\n\t\t\t\t\tfor (const line of lines) {\r\n\t\t\t\t\t\tif (line !== '') {\r\n\t\t\t\t\t\t\tlet data = JSON.parse(line);\r\n\t\t\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t\t\tif (data.error) {\r\n\t\t\t\t\t\t\t\tthrow data.error;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (data.detail) {\r\n\t\t\t\t\t\t\t\tthrow data.detail;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (data.status) {\r\n\t\t\t\t\t\t\t\tif (data.digest) {\r\n\t\t\t\t\t\t\t\t\tlet downloadProgress = 0;\r\n\t\t\t\t\t\t\t\t\tif (data.completed) {\r\n\t\t\t\t\t\t\t\t\t\tdownloadProgress = Math.round((data.completed / data.total) * 1000) / 10;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tdownloadProgress = 100;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tMODEL_DOWNLOAD_POOL.set({\r\n\t\t\t\t\t\t\t\t\t\t...$MODEL_DOWNLOAD_POOL,\r\n\t\t\t\t\t\t\t\t\t\t[sanitizedModelTag]: {\r\n\t\t\t\t\t\t\t\t\t\t\t...$MODEL_DOWNLOAD_POOL[sanitizedModelTag],\r\n\t\t\t\t\t\t\t\t\t\t\tpullProgress: downloadProgress,\r\n\t\t\t\t\t\t\t\t\t\t\tdigest: data.digest\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\ttoast.success(data.status);\r\n\r\n\t\t\t\t\t\t\t\t\tMODEL_DOWNLOAD_POOL.set({\r\n\t\t\t\t\t\t\t\t\t\t...$MODEL_DOWNLOAD_POOL,\r\n\t\t\t\t\t\t\t\t\t\t[sanitizedModelTag]: {\r\n\t\t\t\t\t\t\t\t\t\t\t...$MODEL_DOWNLOAD_POOL[sanitizedModelTag],\r\n\t\t\t\t\t\t\t\t\t\t\tdone: data.status === 'success'\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\tif (typeof error !== 'string') {\r\n\t\t\t\t\t\terror = error.message;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttoast.error(error);\r\n\t\t\t\t\t// opts.callback({ success: false, error, modelName: opts.modelName });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log($MODEL_DOWNLOAD_POOL[sanitizedModelTag]);\r\n\r\n\t\t\tif ($MODEL_DOWNLOAD_POOL[sanitizedModelTag].done) {\r\n\t\t\t\ttoast.success(\r\n\t\t\t\t\t$i18n.t(`Model '{{modelName}}' has been successfully downloaded.`, {\r\n\t\t\t\t\t\tmodelName: sanitizedModelTag\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\r\n\t\t\t\tmodels.set(await getModels(localStorage.token));\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error($i18n.t('Download canceled'));\r\n\t\t\t}\r\n\r\n\t\t\tdelete $MODEL_DOWNLOAD_POOL[sanitizedModelTag];\r\n\r\n\t\t\tMODEL_DOWNLOAD_POOL.set({\r\n\t\t\t\t...$MODEL_DOWNLOAD_POOL\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tmodelTag = '';\r\n\t\tmodelTransferring = false;\r\n\t};\r\n\r\n\tconst uploadModelHandler = async () => {\r\n\t\tmodelTransferring = true;\r\n\r\n\t\tlet uploaded = false;\r\n\t\tlet fileResponse = null;\r\n\t\tlet name = '';\r\n\r\n\t\tif (modelUploadMode === 'file') {\r\n\t\t\tconst file = modelInputFile ? modelInputFile[0] : null;\r\n\r\n\t\t\tif (file) {\r\n\t\t\t\tuploadMessage = 'Uploading...';\r\n\r\n\t\t\t\tfileResponse = await uploadModel(localStorage.token, file, selectedOllamaUrlIdx).catch(\r\n\t\t\t\t\t(error) => {\r\n\t\t\t\t\t\ttoast.error(error);\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tuploadProgress = 0;\r\n\t\t\tfileResponse = await downloadModel(\r\n\t\t\t\tlocalStorage.token,\r\n\t\t\t\tmodelFileUrl,\r\n\t\t\t\tselectedOllamaUrlIdx\r\n\t\t\t).catch((error) => {\r\n\t\t\t\ttoast.error(error);\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (fileResponse && fileResponse.ok) {\r\n\t\t\tconst reader = fileResponse.body\r\n\t\t\t\t.pipeThrough(new TextDecoderStream())\r\n\t\t\t\t.pipeThrough(splitStream('\\n'))\r\n\t\t\t\t.getReader();\r\n\r\n\t\t\twhile (true) {\r\n\t\t\t\tconst { value, done } = await reader.read();\r\n\t\t\t\tif (done) break;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet lines = value.split('\\n');\r\n\r\n\t\t\t\t\tfor (const line of lines) {\r\n\t\t\t\t\t\tif (line !== '') {\r\n\t\t\t\t\t\t\tlet data = JSON.parse(line.replace(/^data: /, ''));\r\n\r\n\t\t\t\t\t\t\tif (data.progress) {\r\n\t\t\t\t\t\t\t\tif (uploadMessage) {\r\n\t\t\t\t\t\t\t\t\tuploadMessage = '';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tuploadProgress = data.progress;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (data.error) {\r\n\t\t\t\t\t\t\t\tthrow data.error;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (data.done) {\r\n\t\t\t\t\t\t\t\tmodelFileDigest = data.blob;\r\n\t\t\t\t\t\t\t\tname = data.name;\r\n\t\t\t\t\t\t\t\tuploaded = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst error = await fileResponse?.json();\r\n\t\t\ttoast.error(error?.detail ?? error);\r\n\t\t}\r\n\r\n\t\tif (uploaded) {\r\n\t\t\tconst res = await createModel(\r\n\t\t\t\tlocalStorage.token,\r\n\t\t\t\t`${name}:latest`,\r\n\t\t\t\t`FROM @${modelFileDigest}\\n${modelFileContent}`\r\n\t\t\t);\r\n\r\n\t\t\tif (res && res.ok) {\r\n\t\t\t\tconst reader = res.body\r\n\t\t\t\t\t.pipeThrough(new TextDecoderStream())\r\n\t\t\t\t\t.pipeThrough(splitStream('\\n'))\r\n\t\t\t\t\t.getReader();\r\n\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tconst { value, done } = await reader.read();\r\n\t\t\t\t\tif (done) break;\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet lines = value.split('\\n');\r\n\r\n\t\t\t\t\t\tfor (const line of lines) {\r\n\t\t\t\t\t\t\tif (line !== '') {\r\n\t\t\t\t\t\t\t\tconsole.log(line);\r\n\t\t\t\t\t\t\t\tlet data = JSON.parse(line);\r\n\t\t\t\t\t\t\t\tconsole.log(data);\r\n\r\n\t\t\t\t\t\t\t\tif (data.error) {\r\n\t\t\t\t\t\t\t\t\tthrow data.error;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (data.detail) {\r\n\t\t\t\t\t\t\t\t\tthrow data.detail;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (data.status) {\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t!data.digest &&\r\n\t\t\t\t\t\t\t\t\t\t!data.status.includes('writing') &&\r\n\t\t\t\t\t\t\t\t\t\t!data.status.includes('sha256')\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\ttoast.success(data.status);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (data.digest) {\r\n\t\t\t\t\t\t\t\t\t\t\tdigest = data.digest;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (data.completed) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tpullProgress = Math.round((data.completed / data.total) * 1000) / 10;\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tpullProgress = 100;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\ttoast.error(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmodelFileUrl = '';\r\n\r\n\t\tif (modelUploadInputElement) {\r\n\t\t\tmodelUploadInputElement.value = '';\r\n\t\t}\r\n\t\tmodelInputFile = null;\r\n\t\tmodelTransferring = false;\r\n\t\tuploadProgress = null;\r\n\r\n\t\tmodels.set(await getModels());\r\n\t};\r\n\r\n\tconst deleteModelHandler = async () => {\r\n\t\tconst res = await deleteModel(localStorage.token, deleteModelTag, selectedOllamaUrlIdx).catch(\r\n\t\t\t(error) => {\r\n\t\t\t\ttoast.error(error);\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tif (res) {\r\n\t\t\ttoast.success($i18n.t(`Deleted {{deleteModelTag}}`, { deleteModelTag }));\r\n\t\t}\r\n\r\n\t\tdeleteModelTag = '';\r\n\t\tmodels.set(await getModels());\r\n\t};\r\n\r\n\tconst cancelModelPullHandler = async (model: string) => {\r\n\t\tconst { reader, abortController } = $MODEL_DOWNLOAD_POOL[model];\r\n\t\tif (abortController) {\r\n\t\t\tabortController.abort();\r\n\t\t}\r\n\t\tif (reader) {\r\n\t\t\tawait reader.cancel();\r\n\t\t\tdelete $MODEL_DOWNLOAD_POOL[model];\r\n\t\t\tMODEL_DOWNLOAD_POOL.set({\r\n\t\t\t\t...$MODEL_DOWNLOAD_POOL\r\n\t\t\t});\r\n\t\t\tawait deleteModel(localStorage.token, model);\r\n\t\t\ttoast.success(`${model} download has been canceled`);\r\n\t\t}\r\n\t};\r\n\r\n\tconst createModelHandler = async () => {\r\n\t\tcreateModelLoading = true;\r\n\t\tconst res = await createModel(\r\n\t\t\tlocalStorage.token,\r\n\t\t\tcreateModelTag,\r\n\t\t\tcreateModelContent,\r\n\t\t\tselectedOllamaUrlIdx\r\n\t\t).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res && res.ok) {\r\n\t\t\tconst reader = res.body\r\n\t\t\t\t.pipeThrough(new TextDecoderStream())\r\n\t\t\t\t.pipeThrough(splitStream('\\n'))\r\n\t\t\t\t.getReader();\r\n\r\n\t\t\twhile (true) {\r\n\t\t\t\tconst { value, done } = await reader.read();\r\n\t\t\t\tif (done) break;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet lines = value.split('\\n');\r\n\r\n\t\t\t\t\tfor (const line of lines) {\r\n\t\t\t\t\t\tif (line !== '') {\r\n\t\t\t\t\t\t\tconsole.log(line);\r\n\t\t\t\t\t\t\tlet data = JSON.parse(line);\r\n\t\t\t\t\t\t\tconsole.log(data);\r\n\r\n\t\t\t\t\t\t\tif (data.error) {\r\n\t\t\t\t\t\t\t\tthrow data.error;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (data.detail) {\r\n\t\t\t\t\t\t\t\tthrow data.detail;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (data.status) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t!data.digest &&\r\n\t\t\t\t\t\t\t\t\t!data.status.includes('writing') &&\r\n\t\t\t\t\t\t\t\t\t!data.status.includes('sha256')\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\ttoast.success(data.status);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (data.digest) {\r\n\t\t\t\t\t\t\t\t\t\tcreateModelDigest = data.digest;\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (data.completed) {\r\n\t\t\t\t\t\t\t\t\t\t\tcreateModelPullProgress =\r\n\t\t\t\t\t\t\t\t\t\t\t\tMath.round((data.completed / data.total) * 1000) / 10;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tcreateModelPullProgress = 100;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\ttoast.error(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmodels.set(await getModels());\r\n\r\n\t\tcreateModelLoading = false;\r\n\r\n\t\tcreateModelTag = '';\r\n\t\tcreateModelContent = '';\r\n\t\tcreateModelDigest = '';\r\n\t\tcreateModelPullProgress = null;\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tconst ollamaConfig = await getOllamaConfig(localStorage.token);\r\n\r\n\t\tif (ollamaConfig.ENABLE_OLLAMA_API) {\r\n\t\t\tollamaEnabled = true;\r\n\r\n\t\t\tawait Promise.all([\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tOLLAMA_URLS = await getOllamaUrls(localStorage.token).catch((error) => {\r\n\t\t\t\t\t\ttoast.error(error);\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (OLLAMA_URLS.length > 0) {\r\n\t\t\t\t\t\tselectedOllamaUrlIdx = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tollamaVersion = await getOllamaVersion(localStorage.token).catch((error) => false);\r\n\t\t\t\t})()\r\n\t\t\t]);\r\n\t\t} else {\r\n\t\t\tollamaEnabled = false;\r\n\t\t\ttoast.error('Ollama API is disabled');\r\n\t\t}\r\n\t});\r\n</script>\r\n\r\n<div class=\"flex flex-col h-full justify-between text-sm\">\r\n\t<div class=\" space-y-3 pr-1.5 overflow-y-scroll max-h-[27rem]\">\r\n\t\t{#if ollamaEnabled}\r\n\t\t\t{#if ollamaVersion !== null}\r\n\t\t\t\t<div class=\"space-y-2 pr-1.5\">\r\n\t\t\t\t\t<!-- <div class=\"text-sm font-medium\">{$i18n.t('Manage Ollama Models')}</div> -->\r\n\r\n\t\t\t\t\t<!-- {#if OLLAMA_URLS.length > 0}\r\n\t\t\t\t\t\t<div class=\"flex gap-2\">\r\n\t\t\t\t\t\t\t<div class=\"flex-1 pb-1\">\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\t\tbind:value={selectedOllamaUrlIdx}\r\n\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Select an Ollama instance')}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{#each OLLAMA_URLS as url, idx}\r\n\t\t\t\t\t\t\t\t\t\t<option value={idx} class=\"bg-gray-100 dark:bg-gray-700\">{url}</option>\r\n\t\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div class=\"flex w-full justify-end\">\r\n\t\t\t\t\t\t\t\t\t<Tooltip content=\"Update All Models\" placement=\"top\">\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"p-2.5 flex gap-2 items-center bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-100 rounded-lg transition\"\r\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tupdateModelsHandler();\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M7 1a.75.75 0 0 1 .75.75V6h-1.5V1.75A.75.75 0 0 1 7 1ZM6.25 6v2.94L5.03 7.72a.75.75 0 0 0-1.06 1.06l2.5 2.5a.75.75 0 0 0 1.06 0l2.5-2.5a.75.75 0 1 0-1.06-1.06L7.75 8.94V6H10a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2.25Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M4.268 14A2 2 0 0 0 6 15h6a2 2 0 0 0 2-2v-3a2 2 0 0 0-1-1.732V11a3 3 0 0 1-3 3H4.268Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{#if updateModelId}\r\n\t\t\t\t\t\t\tUpdating \"{updateModelId}\" {updateProgress ? `(${updateProgress}%)` : ''}\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t{/if} -->\r\n\r\n\t\t\t\t\t<div class=\"space-y-2\">\r\n\t\t\t\t\t\t<!-- <div>\r\n\t\t\t\t\t\t\t<div class=\" mb-2 text-sm font-medium\">{$i18n.t('Pull a model from Ollama.com')}</div>\r\n\t\t\t\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t\t\t\t<div class=\"flex-1 mr-2\">\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Enter model tag (e.g. {{modelTag}})', {\r\n\t\t\t\t\t\t\t\t\t\t\tmodelTag: 'mistral:7b'\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\tbind:value={modelTag}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclass=\"px-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-100 rounded-lg transition\"\r\n\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\tpullModelHandler();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tdisabled={modelTransferring}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{#if modelTransferring}\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"self-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<style>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_ajPY {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransform-origin: center;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_AtaB 0.75s infinite linear;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_AtaB {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</style>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topacity=\".25\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"spinner_ajPY\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M8.75 2.75a.75.75 0 0 0-1.5 0v5.69L5.03 6.22a.75.75 0 0 0-1.06 1.06l3.5 3.5a.75.75 0 0 0 1.06 0l3.5-3.5a.75.75 0 0 0-1.06-1.06L8.75 8.44V2.75Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M3.5 9.75a.75.75 0 0 0-1.5 0v1.5A2.75 2.75 0 0 0 4.75 14h6.5A2.75 2.75 0 0 0 14 11.25v-1.5a.75.75 0 0 0-1.5 0v1.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-1.5Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div class=\"mt-2 mb-1 text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t\t\t\t\t\t{$i18n.t('To access the available model names for downloading,')}\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\tclass=\" text-gray-500 dark:text-gray-300 font-medium underline\"\r\n\t\t\t\t\t\t\t\t\thref=\"https://ollama.com/library\"\r\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\">{$i18n.t('click here.')}</a\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{#if Object.keys($MODEL_DOWNLOAD_POOL).length > 0}\r\n\t\t\t\t\t\t\t\t{#each Object.keys($MODEL_DOWNLOAD_POOL) as model}\r\n\t\t\t\t\t\t\t\t\t{#if 'pullProgress' in $MODEL_DOWNLOAD_POOL[model]}\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex flex-col\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"font-medium mb-1\">{model}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex flex-row justify-between space-x-4 pr-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\" flex-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"dark:bg-gray-600 bg-gray-500 text-xs font-medium text-gray-100 text-center p-0.5 leading-none rounded-full\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"width: {Math.max(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t15,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$MODEL_DOWNLOAD_POOL[model].pullProgress ?? 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}%\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{$MODEL_DOWNLOAD_POOL[model].pullProgress ?? 0}%\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Cancel')}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-gray-800 dark:text-gray-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcancelModelPullHandler(model);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4 text-gray-800 dark:text-white\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M6 18 17.94 6M18 18 6.06 6\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{#if 'digest' in $MODEL_DOWNLOAD_POOL[model]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"mt-1 text-xs dark:text-gray-500\" style=\"font-size: 0.5rem;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{$MODEL_DOWNLOAD_POOL[model].digest}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</div> -->\r\n\r\n\t\t\t\t\t\t<!-- <div>\r\n\t\t\t\t\t\t\t<div class=\" mb-2 text-sm font-medium\">{$i18n.t('Delete a model')}</div>\r\n\t\t\t\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t\t\t\t<div class=\"flex-1 mr-2\">\r\n\t\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\t\t\tbind:value={deleteModelTag}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Select a model')}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{#if !deleteModelTag}\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"\" disabled selected>{$i18n.t('Select a model')}</option>\r\n\t\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t\t\t{#each $models.filter((m) => !(m?.preset ?? false) && m.owned_by === 'ollama' && (selectedOllamaUrlIdx === null ? true : (m?.ollama?.urls ?? []).includes(selectedOllamaUrlIdx))) as model}\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={model.name} class=\"bg-gray-100 dark:bg-gray-700\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>{model.name +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t' (' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t(model.ollama.size / 1024 ** 3).toFixed(1) +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t' GB)'}</option\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclass=\"px-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-100 rounded-lg transition\"\r\n\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\tdeleteModelHandler();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div> -->\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<div class=\" mb-2 text-sm font-medium\">{$i18n.t('Create a model')}</div>\r\n\t\t\t\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t\t\t\t<div class=\"flex-1 mr-2 flex flex-col gap-2\">\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Enter model tag (e.g. {{modelTag}})', {\r\n\t\t\t\t\t\t\t\t\t\t\tmodelTag: 'my-modelfile'\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\tbind:value={createModelTag}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={createModelLoading}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\tbind:value={createModelContent}\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm bg-gray-100 dark:text-gray-100 dark:bg-gray-850 outline-none resize-none scrollbar-hidden\"\r\n\t\t\t\t\t\t\t\t\t\trows=\"6\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={`TEMPLATE \"\"\"{{ .System }}\\nUSER: {{ .Prompt }}\\nASSISTANT: \"\"\"\\nPARAMETER num_ctx 4096\\nPARAMETER stop \"</s>\"\\nPARAMETER stop \"USER:\"\\nPARAMETER stop \"ASSISTANT:\"`}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={createModelLoading}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"flex self-start\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\"px-2.5 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-100 rounded-lg transition disabled:cursor-not-allowed\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tcreateModelHandler();\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={createModelLoading}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-4\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M7.25 10.25a.75.75 0 0 0 1.5 0V4.56l2.22 2.22a.75.75 0 1 0 1.06-1.06l-3.5-3.5a.75.75 0 0 0-1.06 0l-3.5 3.5a.75.75 0 0 0 1.06 1.06l2.22-2.22v5.69Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M3.5 9.75a.75.75 0 0 0-1.5 0v1.5A2.75 2.75 0 0 0 4.75 14h6.5A2.75 2.75 0 0 0 14 11.25v-1.5a.75.75 0 0 0-1.5 0v1.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-1.5Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{#if createModelDigest !== ''}\r\n\t\t\t\t\t\t\t\t<div class=\"flex flex-col mt-1\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"font-medium mb-1\">{createModelTag}</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex flex-row justify-between space-x-4 pr-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" flex-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"dark:bg-gray-600 bg-gray-500 text-xs font-medium text-gray-100 text-center p-0.5 leading-none rounded-full\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"width: {Math.max(15, createModelPullProgress ?? 0)}%\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{createModelPullProgress ?? 0}%\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{#if createModelDigest}\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mt-1 text-xs dark:text-gray-500\" style=\"font-size: 0.5rem;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{createModelDigest}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<!-- <div class=\"pt-1\">\r\n\t\t\t\t\t\t\t<div class=\"flex justify-between items-center text-xs\">\r\n\t\t\t\t\t\t\t\t<div class=\" text-sm font-medium\">{$i18n.t('Experimental')}</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclass=\" text-xs font-medium text-gray-500\"\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\tshowExperimentalOllama = !showExperimentalOllama;\r\n\t\t\t\t\t\t\t\t\t}}>{showExperimentalOllama ? $i18n.t('Hide') : $i18n.t('Show')}</button\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div> -->\r\n\r\n\t\t\t\t\t\t<!-- {#if showExperimentalOllama}\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\ton:submit|preventDefault={() => {\r\n\t\t\t\t\t\t\t\t\tuploadModelHandler();\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div class=\" mb-2 flex w-full justify-between\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"  text-sm font-medium\">{$i18n.t('Upload a GGUF model')}</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (modelUploadMode === 'file') {\r\n\t\t\t\t\t\t\t\t\t\t\t\tmodelUploadMode = 'url';\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tmodelUploadMode = 'file';\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{#if modelUploadMode === 'file'}\r\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('File Mode')}</span>\r\n\t\t\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('URL Mode')}</span>\r\n\t\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"flex w-full mb-1.5\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"flex flex-col w-full\">\r\n\t\t\t\t\t\t\t\t\t\t{#if modelUploadMode === 'file'}\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex-1 {modelInputFile && modelInputFile.length > 0 ? 'mr-2' : ''}\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"model-upload-input\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbind:this={modelUploadInputElement}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbind:files={modelInputFile}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:change={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(modelInputFile);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taccept=\".gguf,.safetensors\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thidden\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg text-left py-2 px-4 bg-white dark:text-gray-300 dark:bg-gray-850\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodelUploadInputElement.click();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#if modelInputFile && modelInputFile.length > 0}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{modelInputFile[0].name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Click here to select')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex-1 {modelFileUrl !== '' ? 'mr-2' : ''}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg text-left py-2 px-4 bg-white dark:text-gray-300 dark:bg-gray-850 outline-none {modelFileUrl !==\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'mr-2'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"url\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbind:value={modelFileUrl}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Type Hugging Face Resolve (Download) URL')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{#if (modelUploadMode === 'file' && modelInputFile && modelInputFile.length > 0) || (modelUploadMode === 'url' && modelFileUrl !== '')}\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"px-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-100 rounded-lg disabled:cursor-not-allowed transition\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={modelTransferring}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{#if modelTransferring}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"self-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<style>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_ajPY {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransform-origin: center;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_AtaB 0.75s infinite linear;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_AtaB {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</style>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity=\".25\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"spinner_ajPY\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M7.25 10.25a.75.75 0 0 0 1.5 0V4.56l2.22 2.22a.75.75 0 1 0 1.06-1.06l-3.5-3.5a.75.75 0 0 0-1.06 0l-3.5 3.5a.75.75 0 0 0 1.06 1.06l2.22-2.22v5.69Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M3.5 9.75a.75.75 0 0 0-1.5 0v1.5A2.75 2.75 0 0 0 4.75 14h6.5A2.75 2.75 0 0 0 14 11.25v-1.5a.75.75 0 0 0-1.5 0v1.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-1.5Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t{#if (modelUploadMode === 'file' && modelInputFile && modelInputFile.length > 0) || (modelUploadMode === 'url' && modelFileUrl !== '')}\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" my-2.5 text-sm font-medium\">{$i18n.t('Modelfile Content')}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\t\t\tbind:value={modelFileContent}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm bg-gray-100 dark:text-gray-100 dark:bg-gray-850 outline-none resize-none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\trows=\"6\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t<div class=\" mt-1 text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('To access the GGUF models available for downloading,')}\r\n\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\tclass=\" text-gray-500 dark:text-gray-300 font-medium underline\"\r\n\t\t\t\t\t\t\t\t\t\thref=\"https://huggingface.co/models?search=gguf\"\r\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\">{$i18n.t('click here.')}</a\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t{#if uploadMessage}\r\n\t\t\t\t\t\t\t\t\t<div class=\"mt-2\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\" mb-2 text-xs\">{$i18n.t('Upload Progress')}</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"w-full rounded-full dark:bg-gray-800\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"dark:bg-gray-600 bg-gray-500 text-xs font-medium text-gray-100 text-center p-0.5 leading-none rounded-full\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"width: 100%\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{uploadMessage}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"mt-1 text-xs dark:text-gray-500\" style=\"font-size: 0.5rem;\">\r\n\t\t\t\t\t\t\t\t\t\t\t{modelFileDigest}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{:else if uploadProgress !== null}\r\n\t\t\t\t\t\t\t\t\t<div class=\"mt-2\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\" mb-2 text-xs\">{$i18n.t('Upload Progress')}</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"w-full rounded-full dark:bg-gray-800\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"dark:bg-gray-600 bg-gray-500 text-xs font-medium text-gray-100 text-center p-0.5 leading-none rounded-full\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"width: {Math.max(15, uploadProgress ?? 0)}%\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{uploadProgress ?? 0}%\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"mt-1 text-xs dark:text-gray-500\" style=\"font-size: 0.5rem;\">\r\n\t\t\t\t\t\t\t\t\t\t\t{modelFileDigest}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t{/if} -->\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{:else if ollamaVersion === false}\r\n\t\t\t\t<div>Ollama Not Detected</div>\r\n\t\t\t{:else}\r\n\t\t\t\t<div class=\"flex h-full justify-center\">\r\n\t\t\t\t\t<div class=\"my-auto\">\r\n\t\t\t\t\t\t<Spinner className=\"size-6\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\t\t{:else if ollamaEnabled === false}\r\n\t\t\t<div>Ollama API is disabled</div>\r\n\t\t{:else}\r\n\t\t\t<div class=\"flex h-full justify-center\">\r\n\t\t\t\t<div class=\"my-auto\">\r\n\t\t\t\t\t<Spinner className=\"size-6\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\r\n\timport { getLanguages } from '$lib/i18n';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport { models, settings, theme } from '$lib/stores';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\timport AdvancedParams from './Advanced/AdvancedParams.svelte';\r\n\r\n\texport let saveSettings: Function;\r\n\texport let getModels: Function;\r\n\r\n\t// General\r\n\tlet themes = ['dark', 'light', 'rose-pine dark', 'rose-pine-dawn light', 'oled-dark'];\r\n\tlet selectedTheme = 'system';\r\n\r\n\tlet languages = [];\r\n\tlet lang = $i18n.language;\r\n\tlet notificationEnabled = false;\r\n\tlet system = '';\r\n\r\n\tlet showAdvanced = false;\r\n\r\n\tconst toggleNotification = async () => {\r\n\t\tconst permission = await Notification.requestPermission();\r\n\r\n\t\tif (permission === 'granted') {\r\n\t\t\tnotificationEnabled = !notificationEnabled;\r\n\t\t\tsaveSettings({ notificationEnabled: notificationEnabled });\r\n\t\t} else {\r\n\t\t\ttoast.error(\r\n\t\t\t\t'Response notifications cannot be activated as the website permissions have been denied. Please visit your browser settings to grant the necessary access.'\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\t// Advanced\r\n\tlet requestFormat = '';\r\n\tlet keepAlive = null;\r\n\r\n\tlet params = {\r\n\t\t// Advanced\r\n\t\tseed: 0,\r\n\t\ttemperature: '',\r\n\t\tfrequency_penalty: '',\r\n\t\trepeat_last_n: '',\r\n\t\tmirostat: '',\r\n\t\tmirostat_eta: '',\r\n\t\tmirostat_tau: '',\r\n\t\ttop_k: '',\r\n\t\ttop_p: '',\r\n\t\tstop: null,\r\n\t\ttfs_z: '',\r\n\t\tnum_ctx: '',\r\n\t\tmax_tokens: ''\r\n\t};\r\n\r\n\tconst toggleRequestFormat = async () => {\r\n\t\tif (requestFormat === '') {\r\n\t\t\trequestFormat = 'json';\r\n\t\t} else {\r\n\t\t\trequestFormat = '';\r\n\t\t}\r\n\r\n\t\tsaveSettings({ requestFormat: requestFormat !== '' ? requestFormat : undefined });\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tselectedTheme = localStorage.theme ?? 'system';\r\n\r\n\t\tlanguages = await getLanguages();\r\n\r\n\t\tnotificationEnabled = $settings.notificationEnabled ?? false;\r\n\t\tsystem = $settings.system ?? '';\r\n\r\n\t\trequestFormat = $settings.requestFormat ?? '';\r\n\t\tkeepAlive = $settings.keepAlive ?? null;\r\n\r\n\t\tparams.seed = $settings.seed ?? 0;\r\n\t\tparams.temperature = $settings.temperature ?? '';\r\n\t\tparams.frequency_penalty = $settings.frequency_penalty ?? '';\r\n\t\tparams.top_k = $settings.top_k ?? '';\r\n\t\tparams.top_p = $settings.top_p ?? '';\r\n\t\tparams.num_ctx = $settings.num_ctx ?? '';\r\n\t\tparams = { ...params, ...$settings.params };\r\n\t\tparams.stop = $settings?.params?.stop ? ($settings?.params?.stop ?? []).join(',') : null;\r\n\t});\r\n\r\n\tconst applyTheme = (_theme: string) => {\r\n\t\tlet themeToApply = _theme === 'oled-dark' ? 'dark' : _theme;\r\n\r\n\t\tif (_theme === 'system') {\r\n\t\t\tthemeToApply = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n\t\t}\r\n\r\n\t\tif (themeToApply === 'dark' && !_theme.includes('oled')) {\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-900', '#171717');\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-950', '#0d0d0d');\r\n\t\t}\r\n\r\n\t\tthemes\r\n\t\t\t.filter((e) => e !== themeToApply)\r\n\t\t\t.forEach((e) => {\r\n\t\t\t\te.split(' ').forEach((e) => {\r\n\t\t\t\t\tdocument.documentElement.classList.remove(e);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tthemeToApply.split(' ').forEach((e) => {\r\n\t\t\tdocument.documentElement.classList.add(e);\r\n\t\t});\r\n\r\n\t\tconsole.log(_theme);\r\n\t};\r\n\r\n\tconst themeChangeHandler = (_theme: string) => {\r\n\t\ttheme.set(_theme);\r\n\t\tlocalStorage.setItem('theme', _theme);\r\n\t\tif (_theme.includes('oled')) {\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-900', '#000000');\r\n\t\t\tdocument.documentElement.style.setProperty('--color-gray-950', '#000000');\r\n\t\t\tdocument.documentElement.classList.add('dark');\r\n\t\t}\r\n\t\tapplyTheme(_theme);\r\n\t};\r\n</script>\r\n\r\n<div class=\"flex flex-col h-full justify-between text-sm\">\r\n\t<div class=\"  pr-1.5 overflow-y-scroll max-h-[25rem]\">\r\n\t\t<div class=\"\">\r\n\t\t\t<div class=\" mb-1 text-sm font-medium\">{$i18n.t('Settings')}</div>\r\n\r\n\t\t\t<div class=\"flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Theme')}</div>\r\n\t\t\t\t<div class=\"flex items-center relative\">\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclass=\" dark:bg-gray-900 w-fit pr-8 rounded py-2 px-2 text-xs bg-transparent outline-none text-right\"\r\n\t\t\t\t\t\tbind:value={selectedTheme}\r\n\t\t\t\t\t\tplaceholder=\"Select a theme\"\r\n\t\t\t\t\t\ton:change={() => themeChangeHandler(selectedTheme)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"system\"> {$i18n.t('System')}</option>\r\n\t\t\t\t\t\t<option value=\"dark\"> {$i18n.t('Dark')}</option>\r\n\t\t\t\t\t\t<option value=\"oled-dark\"> {$i18n.t('OLED Dark')}</option>\r\n\t\t\t\t\t\t<option value=\"light\"> {$i18n.t('Light')}</option>\r\n\t\t\t\t\t\t<!-- <option value=\"rose-pine dark\"> {$i18n.t('Ros Pine')}</option>\r\n\t\t\t\t\t\t<option value=\"rose-pine-dawn light\"> {$i18n.t('Ros Pine Dawn')}</option> -->\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\" flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Language')}</div>\r\n\t\t\t\t<div class=\"flex items-center relative\">\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclass=\" dark:bg-gray-900 w-fit pr-8 rounded py-2 px-2 text-xs bg-transparent outline-none text-right\"\r\n\t\t\t\t\t\tbind:value={lang}\r\n\t\t\t\t\t\tplaceholder=\"Select a language\"\r\n\t\t\t\t\t\ton:change={(e) => {\r\n\t\t\t\t\t\t\t$i18n.changeLanguage(lang);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#each languages as language}\r\n\t\t\t\t\t\t\t<option value={language['code']}>{language['title']}</option>\r\n\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{#if $i18n.language === 'en-US'}\r\n\t\t\t\t<!-- <div class=\"mb-2 text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t\t\tCouldn't find your language?\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\tclass=\" text-gray-300 font-medium underline\"\r\n\t\t\t\t\t\thref=\"https://github.com/open-webui/open-webui/blob/main/docs/CONTRIBUTING.md#-translations-and-internationalization\"\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tHelp us translate Open WebUI!\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div> -->\r\n\t\t\t{/if}\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Notifications')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleNotification();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if notificationEnabled === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<hr class=\" dark:border-gray-700 my-3\" />\r\n\r\n\t\t<div>\r\n\t\t\t<div class=\" my-2.5 text-sm font-medium\">{$i18n.t('System Prompt')}</div>\r\n\t\t\t<textarea\r\n\t\t\t\tbind:value={system}\r\n\t\t\t\tclass=\"w-full rounded-lg p-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none resize-none\"\r\n\t\t\t\trows=\"4\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"mt-2 space-y-3 pr-1.5\">\r\n\t\t\t<div class=\"flex justify-between items-center text-sm\">\r\n\t\t\t\t<div class=\"  font-medium\">{$i18n.t('Advanced Parameters')}</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" text-xs font-medium text-gray-500\"\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tshowAdvanced = !showAdvanced;\r\n\t\t\t\t\t}}>{showAdvanced ? $i18n.t('Hide') : $i18n.t('Show')}</button\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\r\n\t\t\t{#if showAdvanced}\r\n\t\t\t\t<AdvancedParams bind:params />\r\n\t\t\t\t<hr class=\" dark:border-gray-700\" />\r\n\r\n\t\t\t\t<div class=\" py-1 w-full justify-between\">\r\n\t\t\t\t\t<div class=\"flex w-full justify-between\">\r\n\t\t\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Keep Alive')}</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tkeepAlive = keepAlive === null ? '5m' : null;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{#if keepAlive === null}\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('Default')} </span>\r\n\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('Custom')} </span>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{#if keepAlive !== null}\r\n\t\t\t\t\t\t<div class=\"flex mt-1 space-x-2\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder={$i18n.t(\"e.g. '30s','10m'. Valid time units are 's', 'm', 'h'.\")}\r\n\t\t\t\t\t\t\t\tbind:value={keepAlive}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\" py-1 flex w-full justify-between\">\r\n\t\t\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Request Mode')}</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\ttoggleRequestFormat();\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{#if requestFormat === ''}\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('Default')} </span>\r\n\t\t\t\t\t\t\t{:else if requestFormat === 'json'}\r\n\t\t\t\t\t\t\t\t<!-- <svg\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            viewBox=\"0 0 20 20\"\r\n                            fill=\"currentColor\"\r\n                            class=\"w-4 h-4 self-center\"\r\n                        >\r\n                            <path\r\n                                d=\"M10 2a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 2zM10 15a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 15zM10 7a3 3 0 100 6 3 3 0 000-6zM15.657 5.404a.75.75 0 10-1.06-1.06l-1.061 1.06a.75.75 0 001.06 1.06l1.06-1.06zM6.464 14.596a.75.75 0 10-1.06-1.06l-1.06 1.06a.75.75 0 001.06 1.06l1.06-1.06zM18 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0118 10zM5 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 015 10zM14.596 15.657a.75.75 0 001.06-1.06l-1.06-1.061a.75.75 0 10-1.06 1.06l1.06 1.06zM5.404 6.464a.75.75 0 001.06-1.06l-1.06-1.06a.75.75 0 10-1.061 1.06l1.06 1.06z\"\r\n                            />\r\n                        </svg> -->\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('JSON')} </span>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\"  px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\ton:click={() => {\r\n\t\t\t\tsaveSettings({\r\n\t\t\t\t\tsystem: system !== '' ? system : undefined,\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tseed: (params.seed !== 0 ? params.seed : undefined) ?? undefined,\r\n\t\t\t\t\t\tstop: params.stop ? params.stop.split(',').filter((e) => e) : undefined,\r\n\t\t\t\t\t\ttemperature: params.temperature !== '' ? params.temperature : undefined,\r\n\t\t\t\t\t\tfrequency_penalty:\r\n\t\t\t\t\t\t\tparams.frequency_penalty !== '' ? params.frequency_penalty : undefined,\r\n\t\t\t\t\t\trepeat_last_n: params.repeat_last_n !== '' ? params.repeat_last_n : undefined,\r\n\t\t\t\t\t\tmirostat: params.mirostat !== '' ? params.mirostat : undefined,\r\n\t\t\t\t\t\tmirostat_eta: params.mirostat_eta !== '' ? params.mirostat_eta : undefined,\r\n\t\t\t\t\t\tmirostat_tau: params.mirostat_tau !== '' ? params.mirostat_tau : undefined,\r\n\t\t\t\t\t\ttop_k: params.top_k !== '' ? params.top_k : undefined,\r\n\t\t\t\t\t\ttop_p: params.top_p !== '' ? params.top_p : undefined,\r\n\t\t\t\t\t\ttfs_z: params.tfs_z !== '' ? params.tfs_z : undefined,\r\n\t\t\t\t\t\tnum_ctx: params.num_ctx !== '' ? params.num_ctx : undefined,\r\n\t\t\t\t\t\tmax_tokens: params.max_tokens !== '' ? params.max_tokens : undefined\r\n\t\t\t\t\t},\r\n\t\t\t\t\tkeepAlive: keepAlive ? (isNaN(keepAlive) ? keepAlive : parseInt(keepAlive)) : undefined\r\n\t\t\t\t});\r\n\t\t\t\tdispatch('save');\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\t\t</button>\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { getBackendConfig } from '$lib/apis';\r\n\timport { setDefaultPromptSuggestions } from '$lib/apis/configs';\r\n\timport { config, models, settings, user } from '$lib/stores';\r\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let saveSettings: Function;\r\n\r\n\t// Addons\r\n\tlet titleAutoGenerate = true;\r\n\tlet responseAutoCopy = false;\r\n\tlet titleAutoGenerateModel = '';\r\n\tlet titleAutoGenerateModelExternal = '';\r\n\tlet widescreenMode = false;\r\n\tlet titleGenerationPrompt = '';\r\n\tlet splitLargeChunks = false;\r\n\r\n\t// Interface\r\n\tlet defaultModelId = '';\r\n\tlet promptSuggestions = [];\r\n\tlet showUsername = false;\r\n\tlet chatBubble = true;\r\n\tlet chatDirection: 'LTR' | 'RTL' = 'LTR';\r\n\r\n\tconst toggleSplitLargeChunks = async () => {\r\n\t\tsplitLargeChunks = !splitLargeChunks;\r\n\t\tsaveSettings({ splitLargeChunks: splitLargeChunks });\r\n\t};\r\n\r\n\tconst togglewidescreenMode = async () => {\r\n\t\twidescreenMode = !widescreenMode;\r\n\t\tsaveSettings({ widescreenMode: widescreenMode });\r\n\t};\r\n\r\n\tconst toggleChatBubble = async () => {\r\n\t\tchatBubble = !chatBubble;\r\n\t\tsaveSettings({ chatBubble: chatBubble });\r\n\t};\r\n\r\n\tconst toggleShowUsername = async () => {\r\n\t\tshowUsername = !showUsername;\r\n\t\tsaveSettings({ showUsername: showUsername });\r\n\t};\r\n\r\n\tconst toggleTitleAutoGenerate = async () => {\r\n\t\ttitleAutoGenerate = !titleAutoGenerate;\r\n\t\tsaveSettings({\r\n\t\t\ttitle: {\r\n\t\t\t\t...$settings.title,\r\n\t\t\t\tauto: titleAutoGenerate\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst toggleResponseAutoCopy = async () => {\r\n\t\tconst permission = await navigator.clipboard\r\n\t\t\t.readText()\r\n\t\t\t.then(() => {\r\n\t\t\t\treturn 'granted';\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\treturn '';\r\n\t\t\t});\r\n\r\n\t\tconsole.log(permission);\r\n\r\n\t\tif (permission === 'granted') {\r\n\t\t\tresponseAutoCopy = !responseAutoCopy;\r\n\t\t\tsaveSettings({ responseAutoCopy: responseAutoCopy });\r\n\t\t} else {\r\n\t\t\ttoast.error(\r\n\t\t\t\t'Clipboard write permission denied. Please check your browser settings to grant the necessary access.'\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tconst toggleChangeChatDirection = async () => {\r\n\t\tchatDirection = chatDirection === 'LTR' ? 'RTL' : 'LTR';\r\n\t\tsaveSettings({ chatDirection });\r\n\t};\r\n\r\n\tconst updateInterfaceHandler = async () => {\r\n\t\tif ($user.role === 'admin') {\r\n\t\t\tpromptSuggestions = await setDefaultPromptSuggestions(localStorage.token, promptSuggestions);\r\n\t\t\tawait config.set(await getBackendConfig());\r\n\t\t}\r\n\r\n\t\tsaveSettings({\r\n\t\t\ttitle: {\r\n\t\t\t\t...$settings.title,\r\n\t\t\t\tmodel: titleAutoGenerateModel !== '' ? titleAutoGenerateModel : undefined,\r\n\t\t\t\tmodelExternal:\r\n\t\t\t\t\ttitleAutoGenerateModelExternal !== '' ? titleAutoGenerateModelExternal : undefined,\r\n\t\t\t\tprompt: titleGenerationPrompt ? titleGenerationPrompt : undefined\r\n\t\t\t},\r\n\t\t\tmodels: [defaultModelId]\r\n\t\t});\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tif ($user.role === 'admin') {\r\n\t\t\tpromptSuggestions = $config?.default_prompt_suggestions;\r\n\t\t}\r\n\r\n\t\ttitleAutoGenerate = $settings?.title?.auto ?? true;\r\n\t\ttitleAutoGenerateModel = $settings?.title?.model ?? '';\r\n\t\ttitleAutoGenerateModelExternal = $settings?.title?.modelExternal ?? '';\r\n\t\ttitleGenerationPrompt =\r\n\t\t\t$settings?.title?.prompt ??\r\n\t\t\t`Create a concise, 3-5 word phrase as a header for the following query, strictly adhering to the 3-5 word limit and avoiding the use of the word 'title': {{prompt}}`;\r\n\t\tresponseAutoCopy = $settings.responseAutoCopy ?? false;\r\n\t\tshowUsername = $settings.showUsername ?? false;\r\n\t\tchatBubble = $settings.chatBubble ?? true;\r\n\t\twidescreenMode = $settings.widescreenMode ?? false;\r\n\t\tsplitLargeChunks = $settings.splitLargeChunks ?? false;\r\n\t\tchatDirection = $settings.chatDirection ?? 'LTR';\r\n\r\n\t\tdefaultModelId = ($settings?.models ?? ['']).at(0);\r\n\t});\r\n</script>\r\n\r\n<form\r\n\tclass=\"flex flex-col h-full justify-between space-y-3 text-sm\"\r\n\ton:submit|preventDefault={() => {\r\n\t\tupdateInterfaceHandler();\r\n\t\tdispatch('save');\r\n\t}}\r\n>\r\n\t<div class=\" space-y-3 pr-1.5 overflow-y-scroll max-h-[25rem]\">\r\n\t\t<div>\r\n\t\t\t<div class=\" mb-1 text-sm font-medium\">{$i18n.t('WebUI Add-ons')}</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Chat Bubble UI')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleChatBubble();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if chatBubble === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Title Auto-Generation')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleTitleAutoGenerate();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if titleAutoGenerate === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs font-medium\">\r\n\t\t\t\t\t\t{$i18n.t('Response AutoCopy to Clipboard')}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleResponseAutoCopy();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if responseAutoCopy === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Widescreen Mode')}</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttogglewidescreenMode();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if widescreenMode === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{#if !$settings.chatBubble}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t\t<div class=\" self-center text-xs font-medium\">\r\n\t\t\t\t\t\t\t{$i18n.t('Display the username instead of You in the Chat')}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\ttoggleShowUsername();\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{#if showUsername === true}\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs font-medium\">\r\n\t\t\t\t\t\t{$i18n.t('Fluidly stream large external response chunks')}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\ttoggleSplitLargeChunks();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if splitLargeChunks === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div>\r\n\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Chat direction')}</div>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\ton:click={toggleChangeChatDirection}\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{#if chatDirection === 'LTR'}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('LTR')}</span>\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('RTL')}</span>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<hr class=\" dark:border-gray-850\" />\r\n\r\n\t\t<div class=\" space-y-1 mb-3\">\r\n\t\t\t<div class=\"mb-2\">\r\n\t\t\t\t<div class=\"flex justify-between items-center text-xs\">\r\n\t\t\t\t\t<div class=\" text-xs font-medium\">{$i18n.t('Default Model')}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"flex-1 mr-2\">\r\n\t\t\t\t<select\r\n\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\tbind:value={defaultModelId}\r\n\t\t\t\t\tplaceholder=\"Select a model\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<option value=\"\" disabled selected>{$i18n.t('Select a model')}</option>\r\n\t\t\t\t\t{#each $models.filter((model) => model.id) as model}\r\n\t\t\t\t\t\t<option value={model.id} class=\"bg-gray-100 dark:bg-gray-700\">{model.name}</option>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<hr class=\" dark:border-gray-850\" />\r\n\r\n\t\t<div>\r\n\t\t\t<div class=\" mb-2.5 text-sm font-medium flex\">\r\n\t\t\t\t<div class=\" mr-1\">{$i18n.t('Set Task Model')}</div>\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t\tcontent={$i18n.t(\r\n\t\t\t\t\t\t'A task model is used when performing tasks such as generating titles for chats and web search queries'\r\n\t\t\t\t\t)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\tstroke-width=\"1.5\"\r\n\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\td=\"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"flex w-full gap-2 pr-2\">\r\n\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t<div class=\" text-xs mb-1\">Local Models</div>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\tbind:value={titleAutoGenerateModel}\r\n\t\t\t\t\t\tplaceholder={$i18n.t('Select a model')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"\" selected>{$i18n.t('Current Model')}</option>\r\n\t\t\t\t\t\t{#each $models.filter((m) => m.owned_by === 'ollama') as model}\r\n\t\t\t\t\t\t\t<option value={model.id} class=\"bg-gray-100 dark:bg-gray-700\">\r\n\t\t\t\t\t\t\t\t{model.name}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t<div class=\" text-xs mb-1\">External Models</div>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\tbind:value={titleAutoGenerateModelExternal}\r\n\t\t\t\t\t\tplaceholder={$i18n.t('Select a model')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"\" selected>{$i18n.t('Current Model')}</option>\r\n\t\t\t\t\t\t{#each $models as model}\r\n\t\t\t\t\t\t\t<option value={model.id} class=\"bg-gray-100 dark:bg-gray-700\">\r\n\t\t\t\t\t\t\t\t{model.name}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"mt-3 mr-2\">\r\n\t\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('Title Generation Prompt')}</div>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tbind:value={titleGenerationPrompt}\r\n\t\t\t\t\tclass=\"w-full rounded-lg p-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none resize-none\"\r\n\t\t\t\t\trows=\"3\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t{#if $user.role === 'admin'}\r\n\t\t\t<hr class=\" dark:border-gray-700\" />\r\n\r\n\t\t\t<div class=\" space-y-3 pr-1.5\">\r\n\t\t\t\t<div class=\"flex w-full justify-between mb-2\">\r\n\t\t\t\t\t<div class=\" self-center text-sm font-semibold\">\r\n\t\t\t\t\t\t{$i18n.t('Default Prompt Suggestions')}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tif (promptSuggestions.length === 0 || promptSuggestions.at(-1).content !== '') {\r\n\t\t\t\t\t\t\t\tpromptSuggestions = [...promptSuggestions, { content: '', title: ['', ''] }];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"flex flex-col space-y-1\">\r\n\t\t\t\t\t{#each promptSuggestions as prompt, promptIdx}\r\n\t\t\t\t\t\t<div class=\" flex border dark:border-gray-600 rounded-lg\">\r\n\t\t\t\t\t\t\t<div class=\"flex flex-col flex-1\">\r\n\t\t\t\t\t\t\t\t<div class=\"flex border-b dark:border-gray-600 w-full\">\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tclass=\"px-3 py-1.5 text-xs w-full bg-transparent outline-none border-r dark:border-gray-600\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Title (e.g. Tell me a fun fact)')}\r\n\t\t\t\t\t\t\t\t\t\tbind:value={prompt.title[0]}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tclass=\"px-3 py-1.5 text-xs w-full bg-transparent outline-none border-r dark:border-gray-600\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Subtitle (e.g. about the Roman Empire)')}\r\n\t\t\t\t\t\t\t\t\t\tbind:value={prompt.title[1]}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tclass=\"px-3 py-1.5 text-xs w-full bg-transparent outline-none border-r dark:border-gray-600\"\r\n\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Prompt (e.g. Tell me a fun fact about the Roman Empire)')}\r\n\t\t\t\t\t\t\t\t\tbind:value={prompt.content}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"px-2\"\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\tpromptSuggestions.splice(promptIdx, 1);\r\n\t\t\t\t\t\t\t\t\tpromptSuggestions = promptSuggestions;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{#if promptSuggestions.length > 0}\r\n\t\t\t\t\t<div class=\"text-xs text-left w-full mt-2\">\r\n\t\t\t\t\t\t{$i18n.t('Adjusting these settings will apply changes universally to all users.')}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\ttype=\"submit\"\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\t\t</button>\r\n\t</div>\r\n</form>\r\n","<script lang=\"ts\">\r\n\timport { getAudioConfig, updateAudioConfig } from '$lib/apis/audio';\r\n\timport { user, settings } from '$lib/stores';\r\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport Switch from '$lib/components/common/Switch.svelte';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let saveSettings: Function;\r\n\r\n\t// Audio\r\n\r\n\tlet OpenAIUrl = '';\r\n\tlet OpenAIKey = '';\r\n\tlet OpenAISpeaker = '';\r\n\r\n\tlet STTEngines = ['', 'openai'];\r\n\tlet STTEngine = '';\r\n\r\n\tlet conversationMode = false;\r\n\tlet speechAutoSend = false;\r\n\tlet responseAutoPlayback = false;\r\n\tlet nonLocalVoices = false;\r\n\r\n\tlet TTSEngines = ['', 'openai'];\r\n\tlet TTSEngine = '';\r\n\r\n\tlet voices = [];\r\n\tlet speaker = '';\r\n\tlet models = [];\r\n\tlet model = '';\r\n\r\n\tconst getOpenAIVoices = () => {\r\n\t\tvoices = [\r\n\t\t\t{ name: 'alloy' },\r\n\t\t\t{ name: 'echo' },\r\n\t\t\t{ name: 'fable' },\r\n\t\t\t{ name: 'onyx' },\r\n\t\t\t{ name: 'nova' },\r\n\t\t\t{ name: 'shimmer' }\r\n\t\t];\r\n\t};\r\n\r\n\tconst getOpenAIVoicesModel = () => {\r\n\t\tmodels = [{ name: 'tts-1' }, { name: 'tts-1-hd' }];\r\n\t};\r\n\r\n\tconst getWebAPIVoices = () => {\r\n\t\tconst getVoicesLoop = setInterval(async () => {\r\n\t\t\tvoices = await speechSynthesis.getVoices();\r\n\r\n\t\t\t// do your loop\r\n\t\t\tif (voices.length > 0) {\r\n\t\t\t\tclearInterval(getVoicesLoop);\r\n\t\t\t}\r\n\t\t}, 100);\r\n\t};\r\n\r\n\tconst toggleConversationMode = async () => {\r\n\t\tconversationMode = !conversationMode;\r\n\r\n\t\tif (conversationMode) {\r\n\t\t\tresponseAutoPlayback = true;\r\n\t\t\tspeechAutoSend = true;\r\n\t\t}\r\n\r\n\t\tsaveSettings({\r\n\t\t\tconversationMode: conversationMode,\r\n\t\t\tresponseAutoPlayback: responseAutoPlayback,\r\n\t\t\tspeechAutoSend: speechAutoSend\r\n\t\t});\r\n\t};\r\n\r\n\tconst toggleResponseAutoPlayback = async () => {\r\n\t\tresponseAutoPlayback = !responseAutoPlayback;\r\n\t\tsaveSettings({ responseAutoPlayback: responseAutoPlayback });\r\n\t};\r\n\r\n\tconst toggleSpeechAutoSend = async () => {\r\n\t\tspeechAutoSend = !speechAutoSend;\r\n\t\tsaveSettings({ speechAutoSend: speechAutoSend });\r\n\t};\r\n\r\n\tconst updateConfigHandler = async () => {\r\n\t\tif (TTSEngine === 'openai') {\r\n\t\t\tconst res = await updateAudioConfig(localStorage.token, {\r\n\t\t\t\turl: OpenAIUrl,\r\n\t\t\t\tkey: OpenAIKey,\r\n\t\t\t\tmodel: model,\r\n\t\t\t\tspeaker: OpenAISpeaker\r\n\t\t\t});\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tOpenAIUrl = res.OPENAI_API_BASE_URL;\r\n\t\t\t\tOpenAIKey = res.OPENAI_API_KEY;\r\n\t\t\t\tmodel = res.OPENAI_API_MODEL;\r\n\t\t\t\tOpenAISpeaker = res.OPENAI_API_VOICE;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tconversationMode = $settings.conversationMode ?? false;\r\n\t\tspeechAutoSend = $settings.speechAutoSend ?? false;\r\n\t\tresponseAutoPlayback = $settings.responseAutoPlayback ?? false;\r\n\r\n\t\tSTTEngine = $settings?.audio?.STTEngine ?? '';\r\n\t\tTTSEngine = $settings?.audio?.TTSEngine ?? '';\r\n\t\tnonLocalVoices = $settings.audio?.nonLocalVoices ?? false;\r\n\t\tspeaker = $settings?.audio?.speaker ?? '';\r\n\t\tmodel = $settings?.audio?.model ?? '';\r\n\r\n\t\tif (TTSEngine === 'openai') {\r\n\t\t\tgetOpenAIVoices();\r\n\t\t\tgetOpenAIVoicesModel();\r\n\t\t} else {\r\n\t\t\tgetWebAPIVoices();\r\n\t\t}\r\n\r\n\t\tif ($user.role === 'admin') {\r\n\t\t\tconst res = await getAudioConfig(localStorage.token);\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tOpenAIUrl = res.OPENAI_API_BASE_URL;\r\n\t\t\t\tOpenAIKey = res.OPENAI_API_KEY;\r\n\t\t\t\tmodel = res.OPENAI_API_MODEL;\r\n\t\t\t\tOpenAISpeaker = res.OPENAI_API_VOICE;\r\n\t\t\t\tif (TTSEngine === 'openai') {\r\n\t\t\t\t\tspeaker = OpenAISpeaker;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n</script>\r\n\r\n<form\r\n\tclass=\"flex flex-col h-full justify-between space-y-3 text-sm\"\r\n\ton:submit|preventDefault={async () => {\r\n\t\tif ($user.role === 'admin') {\r\n\t\t\tawait updateConfigHandler();\r\n\t\t}\r\n\t\tsaveSettings({\r\n\t\t\taudio: {\r\n\t\t\t\tSTTEngine: STTEngine !== '' ? STTEngine : undefined,\r\n\t\t\t\tTTSEngine: TTSEngine !== '' ? TTSEngine : undefined,\r\n\t\t\t\tspeaker:\r\n\t\t\t\t\t(TTSEngine === 'openai' ? OpenAISpeaker : speaker) !== ''\r\n\t\t\t\t\t\t? TTSEngine === 'openai'\r\n\t\t\t\t\t\t\t? OpenAISpeaker\r\n\t\t\t\t\t\t\t: speaker\r\n\t\t\t\t\t\t: undefined,\r\n\t\t\t\tmodel: model !== '' ? model : undefined,\r\n\t\t\t\tnonLocalVoices: nonLocalVoices\r\n\t\t\t}\r\n\t\t});\r\n\t\tdispatch('save');\r\n\t}}\r\n>\r\n\t<div class=\" space-y-3 pr-1.5 overflow-y-scroll max-h-[25rem]\">\r\n\t\t<div>\r\n\t\t\t<div class=\" mb-1 text-sm font-medium\">{$i18n.t('STT Settings')}</div>\r\n\r\n\t\t\t<!-- <div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Speech-to-Text Engine')}</div>\r\n\t\t\t\t<div class=\"flex items-center relative\">\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclass=\"dark:bg-gray-900 w-fit pr-8 rounded px-2 p-1 text-xs bg-transparent outline-none text-right\"\r\n\t\t\t\t\t\tbind:value={STTEngine}\r\n\t\t\t\t\t\tplaceholder=\"Select a mode\"\r\n\t\t\t\t\t\ton:change={(e) => {\r\n\t\t\t\t\t\t\tif (e.target.value !== '') {\r\n\t\t\t\t\t\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true }).catch(function (err) {\r\n\t\t\t\t\t\t\t\t\ttoast.error(\r\n\t\t\t\t\t\t\t\t\t\t$i18n.t(`Permission denied when accessing microphone: {{error}}`, {\r\n\t\t\t\t\t\t\t\t\t\t\terror: err\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tSTTEngine = '';\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"\">{$i18n.t('Default (Web API)')}</option>\r\n\t\t\t\t\t\t<option value=\"whisper-local\">{$i18n.t('Whisper (Local)')}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div> -->\r\n\r\n\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Conversation Mode')}</div>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\ttoggleConversationMode();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{#if conversationMode === true}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">\r\n\t\t\t\t\t{$i18n.t('Auto-send input after 3 sec.')}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\ttoggleSpeechAutoSend();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{#if speechAutoSend === true}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div>\r\n\t\t\t<div class=\" mb-1 text-sm font-medium\">{$i18n.t('TTS Settings')}</div>\r\n\r\n\t\t\t<!-- <div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Text-to-Speech Engine')}</div>\r\n\t\t\t\t<div class=\"flex items-center relative\">\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclass=\" dark:bg-gray-900 w-fit pr-8 rounded px-2 p-1 text-xs bg-transparent outline-none text-right\"\r\n\t\t\t\t\t\tbind:value={TTSEngine}\r\n\t\t\t\t\t\tplaceholder=\"Select a mode\"\r\n\t\t\t\t\t\ton:change={(e) => {\r\n\t\t\t\t\t\t\tif (e.target.value === 'openai') {\r\n\t\t\t\t\t\t\t\tgetOpenAIVoices();\r\n\t\t\t\t\t\t\t\tOpenAISpeaker = 'alloy';\r\n\t\t\t\t\t\t\t\tmodel = 'tts-1';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tgetWebAPIVoices();\r\n\t\t\t\t\t\t\t\tspeaker = '';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"\">{$i18n.t('Default (Web API)')}</option>\r\n\t\t\t\t\t\t<option value=\"openai\">{$i18n.t('Open AI')}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div> -->\r\n\r\n\t\t\t{#if $user.role === 'admin'}\r\n\t\t\t\t{#if TTSEngine === 'openai'}\r\n\t\t\t\t\t<div class=\"mt-1 flex gap-2 mb-1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\tplaceholder={$i18n.t('API Base URL')}\r\n\t\t\t\t\t\t\tbind:value={OpenAIUrl}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\tplaceholder={$i18n.t('API Key')}\r\n\t\t\t\t\t\t\tbind:value={OpenAIKey}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{/if}\r\n\t\t\t{/if}\r\n\r\n\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Auto-playback response')}</div>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\ttoggleResponseAutoPlayback();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{#if responseAutoPlayback === true}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<hr class=\" dark:border-gray-700\" />\r\n\r\n\t\t{#if TTSEngine === ''}\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('Set Voice')}</div>\r\n\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\tbind:value={speaker}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"\" selected={speaker !== ''}>{$i18n.t('Default')}</option>\r\n\t\t\t\t\t\t\t{#each voices.filter((v) => nonLocalVoices || v.localService === true) as voice}\r\n\t\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\t\tvalue={voice.name}\r\n\t\t\t\t\t\t\t\t\tclass=\"bg-gray-100 dark:bg-gray-700\"\r\n\t\t\t\t\t\t\t\t\tselected={speaker === voice.name}>{voice.name}</option\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- <div class=\"flex items-center justify-between my-1.5\">\r\n\t\t\t\t\t<div class=\"text-xs\">\r\n\t\t\t\t\t\t{$i18n.t('Allow non-local voices')}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"mt-1\">\r\n\t\t\t\t\t\t<Switch bind:state={nonLocalVoices} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> -->\r\n\t\t\t</div>\r\n\t\t{:else if TTSEngine === 'openai'}\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('Set Voice')}</div>\r\n\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tlist=\"voice-list\"\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\tbind:value={OpenAISpeaker}\r\n\t\t\t\t\t\t\tplaceholder=\"Select a voice\"\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<datalist id=\"voice-list\">\r\n\t\t\t\t\t\t\t{#each voices as voice}\r\n\t\t\t\t\t\t\t\t<option value={voice.name} />\r\n\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t</datalist>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('Set Model')}</div>\r\n\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tlist=\"model-list\"\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\tbind:value={model}\r\n\t\t\t\t\t\t\tplaceholder=\"Select a model\"\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<datalist id=\"model-list\">\r\n\t\t\t\t\t\t\t{#each models as model}\r\n\t\t\t\t\t\t\t\t<option value={model.name} />\r\n\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t</datalist>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\ttype=\"submit\"\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\t\t</button>\r\n\t</div>\r\n</form>\r\n","<script lang=\"ts\">\r\n\timport fileSaver from 'file-saver';\r\n\tconst { saveAs } = fileSaver;\r\n\r\n\timport { chats, user, settings } from '$lib/stores';\r\n\r\n\timport {\r\n\t\tarchiveAllChats,\r\n\t\tcreateNewChat,\r\n\t\tdeleteAllChats,\r\n\t\tgetAllChats,\r\n\t\tgetAllUserChats,\r\n\t\tgetChatList\r\n\t} from '$lib/apis/chats';\r\n\timport { getImportOrigin, convertOpenAIChats } from '$lib/utils';\r\n\timport { onMount, getContext } from 'svelte';\r\n\timport { goto } from '$app/navigation';\r\n\timport { toast } from 'svelte-sonner';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let saveSettings: Function;\r\n\t// Chats\r\n\tlet saveChatHistory = true;\r\n\tlet importFiles;\r\n\r\n\tlet showArchiveConfirm = false;\r\n\tlet showDeleteConfirm = false;\r\n\r\n\tlet chatImportInputElement: HTMLInputElement;\r\n\r\n\t$: if (importFiles) {\r\n\t\tconsole.log(importFiles);\r\n\r\n\t\tlet reader = new FileReader();\r\n\t\treader.onload = (event) => {\r\n\t\t\tlet chats = JSON.parse(event.target.result);\r\n\t\t\tconsole.log(chats);\r\n\t\t\tif (getImportOrigin(chats) == 'openai') {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tchats = convertOpenAIChats(chats);\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log('Unable to import chats:', error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\timportChats(chats);\r\n\t\t};\r\n\r\n\t\tif (importFiles.length > 0) {\r\n\t\t\treader.readAsText(importFiles[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tconst importChats = async (_chats) => {\r\n\t\tfor (const chat of _chats) {\r\n\t\t\tconsole.log(chat);\r\n\r\n\t\t\tif (chat.chat) {\r\n\t\t\t\tawait createNewChat(localStorage.token, chat.chat);\r\n\t\t\t} else {\r\n\t\t\t\tawait createNewChat(localStorage.token, chat);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tawait chats.set(await getChatList(localStorage.token));\r\n\t};\r\n\r\n\tconst exportChats = async () => {\r\n\t\tlet blob = new Blob([JSON.stringify(await getAllChats(localStorage.token))], {\r\n\t\t\ttype: 'application/json'\r\n\t\t});\r\n\t\tsaveAs(blob, `chat-export-${Date.now()}.json`);\r\n\t};\r\n\r\n\tconst archiveAllChatsHandler = async () => {\r\n\t\tawait goto('/');\r\n\t\tawait archiveAllChats(localStorage.token).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t});\r\n\t\tawait chats.set(await getChatList(localStorage.token));\r\n\t};\r\n\r\n\tconst deleteAllChatsHandler = async () => {\r\n\t\tawait goto('/');\r\n\t\tawait deleteAllChats(localStorage.token).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t});\r\n\t\tawait chats.set(await getChatList(localStorage.token));\r\n\t};\r\n\r\n\tconst toggleSaveChatHistory = async () => {\r\n\t\tsaveChatHistory = !saveChatHistory;\r\n\t\tconsole.log(saveChatHistory);\r\n\r\n\t\tif (saveChatHistory === false) {\r\n\t\t\tawait goto('/');\r\n\t\t}\r\n\t\tsaveSettings({ saveChatHistory: saveChatHistory });\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tsaveChatHistory = $settings.saveChatHistory ?? true;\r\n\t});\r\n</script>\r\n\r\n<div class=\"flex flex-col h-full justify-between space-y-3 text-sm max-h-[22rem]\">\r\n\t<div class=\" space-y-2\">\r\n\t\t<div\r\n\t\t\tclass=\"flex flex-col justify-between rounded-md items-center py-2 px-3.5 w-full transition\"\r\n\t\t>\r\n\t\t\t<div class=\"flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Chat History')}</div>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\ttoggleSaveChatHistory();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{#if saveChatHistory === true}\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path d=\"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z\" />\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M1.38 8.28a.87.87 0 0 1 0-.566 7.003 7.003 0 0 1 13.238.006.87.87 0 0 1 0 .566A7.003 7.003 0 0 1 1.379 8.28ZM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\"> {$i18n.t('On')} </span>\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M3.28 2.22a.75.75 0 0 0-1.06 1.06l10.5 10.5a.75.75 0 1 0 1.06-1.06l-1.322-1.323a7.012 7.012 0 0 0 2.16-3.11.87.87 0 0 0 0-.567A7.003 7.003 0 0 0 4.82 3.76l-1.54-1.54Zm3.196 3.195 1.135 1.136A1.502 1.502 0 0 1 9.45 8.389l1.136 1.135a3 3 0 0 0-4.109-4.109Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"m7.812 10.994 1.816 1.816A7.003 7.003 0 0 1 1.38 8.28a.87.87 0 0 1 0-.566 6.985 6.985 0 0 1 1.113-2.039l2.513 2.513a3 3 0 0 0 2.806 2.806Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\r\n\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"text-xs text-left w-full font-medium mt-0.5\">\r\n\t\t\t\t{$i18n.t('This setting does not sync across browsers or devices.')}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<hr class=\" dark:border-gray-700\" />\r\n\r\n\t\t<div class=\"flex flex-col\">\r\n\t\t\t<input\r\n\t\t\t\tid=\"chat-import-input\"\r\n\t\t\t\tbind:this={chatImportInputElement}\r\n\t\t\t\tbind:files={importFiles}\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\taccept=\".json\"\r\n\t\t\t\thidden\r\n\t\t\t/>\r\n\t\t\t<button\r\n\t\t\t\tclass=\" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tchatImportInputElement.click();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\td=\"M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 9.5a.75.75 0 0 1-.75-.75V8.06l-.72.72a.75.75 0 0 1-1.06-1.06l2-2a.75.75 0 0 1 1.06 0l2 2a.75.75 0 1 1-1.06 1.06l-.72-.72v2.69a.75.75 0 0 1-.75.75Z\"\r\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Import Chats')}</div>\r\n\t\t\t</button>\r\n\t\t\t<button\r\n\t\t\t\tclass=\" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\texportChats();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\td=\"M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 3.5a.75.75 0 0 1 .75.75v2.69l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06l.72.72V6.25A.75.75 0 0 1 8 5.5Z\"\r\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Export Chats')}</div>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<hr class=\" dark:border-gray-700\" />\r\n\r\n\t\t<div class=\"flex flex-col\">\r\n\t\t\t{#if showArchiveConfirm}\r\n\t\t\t\t<div class=\"flex justify-between rounded-md items-center py-2 px-3.5 w-full transition\">\r\n\t\t\t\t\t<div class=\"flex items-center space-x-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path d=\"M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3Z\" />\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M13 6H3v6a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6ZM5.72 7.47a.75.75 0 0 1 1.06 0L8 8.69l1.22-1.22a.75.75 0 1 1 1.06 1.06L9.06 9.75l1.22 1.22a.75.75 0 1 1-1.06 1.06L8 10.81l-1.22 1.22a.75.75 0 0 1-1.06-1.06l1.22-1.22-1.22-1.22a.75.75 0 0 1 0-1.06Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t<span>{$i18n.t('Are you sure?')}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex space-x-1.5 items-center\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"hover:text-white transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tarchiveAllChatsHandler();\r\n\t\t\t\t\t\t\t\tshowArchiveConfirm = false;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\td=\"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z\"\r\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"hover:text-white transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tshowArchiveConfirm = false;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{:else}\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tshowArchiveConfirm = true;\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"size-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"M3.375 3C2.339 3 1.5 3.84 1.5 4.875v.75c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875v-.75C22.5 3.839 21.66 3 20.625 3H3.375Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"m3.087 9 .54 9.176A3 3 0 0 0 6.62 21h10.757a3 3 0 0 0 2.995-2.824L20.913 9H3.087Zm6.163 3.75A.75.75 0 0 1 10 12h4a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1-.75-.75Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Archive All Chats')}</div>\r\n\t\t\t\t</button>\r\n\t\t\t{/if}\r\n\r\n\t\t\t{#if showDeleteConfirm}\r\n\t\t\t\t<div class=\"flex justify-between rounded-md items-center py-2 px-3.5 w-full transition\">\r\n\t\t\t\t\t<div class=\"flex items-center space-x-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path d=\"M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3Z\" />\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M13 6H3v6a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6ZM5.72 7.47a.75.75 0 0 1 1.06 0L8 8.69l1.22-1.22a.75.75 0 1 1 1.06 1.06L9.06 9.75l1.22 1.22a.75.75 0 1 1-1.06 1.06L8 10.81l-1.22 1.22a.75.75 0 0 1-1.06-1.06l1.22-1.22-1.22-1.22a.75.75 0 0 1 0-1.06Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t<span>{$i18n.t('Are you sure?')}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex space-x-1.5 items-center\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"hover:text-white transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tdeleteAllChatsHandler();\r\n\t\t\t\t\t\t\t\tshowDeleteConfirm = false;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\td=\"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z\"\r\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"hover:text-white transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tshowDeleteConfirm = false;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{:else}\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tshowDeleteConfirm = true;\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm7 7a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1 0-1.5h4.5A.75.75 0 0 1 11 9Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center text-sm font-medium\">{$i18n.t('Delete All Chats')}</div>\r\n\t\t\t\t</button>\r\n\t\t\t{/if}\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { models, user } from '$lib/stores';\r\n\timport { createEventDispatcher, onMount, getContext, tick } from 'svelte';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport {\r\n\t\tgetOllamaConfig,\r\n\t\tgetOllamaUrls,\r\n\t\tgetOllamaVersion,\r\n\t\tupdateOllamaConfig,\r\n\t\tupdateOllamaUrls\r\n\t} from '$lib/apis/ollama';\r\n\timport {\r\n\t\tgetOpenAIConfig,\r\n\t\tgetOpenAIKeys,\r\n\t\tgetOpenAIModels,\r\n\t\tgetOpenAIUrls,\r\n\t\tupdateOpenAIConfig,\r\n\t\tupdateOpenAIKeys,\r\n\t\tupdateOpenAIUrls\r\n\t} from '$lib/apis/openai';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport Switch from '$lib/components/common/Switch.svelte';\r\n\timport Spinner from '$lib/components/common/Spinner.svelte';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let getModels: Function;\r\n\r\n\t// External\r\n\tlet OLLAMA_BASE_URLS = [''];\r\n\r\n\tlet OPENAI_API_KEYS = [''];\r\n\tlet OPENAI_API_BASE_URLS = [''];\r\n\r\n\tlet pipelineUrls = {};\r\n\r\n\tlet ENABLE_OPENAI_API = null;\r\n\tlet ENABLE_OLLAMA_API = null;\r\n\r\n\tconst verifyOpenAIHandler = async (idx) => {\r\n\t\tOPENAI_API_BASE_URLS = await updateOpenAIUrls(localStorage.token, OPENAI_API_BASE_URLS);\r\n\t\tOPENAI_API_KEYS = await updateOpenAIKeys(localStorage.token, OPENAI_API_KEYS);\r\n\r\n\t\tconst res = await getOpenAIModels(localStorage.token, idx).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\ttoast.success($i18n.t('Server connection verified'));\r\n\t\t\tif (res.pipelines) {\r\n\t\t\t\tpipelineUrls[OPENAI_API_BASE_URLS[idx]] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tawait models.set(await getModels());\r\n\t};\r\n\r\n\tconst verifyOllamaHandler = async (idx) => {\r\n\t\tOLLAMA_BASE_URLS = await updateOllamaUrls(localStorage.token, OLLAMA_BASE_URLS);\r\n\r\n\t\tconst res = await getOllamaVersion(localStorage.token, idx).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\ttoast.success($i18n.t('Server connection verified'));\r\n\t\t}\r\n\r\n\t\tawait models.set(await getModels());\r\n\t};\r\n\r\n\tconst updateOpenAIHandler = async () => {\r\n\t\t// Check if API KEYS length is same than API URLS length\r\n\t\tif (OPENAI_API_KEYS.length !== OPENAI_API_BASE_URLS.length) {\r\n\t\t\t// if there are more keys than urls, remove the extra keys\r\n\t\t\tif (OPENAI_API_KEYS.length > OPENAI_API_BASE_URLS.length) {\r\n\t\t\t\tOPENAI_API_KEYS = OPENAI_API_KEYS.slice(0, OPENAI_API_BASE_URLS.length);\r\n\t\t\t}\r\n\r\n\t\t\t// if there are more urls than keys, add empty keys\r\n\t\t\tif (OPENAI_API_KEYS.length < OPENAI_API_BASE_URLS.length) {\r\n\t\t\t\tconst diff = OPENAI_API_BASE_URLS.length - OPENAI_API_KEYS.length;\r\n\t\t\t\tfor (let i = 0; i < diff; i++) {\r\n\t\t\t\t\tOPENAI_API_KEYS.push('');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tOPENAI_API_BASE_URLS = await updateOpenAIUrls(localStorage.token, OPENAI_API_BASE_URLS);\r\n\t\tOPENAI_API_KEYS = await updateOpenAIKeys(localStorage.token, OPENAI_API_KEYS);\r\n\t\tawait models.set(await getModels());\r\n\t};\r\n\r\n\tconst updateOllamaUrlsHandler = async () => {\r\n\t\tOLLAMA_BASE_URLS = OLLAMA_BASE_URLS.filter((url) => url !== '');\r\n\t\tconsole.log(OLLAMA_BASE_URLS);\r\n\r\n\t\tif (OLLAMA_BASE_URLS.length === 0) {\r\n\t\t\tENABLE_OLLAMA_API = false;\r\n\t\t\tawait updateOllamaConfig(localStorage.token, ENABLE_OLLAMA_API);\r\n\r\n\t\t\ttoast.info($i18n.t('Ollama API disabled'));\r\n\t\t} else {\r\n\t\t\tOLLAMA_BASE_URLS = await updateOllamaUrls(localStorage.token, OLLAMA_BASE_URLS);\r\n\r\n\t\t\tconst ollamaVersion = await getOllamaVersion(localStorage.token).catch((error) => {\r\n\t\t\t\ttoast.error(error);\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\r\n\t\t\tif (ollamaVersion) {\r\n\t\t\t\ttoast.success($i18n.t('Server connection verified'));\r\n\t\t\t\tawait models.set(await getModels());\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tif ($user.role === 'admin') {\r\n\t\t\tawait Promise.all([\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tOLLAMA_BASE_URLS = await getOllamaUrls(localStorage.token);\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tOPENAI_API_BASE_URLS = await getOpenAIUrls(localStorage.token);\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tOPENAI_API_KEYS = await getOpenAIKeys(localStorage.token);\r\n\t\t\t\t})()\r\n\t\t\t]);\r\n\r\n\t\t\tOPENAI_API_BASE_URLS.forEach(async (url, idx) => {\r\n\t\t\t\tconst res = await getOpenAIModels(localStorage.token, idx);\r\n\t\t\t\tif (res.pipelines) {\r\n\t\t\t\t\tpipelineUrls[url] = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tconst ollamaConfig = await getOllamaConfig(localStorage.token);\r\n\t\t\tconst openaiConfig = await getOpenAIConfig(localStorage.token);\r\n\r\n\t\t\tENABLE_OPENAI_API = openaiConfig.ENABLE_OPENAI_API;\r\n\t\t\tENABLE_OLLAMA_API = ollamaConfig.ENABLE_OLLAMA_API;\r\n\t\t}\r\n\t});\r\n</script>\r\n\r\n<form\r\n\tclass=\"flex flex-col h-full justify-between text-sm\"\r\n\ton:submit|preventDefault={() => {\r\n\t\tupdateOpenAIHandler();\r\n\t\tupdateOllamaUrlsHandler();\r\n\r\n\t\tdispatch('save');\r\n\t}}\r\n>\r\n\t<div class=\"space-y-3 pr-1.5 overflow-y-scroll h-[24rem] max-h-[25rem]\">\r\n\t\t{#if ENABLE_OPENAI_API !== null && ENABLE_OLLAMA_API !== null}\r\n\t\t\t<div class=\" space-y-3\">\r\n\t\t\t\t<div class=\"mt-2 space-y-2 pr-1.5\">\r\n\t\t\t\t\t<div class=\"flex justify-between items-center text-sm\">\r\n\t\t\t\t\t\t<div class=\"  font-medium\">{$i18n.t('OpenAI API')}</div>\r\n\r\n\t\t\t\t\t\t<div class=\"mt-1\">\r\n\t\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\t\tbind:state={ENABLE_OPENAI_API}\r\n\t\t\t\t\t\t\t\ton:change={async () => {\r\n\t\t\t\t\t\t\t\t\tupdateOpenAIConfig(localStorage.token, ENABLE_OPENAI_API);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{#if ENABLE_OPENAI_API}\r\n\t\t\t\t\t\t<div class=\"flex flex-col gap-1\">\r\n\t\t\t\t\t\t\t{#each OPENAI_API_BASE_URLS as url, idx}\r\n\t\t\t\t\t\t\t\t<div class=\"flex w-full gap-2\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"flex-1 relative\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 {pipelineUrls[url]\r\n\t\t\t\t\t\t\t\t\t\t\t\t? 'pr-8'\r\n\t\t\t\t\t\t\t\t\t\t\t\t: ''} text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('API Base URL')}\r\n\t\t\t\t\t\t\t\t\t\t\tbind:value={url}\r\n\t\t\t\t\t\t\t\t\t\t\tautocomplete=\"off\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t{#if pipelineUrls[url]}\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" absolute top-2.5 right-2.5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content=\"Pipelines\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M11.644 1.59a.75.75 0 0 1 .712 0l9.75 5.25a.75.75 0 0 1 0 1.32l-9.75 5.25a.75.75 0 0 1-.712 0l-9.75-5.25a.75.75 0 0 1 0-1.32l9.75-5.25Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m3.265 10.602 7.668 4.129a2.25 2.25 0 0 0 2.134 0l7.668-4.13 1.37.739a.75.75 0 0 1 0 1.32l-9.75 5.25a.75.75 0 0 1-.71 0l-9.75-5.25a.75.75 0 0 1 0-1.32l1.37-.738Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m10.933 19.231-7.668-4.13-1.37.739a.75.75 0 0 0 0 1.32l9.75 5.25c.221.12.489.12.71 0l9.75-5.25a.75.75 0 0 0 0-1.32l-1.37-.738-7.668 4.13a2.25 2.25 0 0 1-2.134-.001Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('API Key')}\r\n\t\t\t\t\t\t\t\t\t\t\tbind:value={OPENAI_API_KEYS[idx]}\r\n\t\t\t\t\t\t\t\t\t\t\tautocomplete=\"off\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"self-center flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t{#if idx === 0}\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"px-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tOPENAI_API_BASE_URLS = [...OPENAI_API_BASE_URLS, ''];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tOPENAI_API_KEYS = [...OPENAI_API_KEYS, ''];\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"px-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tOPENAI_API_BASE_URLS = OPENAI_API_BASE_URLS.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(url, urlIdx) => idx !== urlIdx\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tOPENAI_API_KEYS = OPENAI_API_KEYS.filter((key, keyIdx) => idx !== keyIdx);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path d=\"M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"flex\">\r\n\t\t\t\t\t\t\t\t\t\t<Tooltip content=\"Verify connection\" className=\"self-start mt-0.5\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-900 dark:hover:bg-gray-850 rounded-lg transition\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tverifyOpenAIHandler(idx);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\" mb-1 text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('WebUI will make requests to')}\r\n\t\t\t\t\t\t\t\t\t<span class=\" text-gray-200\">'{url}/models'</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<hr class=\" dark:border-gray-700\" />\r\n\r\n\t\t\t<div class=\"pr-1.5 space-y-2\">\r\n\t\t\t\t<div class=\"flex justify-between items-center text-sm\">\r\n\t\t\t\t\t<div class=\"  font-medium\">{$i18n.t('Ollama API')}</div>\r\n\r\n\t\t\t\t\t<div class=\"mt-1\">\r\n\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\tbind:state={ENABLE_OLLAMA_API}\r\n\t\t\t\t\t\t\ton:change={async () => {\r\n\t\t\t\t\t\t\t\tupdateOllamaConfig(localStorage.token, ENABLE_OLLAMA_API);\r\n\r\n\t\t\t\t\t\t\t\tif (OLLAMA_BASE_URLS.length === 0) {\r\n\t\t\t\t\t\t\t\t\tOLLAMA_BASE_URLS = [''];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{#if ENABLE_OLLAMA_API}\r\n\t\t\t\t\t<div class=\"flex w-full gap-1.5\">\r\n\t\t\t\t\t\t<div class=\"flex-1 flex flex-col gap-2\">\r\n\t\t\t\t\t\t\t{#each OLLAMA_BASE_URLS as url, idx}\r\n\t\t\t\t\t\t\t\t<div class=\"flex gap-1.5\">\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Enter URL (e.g. http://localhost:11434)')}\r\n\t\t\t\t\t\t\t\t\t\tbind:value={url}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"self-center flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t{#if idx === 0}\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"px-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tOLLAMA_BASE_URLS = [...OLLAMA_BASE_URLS, ''];\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"px-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tOLLAMA_BASE_URLS = OLLAMA_BASE_URLS.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(url, urlIdx) => idx !== urlIdx\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path d=\"M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"flex\">\r\n\t\t\t\t\t\t\t\t\t\t<Tooltip content=\"Verify connection\" className=\"self-start mt-0.5\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-900 dark:hover:bg-gray-850 rounded-lg transition\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tverifyOllamaHandler(idx);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"mt-2 text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t\t\t\t{$i18n.t('Trouble accessing Ollama?')}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tclass=\" text-gray-300 font-medium underline\"\r\n\t\t\t\t\t\t\thref=\"https://github.com/open-webui/open-webui#troubleshooting\"\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{$i18n.t('Click here for help.')}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t{:else}\r\n\t\t\t<div class=\"flex h-full justify-center\">\r\n\t\t\t\t<div class=\"my-auto\">\r\n\t\t\t\t\t<Spinner className=\"size-6\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\"  px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\ttype=\"submit\"\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\t\t</button>\r\n\t</div>\r\n</form>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\r\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\r\n\timport { config, user } from '$lib/stores';\r\n\timport {\r\n\t\tgetImageGenerationModels,\r\n\t\tgetDefaultImageGenerationModel,\r\n\t\tupdateDefaultImageGenerationModel,\r\n\t\tgetImageSize,\r\n\t\tgetImageGenerationConfig,\r\n\t\tupdateImageGenerationConfig,\r\n\t\tgetImageGenerationEngineUrls,\r\n\t\tupdateImageGenerationEngineUrls,\r\n\t\tupdateImageSize,\r\n\t\tgetImageSteps,\r\n\t\tupdateImageSteps,\r\n\t\tgetOpenAIConfig,\r\n\t\tupdateOpenAIConfig\r\n\t} from '$lib/apis/images';\r\n\timport { getBackendConfig } from '$lib/apis';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let saveSettings: Function;\r\n\r\n\tlet loading = false;\r\n\r\n\tlet imageGenerationEngine = '';\r\n\tlet enableImageGeneration = false;\r\n\r\n\tlet AUTOMATIC1111_BASE_URL = '';\r\n\tlet COMFYUI_BASE_URL = '';\r\n\r\n\tlet OPENAI_API_BASE_URL = '';\r\n\tlet OPENAI_API_KEY = '';\r\n\r\n\tlet selectedModel = '';\r\n\tlet models = null;\r\n\r\n\tlet imageSize = '';\r\n\tlet steps = 50;\r\n\r\n\tconst getModels = async () => {\r\n\t\tmodels = await getImageGenerationModels(localStorage.token).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t\treturn null;\r\n\t\t});\r\n\t\tselectedModel = await getDefaultImageGenerationModel(localStorage.token).catch((error) => {\r\n\t\t\treturn '';\r\n\t\t});\r\n\t};\r\n\r\n\tconst updateUrlHandler = async () => {\r\n\t\tif (imageGenerationEngine === 'comfyui') {\r\n\t\t\tconst res = await updateImageGenerationEngineUrls(localStorage.token, {\r\n\t\t\t\tCOMFYUI_BASE_URL: COMFYUI_BASE_URL\r\n\t\t\t}).catch((error) => {\r\n\t\t\t\ttoast.error(error);\r\n\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tCOMFYUI_BASE_URL = res.COMFYUI_BASE_URL;\r\n\r\n\t\t\t\tawait getModels();\r\n\r\n\t\t\t\tif (models) {\r\n\t\t\t\t\ttoast.success($i18n.t('Server connection verified'));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t({ COMFYUI_BASE_URL } = await getImageGenerationEngineUrls(localStorage.token));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst res = await updateImageGenerationEngineUrls(localStorage.token, {\r\n\t\t\t\tAUTOMATIC1111_BASE_URL: AUTOMATIC1111_BASE_URL\r\n\t\t\t}).catch((error) => {\r\n\t\t\t\ttoast.error(error);\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tAUTOMATIC1111_BASE_URL = res.AUTOMATIC1111_BASE_URL;\r\n\r\n\t\t\t\tawait getModels();\r\n\r\n\t\t\t\tif (models) {\r\n\t\t\t\t\ttoast.success($i18n.t('Server connection verified'));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t({ AUTOMATIC1111_BASE_URL } = await getImageGenerationEngineUrls(localStorage.token));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tconst updateImageGeneration = async () => {\r\n\t\tconst res = await updateImageGenerationConfig(\r\n\t\t\tlocalStorage.token,\r\n\t\t\timageGenerationEngine,\r\n\t\t\tenableImageGeneration\r\n\t\t).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\timageGenerationEngine = res.engine;\r\n\t\t\tenableImageGeneration = res.enabled;\r\n\t\t}\r\n\r\n\t\tif (enableImageGeneration) {\r\n\t\t\tconfig.set(await getBackendConfig(localStorage.token));\r\n\t\t\tgetModels();\r\n\t\t}\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tif ($user.role === 'admin') {\r\n\t\t\tconst res = await getImageGenerationConfig(localStorage.token).catch((error) => {\r\n\t\t\t\ttoast.error(error);\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\timageGenerationEngine = res.engine;\r\n\t\t\t\tenableImageGeneration = res.enabled;\r\n\t\t\t}\r\n\t\t\tconst URLS = await getImageGenerationEngineUrls(localStorage.token);\r\n\r\n\t\t\tAUTOMATIC1111_BASE_URL = URLS.AUTOMATIC1111_BASE_URL;\r\n\t\t\tCOMFYUI_BASE_URL = URLS.COMFYUI_BASE_URL;\r\n\r\n\t\t\tconst config = await getOpenAIConfig(localStorage.token);\r\n\r\n\t\t\tOPENAI_API_KEY = config.OPENAI_API_KEY;\r\n\t\t\tOPENAI_API_BASE_URL = config.OPENAI_API_BASE_URL;\r\n\r\n\t\t\timageSize = await getImageSize(localStorage.token);\r\n\t\t\tsteps = await getImageSteps(localStorage.token);\r\n\r\n\t\t\tif (enableImageGeneration) {\r\n\t\t\t\tgetModels();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n</script>\r\n\r\n<form\r\n\tclass=\"flex flex-col h-full justify-between space-y-3 text-sm\"\r\n\ton:submit|preventDefault={async () => {\r\n\t\tloading = true;\r\n\r\n\t\tif (imageGenerationEngine === 'openai') {\r\n\t\t\tawait updateOpenAIConfig(localStorage.token, OPENAI_API_BASE_URL, OPENAI_API_KEY);\r\n\t\t}\r\n\r\n\t\tawait updateDefaultImageGenerationModel(localStorage.token, selectedModel);\r\n\r\n\t\tawait updateImageSize(localStorage.token, imageSize).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t\treturn null;\r\n\t\t});\r\n\t\tawait updateImageSteps(localStorage.token, steps).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tdispatch('save');\r\n\t\tloading = false;\r\n\t}}\r\n>\r\n\t<div class=\" space-y-3 pr-1.5 overflow-y-scroll max-h-[24rem]\">\r\n\t\t<div>\r\n\t\t\t<div class=\" mb-1 text-sm font-medium\">{$i18n.t('Image Settings')}</div>\r\n\r\n\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t<div class=\" self-center text-xs font-medium\">{$i18n.t('Image Generation Engine')}</div>\r\n\t\t\t\t<div class=\"flex items-center relative\">\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclass=\"w-fit pr-8 rounded px-2 p-1 text-xs bg-transparent outline-none text-right\"\r\n\t\t\t\t\t\tbind:value={imageGenerationEngine}\r\n\t\t\t\t\t\tplaceholder={$i18n.t('Select a mode')}\r\n\t\t\t\t\t\ton:change={async () => {\r\n\t\t\t\t\t\t\tawait updateImageGeneration();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"\">{$i18n.t('Default (Automatic1111)')}</option>\r\n\t\t\t\t\t\t<option value=\"comfyui\">{$i18n.t('ComfyUI')}</option>\r\n\t\t\t\t\t\t<option value=\"openai\">{$i18n.t('Open AI (Dall-E)')}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" py-0.5 flex w-full justify-between\">\r\n\t\t\t\t\t<div class=\" self-center text-xs font-medium\">\r\n\t\t\t\t\t\t{$i18n.t('Image Generation (Experimental)')}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded transition\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tif (imageGenerationEngine === '' && AUTOMATIC1111_BASE_URL === '') {\r\n\t\t\t\t\t\t\t\ttoast.error($i18n.t('AUTOMATIC1111 Base URL is required.'));\r\n\t\t\t\t\t\t\t\tenableImageGeneration = false;\r\n\t\t\t\t\t\t\t} else if (imageGenerationEngine === 'comfyui' && COMFYUI_BASE_URL === '') {\r\n\t\t\t\t\t\t\t\ttoast.error($i18n.t('ComfyUI Base URL is required.'));\r\n\t\t\t\t\t\t\t\tenableImageGeneration = false;\r\n\t\t\t\t\t\t\t} else if (imageGenerationEngine === 'openai' && OPENAI_API_KEY === '') {\r\n\t\t\t\t\t\t\t\ttoast.error($i18n.t('OpenAI API Key is required.'));\r\n\t\t\t\t\t\t\t\tenableImageGeneration = false;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tenableImageGeneration = !enableImageGeneration;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tupdateImageGeneration();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{#if enableImageGeneration === true}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('On')}</span>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<span class=\"ml-2 self-center\">{$i18n.t('Off')}</span>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<hr class=\" dark:border-gray-700\" />\r\n\r\n\t\t{#if imageGenerationEngine === ''}\r\n\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('AUTOMATIC1111 Base URL')}</div>\r\n\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t<div class=\"flex-1 mr-2\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\tplaceholder={$i18n.t('Enter URL (e.g. http://127.0.0.1:7860/)')}\r\n\t\t\t\t\t\tbind:value={AUTOMATIC1111_BASE_URL}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-100 rounded-lg transition\"\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tupdateUrlHandler();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\td=\"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z\"\r\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"mt-2 text-xs text-gray-400 dark:text-gray-500\">\r\n\t\t\t\t{$i18n.t('Include `--api` flag when running stable-diffusion-webui')}\r\n\t\t\t\t<a\r\n\t\t\t\t\tclass=\" text-gray-300 font-medium\"\r\n\t\t\t\t\thref=\"https://github.com/AUTOMATIC1111/stable-diffusion-webui/discussions/3734\"\r\n\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{$i18n.t('(e.g. `sh webui.sh --api`)')}\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t{:else if imageGenerationEngine === 'comfyui'}\r\n\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('ComfyUI Base URL')}</div>\r\n\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t<div class=\"flex-1 mr-2\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\tplaceholder={$i18n.t('Enter URL (e.g. http://127.0.0.1:7860/)')}\r\n\t\t\t\t\t\tbind:value={COMFYUI_BASE_URL}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-100 rounded-lg transition\"\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tupdateUrlHandler();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\td=\"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z\"\r\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t{:else if imageGenerationEngine === 'openai'}\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" mb-1.5 text-sm font-medium\">{$i18n.t('OpenAI API Config')}</div>\r\n\r\n\t\t\t\t<div class=\"flex gap-2 mb-1\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\tplaceholder={$i18n.t('API Base URL')}\r\n\t\t\t\t\t\tbind:value={OPENAI_API_BASE_URL}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\tplaceholder={$i18n.t('API Key')}\r\n\t\t\t\t\t\tbind:value={OPENAI_API_KEY}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\r\n\t\t{#if enableImageGeneration}\r\n\t\t\t<hr class=\" dark:border-gray-700\" />\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('Set Default Model')}</div>\r\n\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t<div class=\"flex-1 mr-2\">\r\n\t\t\t\t\t\t{#if imageGenerationEngine === 'openai' && !OPENAI_API_BASE_URL.includes('https://api.openai.com')}\r\n\t\t\t\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t\t\t\t<div class=\"flex-1\">\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tlist=\"model-list\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\t\t\tbind:value={selectedModel}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Select a model\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<datalist id=\"model-list\">\r\n\t\t\t\t\t\t\t\t\t\t{#each models ?? [] as model}\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={model.id}>{model.name}</option>\r\n\t\t\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t\t\t</datalist>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\t\tbind:value={selectedModel}\r\n\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Select a model')}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{#if !selectedModel}\r\n\t\t\t\t\t\t\t\t\t<option value=\"\" disabled selected>{$i18n.t('Select a model')}</option>\r\n\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t{#each models ?? [] as model}\r\n\t\t\t\t\t\t\t\t\t<option value={model.id} class=\"bg-gray-100 dark:bg-gray-700\">{model.name}</option\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('Set Image Size')}</div>\r\n\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t<div class=\"flex-1 mr-2\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Enter Image Size (e.g. 512x512)')}\r\n\t\t\t\t\t\t\tbind:value={imageSize}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\" mb-2.5 text-sm font-medium\">{$i18n.t('Set Steps')}</div>\r\n\t\t\t\t<div class=\"flex w-full\">\r\n\t\t\t\t\t<div class=\"flex-1 mr-2\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none\"\r\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Enter Number of Steps (e.g. 50)')}\r\n\t\t\t\t\t\t\tbind:value={steps}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg flex flex-row space-x-1 items-center {loading\r\n\t\t\t\t? ' cursor-not-allowed'\r\n\t\t\t\t: ''}\"\r\n\t\t\ttype=\"submit\"\r\n\t\t\tdisabled={loading}\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\r\n\t\t\t{#if loading}\r\n\t\t\t\t<div class=\"ml-2 self-center\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\tclass=\" w-4 h-4\"\r\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t><style>\r\n\t\t\t\t\t\t\t.spinner_ajPY {\r\n\t\t\t\t\t\t\t\ttransform-origin: center;\r\n\t\t\t\t\t\t\t\tanimation: spinner_AtaB 0.75s infinite linear;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t@keyframes spinner_AtaB {\r\n\t\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</style><path\r\n\t\t\t\t\t\t\td=\"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z\"\r\n\t\t\t\t\t\t\topacity=\".25\"\r\n\t\t\t\t\t\t/><path\r\n\t\t\t\t\t\t\td=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\r\n\t\t\t\t\t\t\tclass=\"spinner_ajPY\"\r\n\t\t\t\t\t\t/></svg\r\n\t\t\t\t\t>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\t\t</button>\r\n\t</div>\r\n</form>\r\n","<script lang=\"ts\">\r\n\texport let className = 'w-4 h-4';\r\n</script>\r\n\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" class={className}>\r\n\t<path\r\n\t\tfill-rule=\"evenodd\"\r\n\t\td=\"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z\"\r\n\t\tclip-rule=\"evenodd\"\r\n\t/>\r\n</svg>\r\n","<script>\r\n\timport { createEventDispatcher, getContext } from 'svelte';\r\n\r\n\timport Modal from '$lib/components/common/Modal.svelte';\r\n\timport { addNewMemory } from '$lib/apis/memories';\r\n\timport { toast } from 'svelte-sonner';\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\texport let show;\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet loading = false;\r\n\tlet content = '';\r\n\r\n\tconst submitHandler = async () => {\r\n\t\tloading = true;\r\n\r\n\t\tconst res = await addNewMemory(localStorage.token, content).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\tconsole.log(res);\r\n\t\t\ttoast.success('Memory added successfully');\r\n\t\t\tcontent = '';\r\n\t\t\tshow = false;\r\n\t\t\tdispatch('save');\r\n\t\t}\r\n\r\n\t\tloading = false;\r\n\t};\r\n</script>\r\n\r\n<Modal bind:show size=\"sm\">\r\n\t<div>\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Add Memory')}</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200\">\r\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\r\n\t\t\t\t<form\r\n\t\t\t\t\tclass=\"flex flex-col w-full\"\r\n\t\t\t\t\ton:submit|preventDefault={() => {\r\n\t\t\t\t\t\tsubmitHandler();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tbind:value={content}\r\n\t\t\t\t\t\t\tclass=\" bg-transparent w-full text-sm resize-none rounded-xl p-3 outline outline-1 outline-gray-100 dark:outline-gray-800\"\r\n\t\t\t\t\t\t\trows=\"3\"\r\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Enter a detail about yourself for your LLMs to recall')}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div class=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t Refer to yourself as \"User\" (e.g., \"User is learning Spanish\")\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex justify-end pt-1 text-sm font-medium\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-3xl flex flex-row space-x-1 items-center {loading\r\n\t\t\t\t\t\t\t\t? ' cursor-not-allowed'\r\n\t\t\t\t\t\t\t\t: ''}\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{$i18n.t('Add')}\r\n\r\n\t\t\t\t\t\t\t{#if loading}\r\n\t\t\t\t\t\t\t\t<div class=\"ml-2 self-center\">\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t><style>\r\n\t\t\t\t\t\t\t\t\t\t\t.spinner_ajPY {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttransform-origin: center;\r\n\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_AtaB 0.75s infinite linear;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_AtaB {\r\n\t\t\t\t\t\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</style><path\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z\"\r\n\t\t\t\t\t\t\t\t\t\t\topacity=\".25\"\r\n\t\t\t\t\t\t\t\t\t\t/><path\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"spinner_ajPY\"\r\n\t\t\t\t\t\t\t\t\t\t/></svg\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport dayjs from 'dayjs';\r\n\timport { getContext, createEventDispatcher } from 'svelte';\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport Modal from '$lib/components/common/Modal.svelte';\r\n\timport AddMemoryModal from './AddMemoryModal.svelte';\r\n\timport { deleteMemoriesByUserId, deleteMemoryById, getMemories } from '$lib/apis/memories';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\timport { error } from '@sveltejs/kit';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let show = false;\r\n\r\n\tlet memories = [];\r\n\r\n\tlet showAddMemoryModal = false;\r\n\r\n\t$: if (show) {\r\n\t\t(async () => {\r\n\t\t\tmemories = await getMemories(localStorage.token);\r\n\t\t})();\r\n\t}\r\n</script>\r\n\r\n<Modal size=\"xl\" bind:show>\r\n\t<div>\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Memory')}</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-col w-full px-5 pb-5 dark:text-gray-200\">\r\n\t\t\t<div\r\n\t\t\t\tclass=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6 h-[28rem] max-h-screen outline outline-1 rounded-xl outline-gray-100 dark:outline-gray-800 mb-4 mt-1\"\r\n\t\t\t>\r\n\t\t\t\t{#if memories.length > 0}\r\n\t\t\t\t\t<div class=\"text-left text-sm w-full mb-4 overflow-y-scroll\">\r\n\t\t\t\t\t\t<div class=\"relative overflow-x-auto\">\r\n\t\t\t\t\t\t\t<table class=\"w-full text-sm text-left text-gray-600 dark:text-gray-400 table-auto\">\r\n\t\t\t\t\t\t\t\t<thead\r\n\t\t\t\t\t\t\t\t\tclass=\"text-xs text-gray-700 uppercase bg-transparent dark:text-gray-200 border-b-2 dark:border-gray-800\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2\"> {$i18n.t('Name')} </th>\r\n\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2 hidden md:flex\"> {$i18n.t('Created At')} </th>\r\n\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2 text-right\" />\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t{#each memories as memory}\r\n\t\t\t\t\t\t\t\t\t\t<tr class=\"border-b dark:border-gray-800 items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"px-3 py-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"line-clamp-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{memory.content}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td class=\" px-3 py-1 hidden md:flex h-[2.5rem]\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"my-auto whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{dayjs(memory.created_at * 1000).format($i18n.t('MMMM DD, YYYY'))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"px-3 py-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex justify-end w-full\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content=\"Delete\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm px-2 py-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst res = await deleteMemoryById(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.token,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmemory.id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).catch((error) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.error(error);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.success('Memory deleted successfully');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmemories = await getMemories(localStorage.token);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"1.5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{:else}\r\n\t\t\t\t\t<div class=\"text-center flex h-full text-sm w-full\">\r\n\t\t\t\t\t\t<div class=\" my-auto pb-10 px-4 w-full text-gray-500\">\r\n\t\t\t\t\t\t\t{$i18n.t('Memories accessible by LLMs will be shown here.')}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t\t<div class=\"flex text-sm font-medium gap-1.5\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-300 dark:outline-gray-800 rounded-3xl\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tshowAddMemoryModal = true;\r\n\t\t\t\t\t}}>Add memory</button\r\n\t\t\t\t>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" px-3.5 py-1.5 font-medium text-red-500 hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-red-300 dark:outline-red-800 rounded-3xl\"\r\n\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\tconst res = await deleteMemoriesByUserId(localStorage.token).catch((error) => {\r\n\t\t\t\t\t\t\ttoast.error(error);\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\ttoast.success('Memory cleared successfully');\r\n\t\t\t\t\t\t\tmemories = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}>Clear memory</button\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n\r\n<AddMemoryModal\r\n\tbind:show={showAddMemoryModal}\r\n\ton:save={async () => {\r\n\t\tmemories = await getMemories(localStorage.token);\r\n\t}}\r\n/>\r\n","<script lang=\"ts\">\r\n\timport { getBackendConfig } from '$lib/apis';\r\n\timport { setDefaultPromptSuggestions } from '$lib/apis/configs';\r\n\timport Switch from '$lib/components/common/Switch.svelte';\r\n\timport { config, models, settings, user } from '$lib/stores';\r\n\timport { createEventDispatcher, onMount, getContext, tick } from 'svelte';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport ManageModal from './Personalization/ManageModal.svelte';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let saveSettings: Function;\r\n\r\n\tlet showManageModal = false;\r\n\r\n\t// Addons\r\n\tlet enableMemory = false;\r\n\r\n\tonMount(async () => {\r\n\t\tenableMemory = $settings?.memory ?? false;\r\n\t});\r\n</script>\r\n\r\n<ManageModal bind:show={showManageModal} />\r\n\r\n<form\r\n\tclass=\"flex flex-col h-full justify-between space-y-3 text-sm\"\r\n\ton:submit|preventDefault={() => {\r\n\t\tdispatch('save');\r\n\t}}\r\n>\r\n\t<div class=\"  pr-1.5 overflow-y-scroll max-h-[25rem]\">\r\n\t\t<div>\r\n\t\t\t<div class=\"flex items-center justify-between mb-1\">\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t\tcontent=\"This is an experimental feature, it may not function as expected and is subject to change at any time.\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"text-sm font-medium\">\r\n\t\t\t\t\t\t{$i18n.t('Memory')}\r\n\r\n\t\t\t\t\t\t<span class=\" text-xs text-gray-500\">({$i18n.t('Experimental')})</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Tooltip>\r\n\r\n\t\t\t\t<div class=\"mt-1\">\r\n\t\t\t\t\t<Switch\r\n\t\t\t\t\t\tbind:state={enableMemory}\r\n\t\t\t\t\t\ton:change={async () => {\r\n\t\t\t\t\t\t\tsaveSettings({ memory: enableMemory });\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400\">\r\n\t\t\t<div>\r\n\t\t\t\tYou can personalize your interactions with LLMs by adding memories through the 'Manage'\r\n\t\t\t\tbutton below, making them more helpful and tailored to you.\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- <div class=\"mt-3\">\r\n\t\t\t\tTo understand what LLM remembers or teach it something new, just chat with it:\r\n\r\n\t\t\t\t<div>- Remember that I like concise responses.</div>\r\n\t\t\t\t<div>- I just got a puppy!</div>\r\n\t\t\t\t<div>- What do you remember about me?</div>\r\n\t\t\t\t<div>- Where did we leave off on my last project?</div>\r\n\t\t\t</div> -->\r\n\t\t</div>\r\n\r\n\t\t<div class=\"mt-3 mb-1 ml-1\">\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tclass=\" px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-300 dark:outline-gray-800 rounded-3xl\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshowManageModal = true;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\tManage\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"flex justify-end text-sm font-medium\">\r\n\t\t<button\r\n\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\ttype=\"submit\"\r\n\t\t>\r\n\t\t\t{$i18n.t('Save')}\r\n\t\t</button>\r\n\t</div>\r\n</form>\r\n","<script lang=\"ts\">\r\n\timport { getContext } from 'svelte';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { models, settings, user } from '$lib/stores';\r\n\r\n\timport { getModels as _getModels } from '$lib/apis';\r\n\r\n\timport Modal from '../common/Modal.svelte';\r\n\timport Account from './Settings/Account.svelte';\r\n\timport About from './Settings/About.svelte';\r\n\timport Models from './Settings/Models.svelte';\r\n\timport General from './Settings/General.svelte';\r\n\timport Interface from './Settings/Interface.svelte';\r\n\timport Audio from './Settings/Audio.svelte';\r\n\timport Chats from './Settings/Chats.svelte';\r\n\timport Connections from './Settings/Connections.svelte';\r\n\timport Images from './Settings/Images.svelte';\r\n\timport User from '../icons/User.svelte';\r\n\timport Personalization from './Settings/Personalization.svelte';\r\n\timport { updateUserSettings } from '$lib/apis/users';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let show = false;\r\n\r\n\tconst saveSettings = async (updated) => {\r\n\t\tconsole.log(updated);\r\n\t\tawait settings.set({ ...$settings, ...updated });\r\n\t\tawait models.set(await getModels());\r\n\t\tawait updateUserSettings(localStorage.token, { ui: $settings });\r\n\t};\r\n\r\n\tconst getModels = async () => {\r\n\t\treturn await _getModels(localStorage.token);\r\n\t};\r\n\r\n\tlet selectedTab = 'general';\r\n</script>\r\n\r\n<Modal bind:show>\r\n\t<div class=\"text-gray-700 dark:text-gray-100\">\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Settings')}</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-col md:flex-row w-full p-4 md:space-x-4\">\r\n\t\t\t<div\r\n\t\t\t\tclass=\"tabs flex flex-row overflow-x-auto space-x-1 md:space-x-0 md:space-y-1 md:flex-col flex-1 md:flex-none md:w-40 dark:text-gray-200 text-xs text-left mb-3 md:mb-0\"\r\n\t\t\t>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition {selectedTab ===\r\n\t\t\t\t\t'general'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-700'\r\n\t\t\t\t\t\t: ' hover:bg-gray-300 dark:hover:bg-gray-800'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'general';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M8.34 1.804A1 1 0 019.32 1h1.36a1 1 0 01.98.804l.295 1.473c.497.144.971.342 1.416.587l1.25-.834a1 1 0 011.262.125l.962.962a1 1 0 01.125 1.262l-.834 1.25c.245.445.443.919.587 1.416l1.473.294a1 1 0 01.804.98v1.361a1 1 0 01-.804.98l-1.473.295a6.95 6.95 0 01-.587 1.416l.834 1.25a1 1 0 01-.125 1.262l-.962.962a1 1 0 01-1.262.125l-1.25-.834a6.953 6.953 0 01-1.416.587l-.294 1.473a1 1 0 01-.98.804H9.32a1 1 0 01-.98-.804l-.295-1.473a6.957 6.957 0 01-1.416-.587l-1.25.834a1 1 0 01-1.262-.125l-.962-.962a1 1 0 01-.125-1.262l.834-1.25a6.957 6.957 0 01-.587-1.416l-1.473-.294A1 1 0 011 10.68V9.32a1 1 0 01.804-.98l1.473-.295c.144-.497.342-.971.587-1.416l-.834-1.25a1 1 0 01.125-1.262l.962-.962A1 1 0 015.38 3.03l1.25.834a6.957 6.957 0 011.416-.587l.294-1.473zM13 10a3 3 0 11-6 0 3 3 0 016 0z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('General')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t{#if $user?.role === 'admin'}\r\n\t\t\t\t\t<!-- <button\r\n\t\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition {selectedTab ===\r\n\t\t\t\t\t\t'connections'\r\n\t\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-700'\r\n\t\t\t\t\t\t\t: ' hover:bg-gray-300 dark:hover:bg-gray-800'}\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tselectedTab = 'connections';\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\td=\"M1 9.5A3.5 3.5 0 0 0 4.5 13H12a3 3 0 0 0 .917-5.857 2.503 2.503 0 0 0-3.198-3.019 3.5 3.5 0 0 0-6.628 2.171A3.5 3.5 0 0 0 1 9.5Z\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Connections')}</div>\r\n\t\t\t\t\t</button> -->\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition {selectedTab ===\r\n\t\t\t\t\t\t'models'\r\n\t\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-700'\r\n\t\t\t\t\t\t\t: ' hover:bg-gray-300 dark:hover:bg-gray-800'}\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tselectedTab = 'models';\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\td=\"M10 1c3.866 0 7 1.79 7 4s-3.134 4-7 4-7-1.79-7-4 3.134-4 7-4zm5.694 8.13c.464-.264.91-.583 1.306-.952V10c0 2.21-3.134 4-7 4s-7-1.79-7-4V8.178c.396.37.842.688 1.306.953C5.838 10.006 7.854 10.5 10 10.5s4.162-.494 5.694-1.37zM3 13.179V15c0 2.21 3.134 4 7 4s7-1.79 7-4v-1.822c-.396.37-.842.688-1.306.953-1.532.875-3.548 1.369-5.694 1.369s-4.162-.494-5.694-1.37A7.009 7.009 0 013 13.179z\"\r\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Models')}</div>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t{/if}\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition {selectedTab ===\r\n\t\t\t\t\t'interface'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-700'\r\n\t\t\t\t\t\t: ' hover:bg-gray-300 dark:hover:bg-gray-800'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'interface';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M2 4.25A2.25 2.25 0 0 1 4.25 2h7.5A2.25 2.25 0 0 1 14 4.25v5.5A2.25 2.25 0 0 1 11.75 12h-1.312c.1.128.21.248.328.36a.75.75 0 0 1 .234.545v.345a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-.345a.75.75 0 0 1 .234-.545c.118-.111.228-.232.328-.36H4.25A2.25 2.25 0 0 1 2 9.75v-5.5Zm2.25-.75a.75.75 0 0 0-.75.75v4.5c0 .414.336.75.75.75h7.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 0 0-.75-.75h-7.5Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Interface')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition {selectedTab ===\r\n\t\t\t\t\t'personalization'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-700'\r\n\t\t\t\t\t\t: ' hover:bg-gray-300 dark:hover:bg-gray-800'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'personalization';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<User />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Personalization')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition {selectedTab ===\r\n\t\t\t\t\t'audio'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-700'\r\n\t\t\t\t\t\t: ' hover:bg-gray-300 dark:hover:bg-gray-800'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'audio';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"M7.557 2.066A.75.75 0 0 1 8 2.75v10.5a.75.75 0 0 1-1.248.56L3.59 11H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.59l3.162-2.81a.75.75 0 0 1 .805-.124ZM12.95 3.05a.75.75 0 1 0-1.06 1.06 5.5 5.5 0 0 1 0 7.78.75.75 0 1 0 1.06 1.06 7 7 0 0 0 0-9.9Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"M10.828 5.172a.75.75 0 1 0-1.06 1.06 2.5 2.5 0 0 1 0 3.536.75.75 0 1 0 1.06 1.06 4 4 0 0 0 0-5.656Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Audio')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<!-- {#if $user.role === 'admin'}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition {selectedTab ===\r\n\t\t\t\t\t\t'images'\r\n\t\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-700'\r\n\t\t\t\t\t\t\t: ' hover:bg-gray-300 dark:hover:bg-gray-800'}\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tselectedTab = 'images';\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\td=\"M2 4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Zm10.5 5.707a.5.5 0 0 0-.146-.353l-1-1a.5.5 0 0 0-.708 0L9.354 9.646a.5.5 0 0 1-.708 0L6.354 7.354a.5.5 0 0 0-.708 0l-2 2a.5.5 0 0 0-.146.353V12a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V9.707ZM12 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"\r\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Images')}</div>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t{/if} -->\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition {selectedTab ===\r\n\t\t\t\t\t'chats'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-700'\r\n\t\t\t\t\t\t: ' hover:bg-gray-300 dark:hover:bg-gray-800'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'chats';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M8 2C4.262 2 1 4.57 1 8c0 1.86.98 3.486 2.455 4.566a3.472 3.472 0 0 1-.469 1.26.75.75 0 0 0 .713 1.14 6.961 6.961 0 0 0 3.06-1.06c.403.062.818.094 1.241.094 3.738 0 7-2.57 7-6s-3.262-6-7-6ZM5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm7-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Chats')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition {selectedTab ===\r\n\t\t\t\t\t'account'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-700'\r\n\t\t\t\t\t\t: ' hover:bg-gray-300 dark:hover:bg-gray-800'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'account';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-5-2a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM8 9c-1.825 0-3.422.977-4.295 2.437A5.49 5.49 0 0 0 8 13.5a5.49 5.49 0 0 0 4.294-2.063A4.997 4.997 0 0 0 8 9Z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('Account')}</div>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<!-- <button\r\n\t\t\t\t\tclass=\"px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition {selectedTab ===\r\n\t\t\t\t\t'about'\r\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-700'\r\n\t\t\t\t\t\t: ' hover:bg-gray-300 dark:hover:bg-gray-800'}\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedTab = 'about';\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center mr-2\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\" self-center\">{$i18n.t('About')}</div>\r\n\t\t\t\t</button> -->\r\n\t\t\t</div>\r\n\t\t\t<div class=\"flex-1 md:min-h-[28rem]\">\r\n\t\t\t\t{#if selectedTab === 'general'}\r\n\t\t\t\t\t<General\r\n\t\t\t\t\t\t{getModels}\r\n\t\t\t\t\t\t{saveSettings}\r\n\t\t\t\t\t\ton:save={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'models'}\r\n\t\t\t\t\t<Models {getModels} />\r\n\t\t\t\t{:else if selectedTab === 'connections'}\r\n\t\t\t\t\t<Connections\r\n\t\t\t\t\t\t{getModels}\r\n\t\t\t\t\t\ton:save={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'interface'}\r\n\t\t\t\t\t<Interface\r\n\t\t\t\t\t\t{saveSettings}\r\n\t\t\t\t\t\ton:save={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'personalization'}\r\n\t\t\t\t\t<Personalization\r\n\t\t\t\t\t\t{saveSettings}\r\n\t\t\t\t\t\ton:save={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'audio'}\r\n\t\t\t\t\t<Audio\r\n\t\t\t\t\t\t{saveSettings}\r\n\t\t\t\t\t\ton:save={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'images'}\r\n\t\t\t\t\t<Images\r\n\t\t\t\t\t\t{saveSettings}\r\n\t\t\t\t\t\ton:save={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'chats'}\r\n\t\t\t\t\t<Chats {saveSettings} />\r\n\t\t\t\t{:else if selectedTab === 'account'}\r\n\t\t\t\t\t<Account\r\n\t\t\t\t\t\tsaveHandler={() => {\r\n\t\t\t\t\t\t\ttoast.success($i18n.t('Settings saved successfully!'));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t{:else if selectedTab === 'about'}\r\n\t\t\t\t\t<About />\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n\r\n<style>\r\n\tinput::-webkit-outer-spin-button,\r\n\tinput::-webkit-inner-spin-button {\r\n\t\t/* display: none; <- Crashes Chrome on hover */\r\n\t\t-webkit-appearance: none;\r\n\t\tmargin: 0; /* <-- Apparently some margin are still there even though it's hidden */\r\n\t}\r\n\r\n\t.tabs::-webkit-scrollbar {\r\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\r\n\t}\r\n\r\n\t.tabs {\r\n\t\t-ms-overflow-style: none; /* IE and Edge */\r\n\t\tscrollbar-width: none; /* Firefox */\r\n\t}\r\n\r\n\tinput[type='number'] {\r\n\t\t-moz-appearance: textfield; /* Firefox */\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\texport let className = 'w-4 h-4';\r\n\texport let strokeWidth = '1.5';\r\n</script>\r\n\r\n<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"none\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tstroke=\"currentColor\"\r\n\tclass={className}\r\n>\r\n\t<path\r\n\t\tstroke-linecap=\"round\"\r\n\t\tstroke-linejoin=\"round\"\r\n\t\td=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125\"\r\n\t/>\r\n</svg>\r\n","<script lang=\"ts\">\r\n\timport { DropdownMenu } from 'bits-ui';\r\n\timport { flyAndScale } from '$lib/utils/transitions';\r\n\timport { getContext } from 'svelte';\r\n\r\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\r\n\timport GarbageBin from '$lib/components/icons/GarbageBin.svelte';\r\n\timport Pencil from '$lib/components/icons/Pencil.svelte';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\timport Tags from '$lib/components/chat/Tags.svelte';\r\n\timport Share from '$lib/components/icons/Share.svelte';\r\n\timport ArchiveBox from '$lib/components/icons/ArchiveBox.svelte';\r\n\timport DocumentDuplicate from '$lib/components/icons/DocumentDuplicate.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let shareHandler: Function;\r\n\texport let cloneChatHandler: Function;\r\n\texport let archiveChatHandler: Function;\r\n\texport let renameHandler: Function;\r\n\texport let deleteHandler: Function;\r\n\texport let onClose: Function;\r\n\r\n\texport let chatId = '';\r\n\r\n\tlet show = false;\r\n</script>\r\n\r\n<Dropdown\r\n\tbind:show\r\n\ton:change={(e) => {\r\n\t\tif (e.detail === false) {\r\n\t\t\tonClose();\r\n\t\t}\r\n\t}}\r\n>\r\n\t<Tooltip content={$i18n.t('More')}>\r\n\t\t<slot />\r\n\t</Tooltip>\r\n\r\n\t<div slot=\"content\">\r\n\t\t<DropdownMenu.Content\r\n\t\t\tclass=\"w-full max-w-[180px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow\"\r\n\t\t\tsideOffset={-2}\r\n\t\t\tside=\"bottom\"\r\n\t\t\talign=\"start\"\r\n\t\t\ttransition={flyAndScale}\r\n\t\t>\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\trenameHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Pencil strokeWidth=\"2\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Rename')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tcloneChatHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<DocumentDuplicate strokeWidth=\"2\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Clone')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tarchiveChatHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<ArchiveBox strokeWidth=\"2\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Archive')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshareHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Share />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Share')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tdeleteHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<GarbageBin strokeWidth=\"2\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Delete')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<hr class=\"border-gray-100 dark:border-gray-800 mt-2.5 mb-1.5\" />\r\n\r\n\t\t\t<div class=\"flex p-1\">\r\n\t\t\t\t<Tags\r\n\t\t\t\t\t{chatId}\r\n\t\t\t\t\ton:close={() => {\r\n\t\t\t\t\t\tshow = false;\r\n\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</DropdownMenu.Content>\r\n\t</div>\r\n</Dropdown>\r\n","<script lang=\"ts\">\r\n\timport fileSaver from 'file-saver';\r\n\tconst { saveAs } = fileSaver;\r\n\timport { toast } from 'svelte-sonner';\r\n\timport dayjs from 'dayjs';\r\n\timport { getContext, createEventDispatcher } from 'svelte';\r\n\r\n\tconst dispatch = createEventDispatcher();\r\n\r\n\timport Modal from '$lib/components/common/Modal.svelte';\r\n\timport {\r\n\t\tarchiveChatById,\r\n\t\tdeleteChatById,\r\n\t\tgetAllArchivedChats,\r\n\t\tgetArchivedChatList\r\n\t} from '$lib/apis/chats';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let show = false;\r\n\r\n\tlet searchValue = '';\r\n\r\n\tlet chats = [];\r\n\r\n\tconst unarchiveChatHandler = async (chatId) => {\r\n\t\tconst res = await archiveChatById(localStorage.token, chatId).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t});\r\n\r\n\t\tchats = await getArchivedChatList(localStorage.token);\r\n\r\n\t\tdispatch('change');\r\n\t};\r\n\r\n\tconst deleteChatHandler = async (chatId) => {\r\n\t\tconst res = await deleteChatById(localStorage.token, chatId).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t});\r\n\r\n\t\tchats = await getArchivedChatList(localStorage.token);\r\n\t};\r\n\r\n\tconst exportChatsHandler = async () => {\r\n\t\tconst chats = await getAllArchivedChats(localStorage.token);\r\n\t\tlet blob = new Blob([JSON.stringify(chats)], {\r\n\t\t\ttype: 'application/json'\r\n\t\t});\r\n\t\tsaveAs(blob, `archived-chat-export-${Date.now()}.json`);\r\n\t};\r\n\r\n\t$: if (show) {\r\n\t\t(async () => {\r\n\t\t\tchats = await getArchivedChatList(localStorage.token);\r\n\t\t})();\r\n\t}\r\n</script>\r\n\r\n<Modal size=\"lg\" bind:show>\r\n\t<div>\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Archived Chats')}</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-col w-full px-5 pb-4 dark:text-gray-200\">\r\n\t\t\t<div class=\" flex w-full mt-2 space-x-2\">\r\n\t\t\t\t<div class=\"flex flex-1\">\r\n\t\t\t\t\t<div class=\" self-center ml-1 mr-3\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\" w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent\"\r\n\t\t\t\t\t\tbind:value={searchValue}\r\n\t\t\t\t\t\tplaceholder={$i18n.t('Search Chats')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<hr class=\" dark:border-gray-850 my-2\" />\r\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\r\n\t\t\t\t{#if chats.length > 0}\r\n\t\t\t\t\t<div class=\"w-full\">\r\n\t\t\t\t\t\t<div class=\"text-left text-sm w-full mb-3 max-h-[22rem] overflow-y-scroll\">\r\n\t\t\t\t\t\t\t<div class=\"relative overflow-x-auto\">\r\n\t\t\t\t\t\t\t\t<table class=\"w-full text-sm text-left text-gray-600 dark:text-gray-400 table-auto\">\r\n\t\t\t\t\t\t\t\t\t<thead\r\n\t\t\t\t\t\t\t\t\t\tclass=\"text-xs text-gray-700 uppercase bg-transparent dark:text-gray-200 border-b-2 dark:border-gray-800\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2\"> {$i18n.t('Name')} </th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2 hidden md:flex\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Created At')}\r\n\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" class=\"px-3 py-2 text-right\" />\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t{#each chats.filter((c) => searchValue === '' || c.title\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(searchValue.toLowerCase())) as chat, idx}\r\n\t\t\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent {idx !== chats.length - 1 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'border-b'} dark:bg-gray-900 dark:border-gray-850 text-xs\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"px-3 py-1 w-2/3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"/c/{chat.id}\" target=\"_blank\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\" underline line-clamp-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{chat.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td class=\" px-3 py-1 hidden md:flex h-[2.5rem]\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"my-auto\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{dayjs(chat.created_at * 1000).format($i18n.t('MMMM DD, YYYY HH:mm'))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"px-3 py-1 text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex justify-end w-full\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content=\"Unarchive Chat\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm px-2 py-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tunarchiveChatHandler(chat.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"1.5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content=\"Delete Chat\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm px-2 py-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteChatHandler(chat.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"1.5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex flex-wrap text-sm font-medium gap-1.5 mt-2 m-1\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\" px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-300 dark:outline-gray-800 rounded-3xl\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\texportChatsHandler();\r\n\t\t\t\t\t\t\t\t}}>Export All Archived Chats</button\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{:else}\r\n\t\t\t\t\t<div class=\"text-left text-sm w-full mb-8\">\r\n\t\t\t\t\t\t{$i18n.t('You have no archived conversations.')}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n","<script lang=\"ts\">\r\n\timport { goto } from '$app/navigation';\r\n\timport {\r\n\t\tuser,\r\n\t\tchats,\r\n\t\tsettings,\r\n\t\tshowSettings,\r\n\t\tchatId,\r\n\t\ttags,\r\n\t\tshowSidebar,\r\n\t\tmobile,\r\n\t\tshowArchivedChats\r\n\t} from '$lib/stores';\r\n\timport { onMount, getContext } from 'svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\timport {\r\n\t\tdeleteChatById,\r\n\t\tgetChatList,\r\n\t\tgetChatById,\r\n\t\tgetChatListByTagName,\r\n\t\tupdateChatById,\r\n\t\tgetAllChatTags,\r\n\t\tarchiveChatById,\r\n\t\tcloneChatById\r\n\t} from '$lib/apis/chats';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { fade, slide } from 'svelte/transition';\r\n\timport { WEBUI_BASE_URL } from '$lib/constants';\r\n\timport Tooltip from '../common/Tooltip.svelte';\r\n\timport ChatMenu from './Sidebar/ChatMenu.svelte';\r\n\timport ShareChatModal from '../chat/ShareChatModal.svelte';\r\n\timport ArchiveBox from '../icons/ArchiveBox.svelte';\r\n\timport ArchivedChatsModal from './Sidebar/ArchivedChatsModal.svelte';\r\n\timport UserMenu from './Sidebar/UserMenu.svelte';\r\n\timport { updateUserSettings } from '$lib/apis/users';\r\n\r\n\tconst BREAKPOINT = 768;\r\n\r\n\tlet show = false;\r\n\tlet navElement;\r\n\r\n\tlet title: string = 'UI';\r\n\tlet search = '';\r\n\r\n\tlet shareChatId = null;\r\n\r\n\tlet selectedChatId = null;\r\n\r\n\tlet chatDeleteId = null;\r\n\tlet chatTitleEditId = null;\r\n\tlet chatTitle = '';\r\n\r\n\tlet showShareChatModal = false;\r\n\tlet showDropdown = false;\r\n\tlet isEditing = false;\r\n\r\n\tlet filteredChatList = [];\r\n\r\n\t$: filteredChatList = $chats.filter((chat) => {\r\n\t\tif (search === '') {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tlet title = chat.title.toLowerCase();\r\n\t\t\tconst query = search.toLowerCase();\r\n\r\n\t\t\tlet contentMatches = false;\r\n\t\t\t// Access the messages within chat.chat.messages\r\n\t\t\tif (chat.chat && chat.chat.messages && Array.isArray(chat.chat.messages)) {\r\n\t\t\t\tcontentMatches = chat.chat.messages.some((message) => {\r\n\t\t\t\t\t// Check if message.content exists and includes the search query\r\n\t\t\t\t\treturn message.content && message.content.toLowerCase().includes(query);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn title.includes(query) || contentMatches;\r\n\t\t}\r\n\t});\r\n\r\n\tmobile;\r\n\tconst onResize = () => {\r\n\t\tif ($showSidebar && window.innerWidth < BREAKPOINT) {\r\n\t\t\tshowSidebar.set(false);\r\n\t\t}\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tmobile.subscribe((e) => {\r\n\t\t\tif ($showSidebar && e) {\r\n\t\t\t\tshowSidebar.set(false);\r\n\t\t\t}\r\n\r\n\t\t\tif (!$showSidebar && !e) {\r\n\t\t\t\tshowSidebar.set(true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tshowSidebar.set(window.innerWidth > BREAKPOINT);\r\n\t\tawait chats.set(await getChatList(localStorage.token));\r\n\r\n\t\tlet touchstart;\r\n\t\tlet touchend;\r\n\r\n\t\tfunction checkDirection() {\r\n\t\t\tconst screenWidth = window.innerWidth;\r\n\t\t\tconst swipeDistance = Math.abs(touchend.screenX - touchstart.screenX);\r\n\t\t\tif (touchstart.clientX < 40 && swipeDistance >= screenWidth / 8) {\r\n\t\t\t\tif (touchend.screenX < touchstart.screenX) {\r\n\t\t\t\t\tshowSidebar.set(false);\r\n\t\t\t\t}\r\n\t\t\t\tif (touchend.screenX > touchstart.screenX) {\r\n\t\t\t\t\tshowSidebar.set(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst onTouchStart = (e) => {\r\n\t\t\ttouchstart = e.changedTouches[0];\r\n\t\t\tconsole.log(touchstart.clientX);\r\n\t\t};\r\n\r\n\t\tconst onTouchEnd = (e) => {\r\n\t\t\ttouchend = e.changedTouches[0];\r\n\t\t\tcheckDirection();\r\n\t\t};\r\n\r\n\t\twindow.addEventListener('touchstart', onTouchStart);\r\n\t\twindow.addEventListener('touchend', onTouchEnd);\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('touchstart', onTouchStart);\r\n\t\t\twindow.removeEventListener('touchend', onTouchEnd);\r\n\t\t};\r\n\t});\r\n\r\n\t// Helper function to fetch and add chat content to each chat\r\n\tconst enrichChatsWithContent = async (chatList) => {\r\n\t\tconst enrichedChats = await Promise.all(\r\n\t\t\tchatList.map(async (chat) => {\r\n\t\t\t\tconst chatDetails = await getChatById(localStorage.token, chat.id).catch((error) => null); // Handle error or non-existent chat gracefully\r\n\t\t\t\tif (chatDetails) {\r\n\t\t\t\t\tchat.chat = chatDetails.chat; // Assuming chatDetails.chat contains the chat content\r\n\t\t\t\t}\r\n\t\t\t\treturn chat;\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\tawait chats.set(enrichedChats);\r\n\t};\r\n\r\n\tconst loadChat = async (id) => {\r\n\t\tgoto(`/c/${id}`);\r\n\t};\r\n\r\n\tconst editChatTitle = async (id, _title) => {\r\n\t\tif (_title === '') {\r\n\t\t\ttoast.error($i18n.t('Title cannot be an empty string.'));\r\n\t\t} else {\r\n\t\t\ttitle = _title;\r\n\r\n\t\t\tawait updateChatById(localStorage.token, id, {\r\n\t\t\t\ttitle: _title\r\n\t\t\t});\r\n\t\t\tawait chats.set(await getChatList(localStorage.token));\r\n\t\t}\r\n\t};\r\n\r\n\tconst deleteChat = async (id) => {\r\n\t\tconst res = await deleteChatById(localStorage.token, id).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t\tchatDeleteId = null;\r\n\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\tif ($chatId === id) {\r\n\t\t\t\tgoto('/');\r\n\t\t\t}\r\n\r\n\t\t\tawait chats.set(await getChatList(localStorage.token));\r\n\t\t}\r\n\t};\r\n\r\n\tconst cloneChatHandler = async (id) => {\r\n\t\tconst res = await cloneChatById(localStorage.token, id).catch((error) => {\r\n\t\t\ttoast.error(error);\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\tgoto(`/c/${res.id}`);\r\n\t\t\tawait chats.set(await getChatList(localStorage.token));\r\n\t\t}\r\n\t};\r\n\r\n\tconst saveSettings = async (updated) => {\r\n\t\tawait settings.set({ ...$settings, ...updated });\r\n\t\tawait updateUserSettings(localStorage.token, { ui: $settings });\r\n\t\tlocation.href = '/';\r\n\t};\r\n\r\n\tconst archiveChatHandler = async (id) => {\r\n\t\tawait archiveChatById(localStorage.token, id);\r\n\t\tawait chats.set(await getChatList(localStorage.token));\r\n\t};\r\n\r\n\tconst focusEdit = async (node: HTMLInputElement) => {\r\n\t\tnode.focus();\r\n\t};\r\n</script>\r\n\r\n<ShareChatModal bind:show={showShareChatModal} chatId={shareChatId} />\r\n<ArchivedChatsModal\r\n\tbind:show={$showArchivedChats}\r\n\ton:change={async () => {\r\n\t\tawait chats.set(await getChatList(localStorage.token));\r\n\t}}\r\n/>\r\n\r\n<!-- svelte-ignore a11y-no-static-element-interactions -->\r\n\r\n{#if $showSidebar}\r\n\t<div\r\n\t\tclass=\" fixed md:hidden z-40 top-0 right-0 left-0 bottom-0 bg-black/60 w-full min-h-screen h-screen flex justify-center overflow-hidden overscroll-contain\"\r\n\t\ton:mousedown={() => {\r\n\t\t\tshowSidebar.set(!$showSidebar);\r\n\t\t}}\r\n\t/>\r\n{/if}\r\n\r\n<div\r\n\tbind:this={navElement}\r\n\tid=\"sidebar\"\r\n\tclass=\"h-screen max-h-[100dvh] min-h-screen select-none {$showSidebar\r\n\t\t? 'md:relative w-[260px]'\r\n\t\t: '-translate-x-[260px] w-[0px]'} bg-gray-50 text-gray-900 dark:bg-gray-950 dark:text-gray-200 text-sm transition fixed z-50 top-0 left-0 rounded-r-2xl\r\n        \"\r\n\tdata-state={$showSidebar}\r\n>\r\n\t<div\r\n\t\tclass=\"py-2.5 my-auto flex flex-col justify-between h-screen max-h-[100dvh] w-[260px] z-50 {$showSidebar\r\n\t\t\t? ''\r\n\t\t\t: 'invisible'}\"\r\n\t>\r\n\t\t<div class=\"px-2.5 flex justify-between space-x-1 text-gray-600 dark:text-gray-400\">\r\n\t\t\t<a\r\n\t\t\t\tid=\"sidebar-new-chat-button\"\r\n\t\t\t\tclass=\"flex flex-1 justify-between rounded-xl px-2 py-2 hover:bg-gray-100 dark:hover:bg-gray-850 transition\"\r\n\t\t\t\thref=\"/\"\r\n\t\t\t\tdraggable=\"false\"\r\n\t\t\t\ton:click={async () => {\r\n\t\t\t\t\tselectedChatId = null;\r\n\r\n\t\t\t\t\tawait goto('/');\r\n\t\t\t\t\tconst newChatButton = document.getElementById('new-chat-button');\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tnewChatButton?.click();\r\n\r\n\t\t\t\t\t\tif ($mobile) {\r\n\t\t\t\t\t\t\tshowSidebar.set(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div class=\"self-center mx-1.5\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tcrossorigin=\"anonymous\"\r\n\t\t\t\t\t\tsrc=\"{WEBUI_BASE_URL}/static/favicon.png\"\r\n\t\t\t\t\t\tclass=\" size-6 -translate-x-1.5 rounded-full\"\r\n\t\t\t\t\t\talt=\"logo\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\" self-center font-medium text-sm text-gray-850 dark:text-white\">\r\n\t\t\t\t\t{$i18n.t('New Chat')}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"self-center ml-auto\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"size-5\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\td=\"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\td=\"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n\r\n\t\t\t<button\r\n\t\t\t\tclass=\" cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshowSidebar.set(!$showSidebar);\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div class=\" m-auto self-center\">\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\tstroke-width=\"2\"\r\n\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\tclass=\"size-5\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\td=\"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t{#if $user?.role === 'admin'}\r\n\t\t\t<div class=\"px-2.5 flex justify-center text-gray-800 dark:text-gray-200\">\r\n\t\t\t\t<a\r\n\t\t\t\t\tclass=\"flex-grow flex space-x-3 rounded-xl px-2.5 py-2 hover:bg-gray-100 dark:hover:bg-gray-900 transition\"\r\n\t\t\t\t\thref=\"/workspace\"\r\n\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\tselectedChatId = null;\r\n\t\t\t\t\t\tchatId.set('');\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdraggable=\"false\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"self-center\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke-width=\"2\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"size-[1.1rem]\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t\td=\"M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 0 0 2.25-2.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v2.25A2.25 2.25 0 0 0 6 10.5Zm0 9.75h2.25A2.25 2.25 0 0 0 10.5 18v-2.25a2.25 2.25 0 0 0-2.25-2.25H6a2.25 2.25 0 0 0-2.25 2.25V18A2.25 2.25 0 0 0 6 20.25Zm9.75-9.75H18a2.25 2.25 0 0 0 2.25-2.25V6A2.25 2.25 0 0 0 18 3.75h-2.25A2.25 2.25 0 0 0 13.5 6v2.25a2.25 2.25 0 0 0 2.25 2.25Z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex self-center\">\r\n\t\t\t\t\t\t<div class=\" self-center font-medium text-sm\">{$i18n.t('Workspace')}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t{/if}\r\n\r\n\t\t<div class=\"relative flex flex-col flex-1 overflow-y-auto\">\r\n\t\t\t{#if !($settings.saveChatHistory ?? true)}\r\n\t\t\t\t<div class=\"absolute z-40 w-full h-full bg-gray-50/90 dark:bg-black/90 flex justify-center\">\r\n\t\t\t\t\t<div class=\" text-left px-5 py-2\">\r\n\t\t\t\t\t\t<div class=\" font-medium\">{$i18n.t('Chat History is off for this browser.')}</div>\r\n\t\t\t\t\t\t<div class=\"text-xs mt-2\">\r\n\t\t\t\t\t\t\t{$i18n.t(\r\n\t\t\t\t\t\t\t\t\"When history is turned off, new chats on this browser won't appear in your history on any of your devices.\"\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<span class=\" font-semibold\"\r\n\t\t\t\t\t\t\t\t>{$i18n.t('This setting does not sync across browsers or devices.')}</span\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"mt-3\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"flex justify-center items-center space-x-1.5 px-3 py-2.5 rounded-lg text-xs bg-gray-100 hover:bg-gray-200 transition text-gray-800 font-medium w-full\"\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\tsaveSettings({\r\n\t\t\t\t\t\t\t\t\t\tsaveChatHistory: true\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tclass=\"w-3 h-3\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M8 1a.75.75 0 0 1 .75.75v6.5a.75.75 0 0 1-1.5 0v-6.5A.75.75 0 0 1 8 1ZM4.11 3.05a.75.75 0 0 1 0 1.06 5.5 5.5 0 1 0 7.78 0 .75.75 0 0 1 1.06-1.06 7 7 0 1 1-9.9 0 .75.75 0 0 1 1.06 0Z\"\r\n\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\r\n\t\t\t\t\t\t\t\t<div>{$i18n.t('Enable Chat History')}</div>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<div class=\"px-2 mt-0.5 mb-2 flex justify-center space-x-2\">\r\n\t\t\t\t<div class=\"flex w-full rounded-xl\" id=\"chat-search\">\r\n\t\t\t\t\t<div class=\"self-center pl-3 py-2 rounded-l-xl bg-transparent\">\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\td=\"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z\"\r\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"w-full rounded-r-xl py-1.5 pl-2.5 pr-4 text-sm bg-transparent dark:text-gray-300 outline-none\"\r\n\t\t\t\t\t\tplaceholder={$i18n.t('Search')}\r\n\t\t\t\t\t\tbind:value={search}\r\n\t\t\t\t\t\ton:focus={() => {\r\n\t\t\t\t\t\t\tenrichChatsWithContent($chats);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{#if $tags.length > 0}\r\n\t\t\t\t<div class=\"px-2.5 mb-2 flex gap-1 flex-wrap\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"px-2.5 text-xs font-medium bg-gray-50 dark:bg-gray-900 dark:hover:bg-gray-800 transition rounded-full\"\r\n\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\tawait chats.set(await getChatList(localStorage.token));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{$i18n.t('all')}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t{#each $tags as tag}\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"px-2.5 text-xs font-medium bg-gray-50 dark:bg-gray-900 dark:hover:bg-gray-800 transition rounded-full\"\r\n\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\tlet chatIds = await getChatListByTagName(localStorage.token, tag.name);\r\n\t\t\t\t\t\t\t\tif (chatIds.length === 0) {\r\n\t\t\t\t\t\t\t\t\tawait tags.set(await getAllChatTags(localStorage.token));\r\n\t\t\t\t\t\t\t\t\tchatIds = await getChatList(localStorage.token);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tawait chats.set(chatIds);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{tag.name}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<div class=\"pl-2 my-2 flex-1 flex flex-col space-y-1 overflow-y-auto scrollbar-hidden\">\r\n\t\t\t\t{#each filteredChatList as chat, idx}\r\n\t\t\t\t\t{#if idx === 0 || (idx > 0 && chat.time_range !== filteredChatList[idx - 1].time_range)}\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclass=\"w-full pl-2.5 text-xs text-gray-500 dark:text-gray-500 font-medium {idx === 0\r\n\t\t\t\t\t\t\t\t? ''\r\n\t\t\t\t\t\t\t\t: 'pt-5'} pb-0.5\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{$i18n.t(chat.time_range)}\r\n\t\t\t\t\t\t\t<!-- localisation keys for time_range to be recognized from the i18next parser (so they don't get automatically removed):\r\n\t\t\t\t\t\t\t{$i18n.t('Today')}\r\n\t\t\t\t\t\t\t{$i18n.t('Yesterday')}\r\n\t\t\t\t\t\t\t{$i18n.t('Previous 7 days')}\r\n\t\t\t\t\t\t\t{$i18n.t('Previous 30 days')}\r\n\t\t\t\t\t\t\t{$i18n.t('January')}\r\n\t\t\t\t\t\t\t{$i18n.t('February')}\r\n\t\t\t\t\t\t\t{$i18n.t('March')}\r\n\t\t\t\t\t\t\t{$i18n.t('April')}\r\n\t\t\t\t\t\t\t{$i18n.t('May')}\r\n\t\t\t\t\t\t\t{$i18n.t('June')}\r\n\t\t\t\t\t\t\t{$i18n.t('July')}\r\n\t\t\t\t\t\t\t{$i18n.t('August')}\r\n\t\t\t\t\t\t\t{$i18n.t('September')}\r\n\t\t\t\t\t\t\t{$i18n.t('October')}\r\n\t\t\t\t\t\t\t{$i18n.t('November')}\r\n\t\t\t\t\t\t\t{$i18n.t('December')}\r\n\t\t\t\t\t\t\t-->\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{/if}\r\n\r\n\t\t\t\t\t<div class=\" w-full pr-2 relative group\">\r\n\t\t\t\t\t\t{#if chatTitleEditId === chat.id}\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" w-full flex justify-between rounded-xl px-3 py-2 {chat.id === $chatId ||\r\n\t\t\t\t\t\t\t\tchat.id === chatTitleEditId ||\r\n\t\t\t\t\t\t\t\tchat.id === chatDeleteId\r\n\t\t\t\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-900'\r\n\t\t\t\t\t\t\t\t\t: chat.id === selectedChatId\r\n\t\t\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-950'\r\n\t\t\t\t\t\t\t\t\t: 'group-hover:bg-gray-100 dark:group-hover:bg-gray-950'}  whitespace-nowrap text-ellipsis\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tuse:focusEdit\r\n\t\t\t\t\t\t\t\t\tbind:value={chatTitle}\r\n\t\t\t\t\t\t\t\t\tclass=\" bg-transparent w-full outline-none mr-10\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tclass=\" w-full flex justify-between rounded-xl px-3 py-2 {chat.id === $chatId ||\r\n\t\t\t\t\t\t\t\tchat.id === chatTitleEditId ||\r\n\t\t\t\t\t\t\t\tchat.id === chatDeleteId\r\n\t\t\t\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-900'\r\n\t\t\t\t\t\t\t\t\t: chat.id === selectedChatId\r\n\t\t\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-950'\r\n\t\t\t\t\t\t\t\t\t: ' group-hover:bg-gray-100 dark:group-hover:bg-gray-950'}  whitespace-nowrap text-ellipsis\"\r\n\t\t\t\t\t\t\t\thref=\"/c/{chat.id}\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\tselectedChatId = chat.id;\r\n\t\t\t\t\t\t\t\t\tif ($mobile) {\r\n\t\t\t\t\t\t\t\t\t\tshowSidebar.set(false);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ton:dblclick={() => {\r\n\t\t\t\t\t\t\t\t\tchatTitle = chat.title;\r\n\t\t\t\t\t\t\t\t\tchatTitleEditId = chat.id;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tdraggable=\"false\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div class=\" flex self-center flex-1 w-full\">\r\n\t\t\t\t\t\t\t\t\t<div class=\" text-left self-center overflow-hidden w-full h-[20px]\">\r\n\t\t\t\t\t\t\t\t\t\t{chat.title}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t{/if}\r\n\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclass=\"\r\n\r\n\t\t\t\t\t\t\t{chat.id === $chatId || chat.id === chatTitleEditId || chat.id === chatDeleteId\r\n\t\t\t\t\t\t\t\t? 'from-gray-200 dark:from-gray-900'\r\n\t\t\t\t\t\t\t\t: chat.id === selectedChatId\r\n\t\t\t\t\t\t\t\t? 'from-gray-100 dark:from-gray-950'\r\n\t\t\t\t\t\t\t\t: 'invisible group-hover:visible from-gray-100 dark:from-gray-950'}\r\n\t\t\t\t\t\t\t\tabsolute right-[10px] top-[10px] pr-2 pl-5 bg-gradient-to-l from-80%\r\n\r\n\t\t\t\t\t\t\t\t  to-transparent\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{#if chatTitleEditId === chat.id}\r\n\t\t\t\t\t\t\t\t<div class=\"flex self-center space-x-1.5 z-10\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\" self-center dark:hover:text-white transition\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\teditChatTitle(chat.id, chatTitle);\r\n\t\t\t\t\t\t\t\t\t\t\tchatTitleEditId = null;\r\n\t\t\t\t\t\t\t\t\t\t\tchatTitle = '';\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\" self-center dark:hover:text-white transition\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tchatTitleEditId = null;\r\n\t\t\t\t\t\t\t\t\t\t\tchatTitle = '';\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{:else if chatDeleteId === chat.id}\r\n\t\t\t\t\t\t\t\t<div class=\"flex self-center space-x-1.5 z-10\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\" self-center dark:hover:text-white transition\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteChat(chat.id);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\" self-center dark:hover:text-white transition\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tchatDeleteId = null;\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t<div class=\"flex self-center space-x-1 z-10\">\r\n\t\t\t\t\t\t\t\t\t<ChatMenu\r\n\t\t\t\t\t\t\t\t\t\tchatId={chat.id}\r\n\t\t\t\t\t\t\t\t\t\tcloneChatHandler={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tcloneChatHandler(chat.id);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tshareHandler={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tshareChatId = selectedChatId;\r\n\t\t\t\t\t\t\t\t\t\t\tshowShareChatModal = true;\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tarchiveChatHandler={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tarchiveChatHandler(chat.id);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\trenameHandler={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tchatTitle = chat.title;\r\n\t\t\t\t\t\t\t\t\t\t\tchatTitleEditId = chat.id;\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tdeleteHandler={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tchatDeleteId = chat.id;\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonClose={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tselectedChatId = null;\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"Chat Menu\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\" self-center dark:hover:text-white transition\"\r\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedChatId = chat.id;\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M2 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM6.5 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM12.5 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</ChatMenu>\r\n\r\n\t\t\t\t\t\t\t\t\t{#if chat.id === $chatId}\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"delete-chat-button\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"hidden\"\r\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tchatDeleteId = chat.id;\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M2 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM6.5 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM12.5 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{/each}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"px-2.5\">\r\n\t\t\t<!-- <hr class=\" border-gray-900 mb-1 w-full\" /> -->\r\n\r\n\t\t\t<div class=\"flex flex-col\">\r\n\t\t\t\t{#if $user !== undefined}\r\n\t\t\t\t\t<UserMenu\r\n\t\t\t\t\t\trole={$user.role}\r\n\t\t\t\t\t\ton:show={(e) => {\r\n\t\t\t\t\t\t\tif (e.detail === 'archived-chat') {\r\n\t\t\t\t\t\t\t\tshowArchivedChats.set(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\" flex rounded-xl py-3 px-3.5 w-full hover:bg-gray-100 dark:hover:bg-gray-900 transition\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tshowDropdown = !showDropdown;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div class=\" self-center mr-3\">\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={$user.profile_image_url}\r\n\t\t\t\t\t\t\t\t\tclass=\" max-w-[30px] object-cover rounded-full\"\r\n\t\t\t\t\t\t\t\t\talt=\"User profile\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\" self-center font-semibold\">{$user.name}</div>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</UserMenu>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<!-- <div\r\n\t\tid=\"sidebar-handle\"\r\n\t\tclass=\" hidden md:fixed left-0 top-[50dvh] -translate-y-1/2 transition-transform translate-x-[255px] md:translate-x-[260px] rotate-0\"\r\n\t>\r\n\t\t<Tooltip\r\n\t\t\tplacement=\"right\"\r\n\t\t\tcontent={`${$showSidebar ? $i18n.t('Close') : $i18n.t('Open')} ${$i18n.t('sidebar')}`}\r\n\t\t\ttouch={false}\r\n\t\t>\r\n\t\t\t<button\r\n\t\t\t\tid=\"sidebar-toggle-button\"\r\n\t\t\t\tclass=\" group\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshowSidebar.set(!$showSidebar);\r\n\t\t\t\t}}\r\n\t\t\t\t><span class=\"\" data-state=\"closed\"\r\n\t\t\t\t\t><div\r\n\t\t\t\t\t\tclass=\"flex h-[72px] w-8 items-center justify-center opacity-50 group-hover:opacity-100 transition\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div class=\"flex h-6 w-6 flex-col items-center\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"h-3 w-1 rounded-full bg-[#0f0f0f] dark:bg-white rotate-0 translate-y-[0.15rem] {$showSidebar\r\n\t\t\t\t\t\t\t\t\t? 'group-hover:rotate-[15deg]'\r\n\t\t\t\t\t\t\t\t\t: 'group-hover:rotate-[-15deg]'}\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"h-3 w-1 rounded-full bg-[#0f0f0f] dark:bg-white rotate-0 translate-y-[-0.15rem] {$showSidebar\r\n\t\t\t\t\t\t\t\t\t? 'group-hover:rotate-[-15deg]'\r\n\t\t\t\t\t\t\t\t\t: 'group-hover:rotate-[15deg]'}\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t</Tooltip>\r\n\t</div> -->\r\n</div>\r\n\r\n<style>\r\n\t.scrollbar-hidden:active::-webkit-scrollbar-thumb,\r\n\t.scrollbar-hidden:focus::-webkit-scrollbar-thumb,\r\n\t.scrollbar-hidden:hover::-webkit-scrollbar-thumb {\r\n\t\tvisibility: visible;\r\n\t}\r\n\t.scrollbar-hidden::-webkit-scrollbar-thumb {\r\n\t\tvisibility: hidden;\r\n\t}\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { getContext } from 'svelte';\r\n\timport Modal from '../common/Modal.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let show = false;\r\n</script>\r\n\r\n<Modal bind:show>\r\n\t<div class=\"text-gray-700 dark:text-gray-100\">\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Keyboard shortcuts')}</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200\">\r\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\r\n\t\t\t\t<div class=\"flex flex-col space-y-3 w-full self-start\">\r\n\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" text-sm\">{$i18n.t('Open new chat')}</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex space-x-1 text-xs\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCtrl/\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tShift\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tO\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" text-sm\">{$i18n.t('Focus chat input')}</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex space-x-1 text-xs\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tShift\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tEsc\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" text-sm\">{$i18n.t('Copy last code block')}</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex space-x-1 text-xs\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCtrl/\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tShift\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t;\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" text-sm\">{$i18n.t('Copy last response')}</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex space-x-1 text-xs\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCtrl/\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tShift\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tC\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"flex flex-col space-y-3 w-full self-start\">\r\n\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" text-sm\">{$i18n.t('Toggle settings')}</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex space-x-1 text-xs\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCtrl/\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t.\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" text-sm\">{$i18n.t('Toggle sidebar')}</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex space-x-1 text-xs\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCtrl/\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tShift\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tS\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" text-sm\">{$i18n.t('Delete chat')}</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex space-x-1 text-xs\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCtrl/\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tShift\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" text-sm\">{$i18n.t('Show shortcuts')}</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex space-x-1 text-xs\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCtrl/\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t/\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5\">\r\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Input commands')}</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200\">\r\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\r\n\t\t\t\t<div class=\"flex flex-col space-y-3 w-full self-start\">\r\n\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" text-sm\">\r\n\t\t\t\t\t\t\t{$i18n.t('Attach file')}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex space-x-1 text-xs\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t#\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" text-sm\">\r\n\t\t\t\t\t\t\t{$i18n.t('Add custom prompt')}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex space-x-1 text-xs\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t/\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" text-sm\">\r\n\t\t\t\t\t\t\t{$i18n.t('Select model')}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"flex space-x-1 text-xs\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\" h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t@\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n\r\n<style>\r\n\tinput::-webkit-outer-spin-button,\r\n\tinput::-webkit-inner-spin-button {\r\n\t\t/* display: none; <- Crashes Chrome on hover */\r\n\t\t-webkit-appearance: none;\r\n\t\tmargin: 0; /* <-- Apparently some margin are still there even though it's hidden */\r\n\t}\r\n\r\n\t.tabs::-webkit-scrollbar {\r\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\r\n\t}\r\n\r\n\t.tabs {\r\n\t\t-ms-overflow-style: none; /* IE and Edge */\r\n\t\tscrollbar-width: none; /* Firefox */\r\n\t}\r\n\r\n\tinput[type='number'] {\r\n\t\t-moz-appearance: textfield; /* Firefox */\r\n\t}\r\n</style>\r\n","<script>\r\n  import { onMount } from \"svelte\"\r\n\r\n  export let size = 10\r\n  export let x = [-0.5, 0.5]\r\n  export let y = [0.25, 1]\r\n  export let duration = 2000\r\n  export let infinite = false\r\n  export let delay = [0, 50]\r\n  export let colorRange = [0, 360]\r\n  export let colorArray = []\r\n  export let amount = 50\r\n  export let iterationCount = 1\r\n  export let fallDistance = \"100px\"\r\n  export let rounded = false\r\n  export let cone = false\r\n  export let noGravity = false\r\n  export let xSpread = 0.15\r\n  export let destroyOnComplete = true\r\n\r\n  let complete = false\r\n\r\n  onMount(() => {\r\n    if (!destroyOnComplete || infinite || iterationCount == \"infinite\") return\r\n\r\n    setTimeout(() => complete = true, (duration + delay[1]) * iterationCount)\r\n  })\r\n\r\n  function randomBetween(min, max) {\r\n    return Math.random() * (max - min) + min\r\n  }\r\n\r\n  function getColor() {\r\n    if (colorArray.length) return colorArray[Math.round(Math.random() * (colorArray.length - 1))]\r\n    else return `hsl(${Math.round(randomBetween(colorRange[0], colorRange[1]))}, 75%, 50%)`\r\n  }\r\n</script>\r\n\r\n{#if !complete}\r\n  <div class=\"confetti-holder\" class:rounded class:cone class:no-gravity={noGravity}>\r\n    {#each { length: amount } as _}\r\n      <div\r\n        class=\"confetti\"\r\n        style=\"\r\n        --fall-distance: {fallDistance};\r\n        --size: {size}px;\r\n        --color: {getColor()};\r\n        --skew: {randomBetween(-45, 45)}deg,{randomBetween(-45, 45)}deg;\r\n        --rotation-xyz: {randomBetween(-10, 10)}, {randomBetween(-10, 10)}, {randomBetween(-10, 10)};\r\n        --rotation-deg: {randomBetween(0, 360)}deg;\r\n        --translate-y-multiplier: {randomBetween(y[0], y[1])};\r\n        --translate-x-multiplier: {randomBetween(x[0], x[1])};\r\n        --scale: {0.1 * randomBetween(2, 10)};\r\n        --transition-duration: {infinite ? `calc(${duration}ms * var(--scale))` : `${duration}ms`};\r\n        --transition-delay: {randomBetween(delay[0], delay[1])}ms;\r\n        --transition-iteration-count: {infinite ? 'infinite' : iterationCount};\r\n        --x-spread: {(1 - xSpread)}\" />\r\n    {/each}\r\n  </div>\r\n{/if}\r\n\r\n<style>\r\n  .confetti-holder {\r\n    position: relative;\r\n  }\r\n\r\n  @keyframes rotate {\r\n    0% {\r\n      transform: skew(var(--skew)) rotate3d(var(--full-rotation));\r\n    }\r\n\r\n    100% {\r\n      transform: skew(var(--skew)) rotate3d(var(--rotation-xyz), calc(var(--rotation-deg) + 360deg));\r\n    }\r\n  }\r\n\r\n  @keyframes translate {\r\n    0% {\r\n      opacity: 1;\r\n    }\r\n\r\n    8% {\r\n      transform: translateY(calc(var(--translate-y) * 0.95)) translateX(calc(var(--translate-x) * (var(--x-spread) * 0.9)));\r\n      opacity: 1;\r\n    }\r\n\r\n    12% {\r\n      transform: translateY(var(--translate-y)) translateX(calc(var(--translate-x) * (var(--x-spread) * 0.95)));\r\n      opacity: 1;\r\n    }\r\n\r\n    16% {\r\n      transform: translateY(var(--translate-y)) translateX(calc(var(--translate-x) * var(--x-spread)));\r\n      opacity: 1;\r\n    }\r\n\r\n    100% {\r\n      transform: translateY(calc(var(--translate-y) + var(--fall-distance))) translateX(var(--translate-x));\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  @keyframes no-gravity-translate {\r\n    0% {\r\n      opacity: 1;\r\n    }\r\n\r\n    100% {\r\n      transform: translateY(var(--translate-y)) translateX(var(--translate-x));\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  .confetti {\r\n    --translate-y: calc(-200px * var(--translate-y-multiplier));\r\n    --translate-x: calc(200px * var(--translate-x-multiplier));\r\n    position: absolute;\r\n    height: calc(var(--size) * var(--scale));\r\n    width: calc(var(--size) * var(--scale));\r\n    animation: translate var(--transition-duration) var(--transition-delay) var(--transition-iteration-count) linear;\r\n    opacity: 0;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .confetti::before {\r\n    --full-rotation: var(--rotation-xyz), var(--rotation-deg);\r\n    content: '';\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: var(--color);\r\n    background-size: contain;\r\n    transform: skew(var(--skew)) rotate3d(var(--full-rotation));\r\n    animation: rotate var(--transition-duration) var(--transition-delay) var(--transition-iteration-count) linear;\r\n  }\r\n\r\n  .rounded .confetti::before {\r\n    border-radius: 50%;\r\n  }\r\n\r\n  .cone .confetti {\r\n    --translate-x: calc(200px * var(--translate-y-multiplier) * var(--translate-x-multiplier));\r\n  }\r\n\r\n  .no-gravity .confetti {\r\n    animation-name: no-gravity-translate;\r\n    animation-timing-function: ease-out;\r\n  }\r\n\r\n  @media (prefers-reduced-motion) {\r\n    .confetti,\r\n    .confetti::before {\r\n      animation: none;\r\n    }\r\n  }\r\n</style>\r\n","<script lang=\"ts\">\r\n\timport { onMount, getContext } from 'svelte';\r\n\timport { Confetti } from 'svelte-confetti';\r\n\r\n\timport { WEBUI_NAME, config } from '$lib/stores';\r\n\r\n\timport { WEBUI_VERSION } from '$lib/constants';\r\n\timport { getChangelog } from '$lib/apis';\r\n\r\n\timport Modal from './common/Modal.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let show = false;\r\n\r\n\tlet changelog = null;\r\n\r\n\tonMount(async () => {\r\n\t\tconst res = await getChangelog();\r\n\t\tchangelog = res;\r\n\t});\r\n</script>\r\n\r\n<Modal bind:show>\r\n\t<div class=\"px-5 pt-4 dark:text-gray-300 text-gray-700\">\r\n\t\t<div class=\"flex justify-between items-start\">\r\n\t\t\t<div class=\"text-xl font-bold\">\r\n\t\t\t\t{$i18n.t('Whats New in')}\r\n\t\t\t\t{$WEBUI_NAME}\r\n\t\t\t\t<Confetti x={[-1, -0.25]} y={[0, 0.5]} />\r\n\t\t\t</div>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"self-center\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tlocalStorage.version = $config.version;\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class=\"flex items-center mt-1\">\r\n\t\t\t<div class=\"text-sm dark:text-gray-200\">{$i18n.t('Release Notes')}</div>\r\n\t\t\t<div class=\"flex self-center w-[1px] h-6 mx-2.5 bg-gray-200 dark:bg-gray-700\" />\r\n\t\t\t<div class=\"text-sm dark:text-gray-200\">\r\n\t\t\t\tv{WEBUI_VERSION}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\" w-full p-4 px-5 text-gray-700 dark:text-gray-100\">\r\n\t\t<div class=\" overflow-y-scroll max-h-80 scrollbar-hidden\">\r\n\t\t\t<div class=\"mb-3\">\r\n\t\t\t\t{#if changelog}\r\n\t\t\t\t\t{#each Object.keys(changelog) as version}\r\n\t\t\t\t\t\t<div class=\" mb-3 pr-2\">\r\n\t\t\t\t\t\t\t<div class=\"font-bold text-xl mb-1 dark:text-white\">\r\n\t\t\t\t\t\t\t\tv{version} - {changelog[version].date}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<hr class=\" dark:border-gray-800 my-2\" />\r\n\r\n\t\t\t\t\t\t\t{#each Object.keys(changelog[version]).filter((section) => section !== 'date') as section}\r\n\t\t\t\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclass=\"font-bold uppercase text-xs {section === 'added'\r\n\t\t\t\t\t\t\t\t\t\t\t? 'text-white bg-blue-600'\r\n\t\t\t\t\t\t\t\t\t\t\t: section === 'fixed'\r\n\t\t\t\t\t\t\t\t\t\t\t? 'text-white bg-green-600'\r\n\t\t\t\t\t\t\t\t\t\t\t: section === 'changed'\r\n\t\t\t\t\t\t\t\t\t\t\t? 'text-white bg-yellow-600'\r\n\t\t\t\t\t\t\t\t\t\t\t: section === 'removed'\r\n\t\t\t\t\t\t\t\t\t\t\t? 'text-white bg-red-600'\r\n\t\t\t\t\t\t\t\t\t\t\t: ''}  w-fit px-3 rounded-full my-2.5\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{section}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"my-2.5 px-1.5\">\r\n\t\t\t\t\t\t\t\t\t\t{#each Object.keys(changelog[version][section]) as item}\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-sm mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"font-semibold uppercase\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{changelog[version][section][item].title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"mb-2 mt-1\">{changelog[version][section][item].content}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\r\n\t\t\t<button\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tlocalStorage.version = $config.version;\r\n\t\t\t\t\tshow = false;\r\n\t\t\t\t}}\r\n\t\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\r\n\t\t\t>\r\n\t\t\t\t<span class=\"relative\">{$i18n.t(\"Okay, Let's Go!\")}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</Modal>\r\n","<script lang=\"ts\">\r\n\texport let className = 'w-4 h-4';\r\n\texport let strokeWidth = '2';\r\n</script>\r\n\r\n<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"none\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tstroke=\"currentColor\"\r\n\tclass={className}\r\n>\r\n\t<path\r\n\t\tstroke-linecap=\"round\"\r\n\t\tstroke-linejoin=\"round\"\r\n\t\td=\"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z\"\r\n\t/>\r\n</svg>\r\n","<script lang=\"ts\">\r\n\texport let className = 'size-4';\r\n\texport let strokeWidth = '2';\r\n</script>\r\n\r\n<svg\r\n\taria-hidden=\"true\"\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"currentColor\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tclass={className}\r\n>\r\n\t<path\r\n\t\tfill-rule=\"evenodd\"\r\n\t\td=\"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7Zm5.01 1H5v2.01h2.01V8Zm3 0H8v2.01h2.01V8Zm3 0H11v2.01h2.01V8Zm3 0H14v2.01h2.01V8Zm3 0H17v2.01h2.01V8Zm-12 3H5v2.01h2.01V11Zm3 0H8v2.01h2.01V11Zm3 0H11v2.01h2.01V11Zm3 0H14v2.01h2.01V11Zm3 0H17v2.01h2.01V11Zm-12 3H5v2.01h2.01V14ZM8 14l-.001 2 8.011.01V14H8Zm11.01 0H17v2.01h2.01V14Z\"\r\n\t\tclip-rule=\"evenodd\"\r\n\t/>\r\n</svg>\r\n","<script lang=\"ts\">\r\n\timport { DropdownMenu } from 'bits-ui';\r\n\timport { getContext } from 'svelte';\r\n\r\n\timport { showSettings } from '$lib/stores';\r\n\timport { flyAndScale } from '$lib/utils/transitions';\r\n\r\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\r\n\timport QuestionMarkCircle from '$lib/components/icons/QuestionMarkCircle.svelte';\r\n\timport Lifebuoy from '$lib/components/icons/Lifebuoy.svelte';\r\n\timport Keyboard from '$lib/components/icons/Keyboard.svelte';\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let showDocsHandler: Function;\r\n\texport let showShortcutsHandler: Function;\r\n\r\n\texport let onClose: Function = () => {};\r\n</script>\r\n\r\n<Dropdown\r\n\ton:change={(e) => {\r\n\t\tif (e.detail === false) {\r\n\t\t\tonClose();\r\n\t\t}\r\n\t}}\r\n>\r\n\t<slot />\r\n\r\n\t<div slot=\"content\">\r\n\t\t<DropdownMenu.Content\r\n\t\t\tclass=\"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg\"\r\n\t\t\tsideOffset={4}\r\n\t\t\tside=\"top\"\r\n\t\t\talign=\"end\"\r\n\t\t\ttransition={flyAndScale}\r\n\t\t>\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\tid=\"chat-share-button\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\twindow.open('https://docs.openwebui.com', '_blank');\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<QuestionMarkCircle className=\"size-5\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Documentation')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\r\n\t\t\t<DropdownMenu.Item\r\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\r\n\t\t\t\tid=\"chat-share-button\"\r\n\t\t\t\ton:click={() => {\r\n\t\t\t\t\tshowShortcutsHandler();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Keyboard className=\"size-5\" />\r\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Keyboard shortcuts')}</div>\r\n\t\t\t</DropdownMenu.Item>\r\n\t\t</DropdownMenu.Content>\r\n\t</div>\r\n</Dropdown>\r\n","<script lang=\"ts\">\r\n\timport { onMount, tick, getContext } from 'svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\timport ShortcutsModal from '../chat/ShortcutsModal.svelte';\r\n\timport Tooltip from '../common/Tooltip.svelte';\r\n\timport HelpMenu from './Help/HelpMenu.svelte';\r\n\r\n\tlet showShortcuts = false;\r\n</script>\r\n\r\n<div class=\" hidden lg:flex fixed bottom-0 right-0 px-2 py-2 z-10\">\r\n\t<button\r\n\t\tid=\"show-shortcuts-button\"\r\n\t\tclass=\"hidden\"\r\n\t\ton:click={() => {\r\n\t\t\tshowShortcuts = !showShortcuts;\r\n\t\t}}\r\n\t/>\r\n\r\n\t<HelpMenu\r\n\t\tshowDocsHandler={() => {\r\n\t\t\tshowShortcuts = !showShortcuts;\r\n\t\t}}\r\n\t\tshowShortcutsHandler={() => {\r\n\t\t\tshowShortcuts = !showShortcuts;\r\n\t\t}}\r\n\t>\r\n\t\t<Tooltip content={$i18n.t('Help')} placement=\"left\">\r\n\t\t\t<button\r\n\t\t\t\tclass=\"text-gray-600 dark:text-gray-300 bg-gray-300/20 size-5 flex items-center justify-center text-[0.7rem] rounded-full\"\r\n\t\t\t>\r\n\t\t\t\t?\r\n\t\t\t</button>\r\n\t\t</Tooltip>\r\n\t</HelpMenu>\r\n</div>\r\n\r\n<ShortcutsModal bind:show={showShortcuts} />\r\n","<script lang=\"ts\">\r\n\timport { getAdminDetails } from '$lib/apis/auths';\r\n\timport { onMount, tick, getContext } from 'svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet adminDetails = null;\r\n\r\n\tonMount(async () => {\r\n\t\tadminDetails = await getAdminDetails(localStorage.token).catch((err) => {\r\n\t\t\tconsole.error(err);\r\n\t\t\treturn null;\r\n\t\t});\r\n\t});\r\n</script>\r\n\r\n<div class=\"fixed w-full h-full flex z-[999]\">\r\n\t<div\r\n\t\tclass=\"absolute w-full h-full backdrop-blur-lg bg-white/10 dark:bg-gray-900/50 flex justify-center\"\r\n\t>\r\n\t\t<div class=\"m-auto pb-10 flex flex-col justify-center\">\r\n\t\t\t<div class=\"max-w-md\">\r\n\t\t\t\t<div class=\"text-center dark:text-white text-2xl font-medium z-50\">\r\n\t\t\t\t\tAccount Activation Pending<br /> Contact Admin for WebUI Access\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\" mt-4 text-center text-sm dark:text-gray-200 w-full\">\r\n\t\t\t\t\tYour account status is currently pending activation.<br /> To access the WebUI, please reach\r\n\t\t\t\t\tout to the administrator. Admins can manage user statuses from the Admin Panel.\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{#if adminDetails}\r\n\t\t\t\t\t<div class=\"mt-4 text-sm font-medium text-center\">\r\n\t\t\t\t\t\t<div>Admin: {adminDetails.name} ({adminDetails.email})</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t{/if}\r\n\r\n\t\t\t\t<div class=\" mt-6 mx-auto relative group w-fit\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"relative z-20 flex px-5 py-2 rounded-full bg-white border border-gray-100 dark:border-none hover:bg-gray-100 text-gray-700 transition font-medium text-sm\"\r\n\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\tlocation.href = '/';\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{$i18n.t('Check Again')}\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"text-xs text-center w-full mt-2 text-gray-400 underline\"\r\n\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\tlocalStorage.removeItem('token');\r\n\t\t\t\t\t\t\tlocation.href = '/auth';\r\n\t\t\t\t\t\t}}>{$i18n.t('Sign Out')}</button\r\n\t\t\t\t\t>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { onMount, tick, getContext } from 'svelte';\r\n\timport { openDB, deleteDB } from 'idb';\r\n\timport fileSaver from 'file-saver';\r\n\tconst { saveAs } = fileSaver;\r\n\r\n\timport { goto } from '$app/navigation';\r\n\r\n\timport { getModels as _getModels } from '$lib/apis';\r\n\timport { getOllamaVersion } from '$lib/apis/ollama';\r\n\timport { getPrompts } from '$lib/apis/prompts';\r\n\r\n\timport { getDocs } from '$lib/apis/documents';\r\n\timport { getAllChatTags } from '$lib/apis/chats';\r\n\r\n\timport {\r\n\t\tuser,\r\n\t\tshowSettings,\r\n\t\tsettings,\r\n\t\tmodels,\r\n\t\tprompts,\r\n\t\tdocuments,\r\n\t\ttags,\r\n\t\tbanners,\r\n\t\tshowChangelog,\r\n\t\tconfig\r\n\t} from '$lib/stores';\r\n\timport { REQUIRED_OLLAMA_VERSION, WEBUI_API_BASE_URL } from '$lib/constants';\r\n\timport { compareVersion } from '$lib/utils';\r\n\r\n\timport SettingsModal from '$lib/components/chat/SettingsModal.svelte';\r\n\timport Sidebar from '$lib/components/layout/Sidebar.svelte';\r\n\timport ShortcutsModal from '$lib/components/chat/ShortcutsModal.svelte';\r\n\timport ChangelogModal from '$lib/components/ChangelogModal.svelte';\r\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\r\n\timport { getBanners } from '$lib/apis/configs';\r\n\timport { getUserSettings } from '$lib/apis/users';\r\n\timport Help from '$lib/components/layout/Help.svelte';\r\n\timport AccountPending from '$lib/components/layout/Overlay/AccountPending.svelte';\r\n\timport { error } from '@sveltejs/kit';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet ollamaVersion = '';\r\n\tlet loaded = false;\r\n\tlet showShortcutsButtonElement: HTMLButtonElement;\r\n\tlet DB = null;\r\n\tlet localDBChats = [];\r\n\r\n\tlet showShortcuts = false;\r\n\r\n\tconst getModels = async () => {\r\n\t\treturn _getModels(localStorage.token);\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tif ($user === undefined) {\r\n\t\t\tawait goto('/auth');\r\n\t\t} else if (['user', 'admin'].includes($user.role)) {\r\n\t\t\ttry {\r\n\t\t\t\t// Check if IndexedDB exists\r\n\t\t\t\tDB = await openDB('Chats', 1);\r\n\r\n\t\t\t\tif (DB) {\r\n\t\t\t\t\tconst chats = await DB.getAllFromIndex('chats', 'timestamp');\r\n\t\t\t\t\tlocalDBChats = chats.map((item, idx) => chats[chats.length - 1 - idx]);\r\n\r\n\t\t\t\t\tif (localDBChats.length === 0) {\r\n\t\t\t\t\t\tawait deleteDB('Chats');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(DB);\r\n\t\t\t} catch (error) {\r\n\t\t\t\t// IndexedDB Not Found\r\n\t\t\t}\r\n\r\n\t\t\tconst userSettings = await getUserSettings(localStorage.token).catch((error) => {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\r\n\t\t\tif (userSettings) {\r\n\t\t\t\tawait settings.set(userSettings.ui);\r\n\t\t\t} else {\r\n\t\t\t\tawait settings.set(JSON.parse(localStorage.getItem('settings') ?? '{}'));\r\n\t\t\t}\r\n\r\n\t\t\tawait Promise.all([\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tmodels.set(await getModels());\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tprompts.set(await getPrompts(localStorage.token));\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tdocuments.set(await getDocs(localStorage.token));\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tbanners.set(await getBanners(localStorage.token));\r\n\t\t\t\t})(),\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\ttags.set(await getAllChatTags(localStorage.token));\r\n\t\t\t\t})()\r\n\t\t\t]);\r\n\r\n\t\t\tdocument.addEventListener('keydown', function (event) {\r\n\t\t\t\tconst isCtrlPressed = event.ctrlKey || event.metaKey; // metaKey is for Cmd key on Mac\r\n\t\t\t\t// Check if the Shift key is pressed\r\n\t\t\t\tconst isShiftPressed = event.shiftKey;\r\n\r\n\t\t\t\t// Check if Ctrl + Shift + O is pressed\r\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key.toLowerCase() === 'o') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('newChat');\r\n\t\t\t\t\tdocument.getElementById('sidebar-new-chat-button')?.click();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Shift + Esc is pressed\r\n\t\t\t\tif (isShiftPressed && event.key === 'Escape') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('focusInput');\r\n\t\t\t\t\tdocument.getElementById('chat-textarea')?.focus();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + Shift + ; is pressed\r\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key === ';') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('copyLastCodeBlock');\r\n\t\t\t\t\tconst button = [...document.getElementsByClassName('copy-code-button')]?.at(-1);\r\n\t\t\t\t\tbutton?.click();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + Shift + C is pressed\r\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key.toLowerCase() === 'c') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('copyLastResponse');\r\n\t\t\t\t\tconst button = [...document.getElementsByClassName('copy-response-button')]?.at(-1);\r\n\t\t\t\t\tconsole.log(button);\r\n\t\t\t\t\tbutton?.click();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + Shift + S is pressed\r\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key.toLowerCase() === 's') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('toggleSidebar');\r\n\t\t\t\t\tdocument.getElementById('sidebar-toggle-button')?.click();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + Shift + Backspace is pressed\r\n\t\t\t\tif (isCtrlPressed && isShiftPressed && event.key === 'Backspace') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('deleteChat');\r\n\t\t\t\t\tdocument.getElementById('delete-chat-button')?.click();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + . is pressed\r\n\t\t\t\tif (isCtrlPressed && event.key === '.') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('openSettings');\r\n\t\t\t\t\tshowSettings.set(!$showSettings);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if Ctrl + / is pressed\r\n\t\t\t\tif (isCtrlPressed && event.key === '/') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconsole.log('showShortcuts');\r\n\t\t\t\t\tdocument.getElementById('show-shortcuts-button')?.click();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif ($user.role === 'admin') {\r\n\t\t\t\tshowChangelog.set(localStorage.version !== $config.version);\r\n\t\t\t}\r\n\r\n\t\t\tawait tick();\r\n\t\t}\r\n\r\n\t\tloaded = true;\r\n\t});\r\n</script>\r\n\r\n<Help />\r\n<SettingsModal bind:show={$showSettings} />\r\n<ChangelogModal bind:show={$showChangelog} />\r\n\r\n<div class=\"app relative\">\r\n\t<div\r\n\t\tclass=\" text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900 h-screen max-h-[100dvh] overflow-auto flex flex-row\"\r\n\t>\r\n\t\t{#if loaded}\r\n\t\t\t{#if !['user', 'admin'].includes($user.role)}\r\n\t\t\t\t<AccountPending />\r\n\t\t\t{:else if localDBChats.length > 0}\r\n\t\t\t\t<div class=\"fixed w-full h-full flex z-50\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"absolute w-full h-full backdrop-blur-md bg-white/20 dark:bg-gray-900/50 flex justify-center\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div class=\"m-auto pb-44 flex flex-col justify-center\">\r\n\t\t\t\t\t\t\t<div class=\"max-w-md\">\r\n\t\t\t\t\t\t\t\t<div class=\"text-center dark:text-white text-2xl font-medium z-50\">\r\n\t\t\t\t\t\t\t\t\tImportant Update<br /> Action Required for Chat Log Storage\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\" mt-4 text-center text-sm dark:text-gray-200 w-full\">\r\n\t\t\t\t\t\t\t\t\t{$i18n.t(\r\n\t\t\t\t\t\t\t\t\t\t\"Saving chat logs directly to your browser's storage is no longer supported. Please take a moment to download and delete your chat logs by clicking the button below. Don't worry, you can easily re-import your chat logs to the backend through\"\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<span class=\"font-semibold dark:text-white\"\r\n\t\t\t\t\t\t\t\t\t\t>{$i18n.t('Settings')} > {$i18n.t('Chats')} > {$i18n.t('Import Chats')}</span\r\n\t\t\t\t\t\t\t\t\t>. {$i18n.t(\r\n\t\t\t\t\t\t\t\t\t\t'This ensures that your valuable conversations are securely saved to your backend database. Thank you!'\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\" mt-6 mx-auto relative group w-fit\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\"relative z-20 flex px-5 py-2 rounded-full bg-white border border-gray-100 dark:border-none hover:bg-gray-100 transition font-medium text-sm\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet blob = new Blob([JSON.stringify(localDBChats)], {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'application/json'\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tsaveAs(blob, `chat-export-${Date.now()}.json`);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tconst tx = DB.transaction('chats', 'readwrite');\r\n\t\t\t\t\t\t\t\t\t\t\tawait Promise.all([tx.store.clear(), tx.done]);\r\n\t\t\t\t\t\t\t\t\t\t\tawait deleteDB('Chats');\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tlocalDBChats = [];\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tDownload & Delete\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclass=\"text-xs text-center w-full mt-2 text-gray-400 underline\"\r\n\t\t\t\t\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\tlocalDBChats = [];\r\n\t\t\t\t\t\t\t\t\t\t}}>{$i18n.t('Close')}</button\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<Sidebar />\r\n\t\t\t<slot />\r\n\t\t{/if}\r\n\t</div>\r\n</div>\r\n\r\n<style>\r\n\t.loading {\r\n\t\tdisplay: inline-block;\r\n\t\tclip-path: inset(0 1ch 0 0);\r\n\t\tanimation: l 1s steps(3) infinite;\r\n\t\tletter-spacing: -0.5px;\r\n\t}\r\n\r\n\t@keyframes l {\r\n\t\tto {\r\n\t\t\tclip-path: inset(0 -1ch 0 0);\r\n\t\t}\r\n\t}\r\n\r\n\tpre[class*='language-'] {\r\n\t\tposition: relative;\r\n\t\toverflow: auto;\r\n\r\n\t\t/* make space  */\r\n\t\tmargin: 5px 0;\r\n\t\tpadding: 1.75rem 0 1.75rem 1rem;\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\r\n\tpre[class*='language-'] button {\r\n\t\tposition: absolute;\r\n\t\ttop: 5px;\r\n\t\tright: 5px;\r\n\r\n\t\tfont-size: 0.9rem;\r\n\t\tpadding: 0.15rem;\r\n\t\tbackground-color: #828282;\r\n\r\n\t\tborder: ridge 1px #7b7b7c;\r\n\t\tborder-radius: 5px;\r\n\t\ttext-shadow: #c4c4c4 0 0 2px;\r\n\t}\r\n\r\n\tpre[class*='language-'] button:hover {\r\n\t\tcursor: pointer;\r\n\t\tbackground-color: #bcbabb;\r\n\t}\r\n</style>\r\n"],"names":["instanceOfAny","object","constructors","c","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","getCursorAdvanceMethods","cursorRequestMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","promisifyRequest","request","promise","resolve","reject","unlisten","success","error","wrap","value","cacheDonePromiseForTransaction","tx","done","complete","idbProxyTraps","target","prop","receiver","replaceTraps","callback","wrapFunction","func","storeNames","args","unwrap","transformCachableValue","newValue","openDB","name","version","blocked","upgrade","blocking","terminated","openPromise","event","db","deleteDB","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","method","storeName","oldTraps","ctx","src_url_equal","img_1","img_1_src_value","generateInitialsImage","attr","insert_hydration","div15","anchor","append_hydration","div13","input0","div12","div7","div3","div2","button0","div1","div6","div4","div5","button1","button2","button3","div11","div10","div8","div9","input1","hr","div14","button4","dirty","set_data","t3","t3_value","t5","t5_value","t7","t7_value","t9","t9_value","t11","t11_value","t16","t16_value","i18n","getContext","saveHandler","$$props","profileImageUrl","showJWTToken","JWTTokenCopied","profileImageInputElement","submitHandler","$user","$$invalidate","updatedUser","updateUserProfile","toast","user","onMount","getAPIKey","$$value","e","files","reader","originalImageUrl","img","canvas","aspectRatio","newWidth","newHeight","offsetX","offsetY","compressedSrc","canvasPixelTest","$i18n","url","getGravatarUrl","copyToClipboard","WEBUI_VERSION","div0","t1","t1_value","span","WEBUI_BUILD_HASH","create_if_block_1","a0","a0_href_value","a4","t2","t2_value","current","ollamaVersion","updateAvailable","checkForVersionUpdates","getVersionUpdates","compareVersion","getOllamaVersion","showChangelog","div","if_block","create_if_block_2","input","input_placeholder_value","textarea","button","svg","path0","path1","t0","t0_value","create_if_block_3","set_style","getModels","ollamaEnabled","OLLAMA_URLS","selectedOllamaUrlIdx","createModelLoading","createModelTag","createModelContent","createModelDigest","createModelPullProgress","createModelHandler","res","createModel","splitStream","lines","line","data","models","getOllamaConfig","getOllamaUrls","t_value","option","option_value_value","t","create_if_block_4","if_block1","t6","t6_value","i","create_if_block_6","create_if_block_5","create_if_block","add_render_callback","select0","select1","div18","div16","option0","option1","option2","option3","div17","t13","t13_value","t17","t17_value","t21","t21_value","t24","t24_value","t26","t26_value","t29","t29_value","dispatch","createEventDispatcher","saveSettings","themes","selectedTheme","languages","lang","notificationEnabled","system","showAdvanced","toggleNotification","requestFormat","keepAlive","params","toggleRequestFormat","getLanguages","$settings","_a","_b","applyTheme","_theme","themeToApply","themeChangeHandler","theme","select_value","change_handler","path","input2","set_input_value","create_if_block_9","create_if_block_8","create_if_block_7","if_block4","each_value_3","ensure_array_like","each_value_2","func_1","select2","form","div35","div19","button5","hr0","div24","div22","div21","div20","div23","hr1","div34","div26","div25","div31","div28","div27","div30","div29","div33","div32","div36","button6","t8","t8_value","t15","t15_value","t18","t18_value","t22","t22_value","t27","t27_value","t32","t32_value","t36","t36_value","t38","t38_value","t42","t42_value","model","m","titleAutoGenerate","responseAutoCopy","titleAutoGenerateModel","titleAutoGenerateModelExternal","widescreenMode","titleGenerationPrompt","splitLargeChunks","defaultModelId","promptSuggestions","showUsername","chatBubble","chatDirection","toggleSplitLargeChunks","togglewidescreenMode","toggleChatBubble","toggleShowUsername","toggleTitleAutoGenerate","toggleResponseAutoCopy","permission","toggleChangeChatDirection","updateInterfaceHandler","setDefaultPromptSuggestions","config","getBackendConfig","$config","_c","_d","each_value","promptIdx","datalist0","datalist1","t4","t4_value","option_selected_value","select","OpenAIUrl","OpenAIKey","OpenAISpeaker","STTEngine","conversationMode","speechAutoSend","responseAutoPlayback","nonLocalVoices","TTSEngine","voices","speaker","getOpenAIVoices","getOpenAIVoicesModel","getWebAPIVoices","getVoicesLoop","toggleConversationMode","toggleResponseAutoPlayback","toggleSpeechAutoSend","updateConfigHandler","updateAudioConfig","_e","getAudioConfig","v","svg0","saveAs","fileSaver","saveChatHistory","importFiles","showArchiveConfirm","showDeleteConfirm","chatImportInputElement","importChats","_chats","chat","createNewChat","chats","getChatList","exportChats","blob","getAllChats","archiveAllChatsHandler","goto","archiveAllChats","deleteAllChatsHandler","deleteAllChats","toggleSaveChatHistory","getImportOrigin","convertOpenAIChats","each_blocks","path2","if_block0","input0_class_value","a","OLLAMA_BASE_URLS","OPENAI_API_KEYS","OPENAI_API_BASE_URLS","pipelineUrls","ENABLE_OPENAI_API","ENABLE_OLLAMA_API","verifyOpenAIHandler","idx","updateOpenAIUrls","updateOpenAIKeys","getOpenAIModels","verifyOllamaHandler","updateOllamaUrls","updateOpenAIHandler","diff","updateOllamaUrlsHandler","updateOllamaConfig","getOpenAIUrls","getOpenAIKeys","ollamaConfig","openaiConfig","getOpenAIConfig","updateOpenAIConfig","urlIdx","key","keyIdx","show_if","datalist","t14","t14_value","loading","imageGenerationEngine","enableImageGeneration","AUTOMATIC1111_BASE_URL","COMFYUI_BASE_URL","OPENAI_API_BASE_URL","OPENAI_API_KEY","selectedModel","imageSize","steps","getImageGenerationModels","getDefaultImageGenerationModel","updateUrlHandler","updateImageGenerationEngineUrls","getImageGenerationEngineUrls","updateImageGeneration","updateImageGenerationConfig","getImageGenerationConfig","URLS","getImageSize","getImageSteps","updateDefaultImageGenerationModel","updateImageSize","updateImageSteps","className","show","content","addNewMemory","table","thead","tr","th0","th1","th2","tbody","dayjs","td0","td1","td2","memories","showAddMemoryModal","deleteMemoryById","memory","getMemories","deleteMemoriesByUserId","showManageModal","enableMemory","button_class_value","create_if_block_10","button1_class_value","button2_class_value","button3_class_value","button4_class_value","button5_class_value","button6_class_value","t20","t20_value","updated","settings","updateUserSettings","_getModels","selectedTab","strokeWidth","flyAndScale","shareHandler","cloneChatHandler","archiveChatHandler","renameHandler","deleteHandler","onClose","chatId","a_href_value","tr_class_value","searchValue","unarchiveChatHandler","archiveChatById","getArchivedChatList","deleteChatHandler","deleteChatById","exportChatsHandler","getAllArchivedChats","a_class_value","div_class_value","chatmenu_changes","div0_class_value","usermenu_changes","img_src_value","WEBUI_BASE_URL","BREAKPOINT","navElement","search","shareChatId","selectedChatId","chatDeleteId","chatTitleEditId","chatTitle","showShareChatModal","showDropdown","filteredChatList","mobile","$showSidebar","showSidebar","touchstart","touchend","checkDirection","screenWidth","swipeDistance","onTouchStart","onTouchEnd","enrichChatsWithContent","chatList","enrichedChats","chatDetails","getChatById","editChatTitle","id","_title","updateChatById","deleteChat","$chatId","cloneChatById","focusEdit","node","$showArchivedChats","newChatButton","$mobile","$chats","chatIds","getChatListByTagName","tag","tags","getAllChatTags","showArchivedChats","title","query","contentMatches","message","div68","div50","div49","div48","div42","div37","div41","div47","div43","div46","div52","div51","div67","div66","div65","div56","div53","div55","div60","div57","div59","div64","div61","div63","t25","t25_value","t33","t33_value","t39","t39_value","t47","t47_value","t55","t55_value","t61","t61_value","t63","t63_value","t67","t67_value","t71","t71_value","randomBetween","min","max","size","x","y","duration","infinite","delay","colorRange","colorArray","amount","iterationCount","fallDistance","rounded","cone","noGravity","xSpread","destroyOnComplete","getColor","each_value_1","confetti","Confetti","section","changelog","getChangelog","showDocsHandler","showShortcutsHandler","showShortcuts","adminDetails","getAdminDetails","err","loaded","DB","localDBChats","item","userSettings","getUserSettings","prompts","getPrompts","documents","getDocs","banners","getBanners","isCtrlPressed","isShiftPressed","showSettings","$showSettings","tick","$showChangelog"],"mappings":"siFAAA,MAAMA,GAAgB,CAACC,EAAQC,IAAiBA,EAAa,KAAMC,GAAMF,aAAkBE,CAAC,EAE5F,IAAIC,GACAC,GAEJ,SAASC,IAAuB,CAC5B,OAAQF,KACHA,GAAoB,CACjB,YACA,eACA,SACA,UACA,cACZ,EACA,CAEA,SAASG,IAA0B,CAC/B,OAAQF,KACHA,GAAuB,CACpB,UAAU,UAAU,QACpB,UAAU,UAAU,SACpB,UAAU,UAAU,kBAChC,EACA,CACA,MAAMG,GAAmB,IAAI,QACvBC,GAAqB,IAAI,QACzBC,GAA2B,IAAI,QAC/BC,GAAiB,IAAI,QACrBC,GAAwB,IAAI,QAClC,SAASC,GAAiBC,EAAS,CAC/B,MAAMC,EAAU,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC7C,MAAMC,EAAW,IAAM,CACnBJ,EAAQ,oBAAoB,UAAWK,CAAO,EAC9CL,EAAQ,oBAAoB,QAASM,CAAK,CACtD,EACcD,EAAU,IAAM,CAClBH,EAAQK,GAAKP,EAAQ,MAAM,CAAC,EAC5BI,GACZ,EACcE,EAAQ,IAAM,CAChBH,EAAOH,EAAQ,KAAK,EACpBI,GACZ,EACQJ,EAAQ,iBAAiB,UAAWK,CAAO,EAC3CL,EAAQ,iBAAiB,QAASM,CAAK,CAC/C,CAAK,EACD,OAAAL,EACK,KAAMO,GAAU,CAGbA,aAAiB,WACjBd,GAAiB,IAAIc,EAAOR,CAAO,CAG/C,CAAK,EACI,MAAM,IAAM,CAAA,CAAG,EAGpBF,GAAsB,IAAIG,EAASD,CAAO,EACnCC,CACX,CACA,SAASQ,GAA+BC,EAAI,CAExC,GAAIf,GAAmB,IAAIe,CAAE,EACzB,OACJ,MAAMC,EAAO,IAAI,QAAQ,CAACT,EAASC,IAAW,CAC1C,MAAMC,EAAW,IAAM,CACnBM,EAAG,oBAAoB,WAAYE,CAAQ,EAC3CF,EAAG,oBAAoB,QAASJ,CAAK,EACrCI,EAAG,oBAAoB,QAASJ,CAAK,CACjD,EACcM,EAAW,IAAM,CACnBV,IACAE,GACZ,EACcE,EAAQ,IAAM,CAChBH,EAAOO,EAAG,OAAS,IAAI,aAAa,aAAc,YAAY,CAAC,EAC/DN,GACZ,EACQM,EAAG,iBAAiB,WAAYE,CAAQ,EACxCF,EAAG,iBAAiB,QAASJ,CAAK,EAClCI,EAAG,iBAAiB,QAASJ,CAAK,CAC1C,CAAK,EAEDX,GAAmB,IAAIe,EAAIC,CAAI,CACnC,CACA,IAAIE,GAAgB,CAChB,IAAIC,EAAQC,EAAMC,EAAU,CACxB,GAAIF,aAAkB,eAAgB,CAElC,GAAIC,IAAS,OACT,OAAOpB,GAAmB,IAAImB,CAAM,EAExC,GAAIC,IAAS,mBACT,OAAOD,EAAO,kBAAoBlB,GAAyB,IAAIkB,CAAM,EAGzE,GAAIC,IAAS,QACT,OAAOC,EAAS,iBAAiB,CAAC,EAC5B,OACAA,EAAS,YAAYA,EAAS,iBAAiB,CAAC,CAAC,CAE9D,CAED,OAAOT,GAAKO,EAAOC,CAAI,CAAC,CAC3B,EACD,IAAID,EAAQC,EAAMP,EAAO,CACrB,OAAAM,EAAOC,CAAI,EAAIP,EACR,EACV,EACD,IAAIM,EAAQC,EAAM,CACd,OAAID,aAAkB,iBACjBC,IAAS,QAAUA,IAAS,SACtB,GAEJA,KAAQD,CAClB,CACL,EACA,SAASG,GAAaC,EAAU,CAC5BL,GAAgBK,EAASL,EAAa,CAC1C,CACA,SAASM,GAAaC,EAAM,CAIxB,OAAIA,IAAS,YAAY,UAAU,aAC/B,EAAE,qBAAsB,eAAe,WAChC,SAAUC,KAAeC,EAAM,CAClC,MAAMZ,EAAKU,EAAK,KAAKG,GAAO,IAAI,EAAGF,EAAY,GAAGC,CAAI,EACtD,OAAA1B,GAAyB,IAAIc,EAAIW,EAAW,KAAOA,EAAW,KAAM,EAAG,CAACA,CAAU,CAAC,EAC5Ed,GAAKG,CAAE,CAC1B,EAOQjB,GAAyB,EAAC,SAAS2B,CAAI,EAChC,YAAaE,EAAM,CAGtB,OAAAF,EAAK,MAAMG,GAAO,IAAI,EAAGD,CAAI,EACtBf,GAAKb,GAAiB,IAAI,IAAI,CAAC,CAClD,EAEW,YAAa4B,EAAM,CAGtB,OAAOf,GAAKa,EAAK,MAAMG,GAAO,IAAI,EAAGD,CAAI,CAAC,CAClD,CACA,CACA,SAASE,GAAuBhB,EAAO,CACnC,OAAI,OAAOA,GAAU,WACVW,GAAaX,CAAK,GAGzBA,aAAiB,gBACjBC,GAA+BD,CAAK,EACpCtB,GAAcsB,EAAOhB,IAAsB,EACpC,IAAI,MAAMgB,EAAOK,EAAa,EAElCL,EACX,CACA,SAASD,GAAKC,EAAO,CAGjB,GAAIA,aAAiB,WACjB,OAAOT,GAAiBS,CAAK,EAGjC,GAAIX,GAAe,IAAIW,CAAK,EACxB,OAAOX,GAAe,IAAIW,CAAK,EACnC,MAAMiB,EAAWD,GAAuBhB,CAAK,EAG7C,OAAIiB,IAAajB,IACbX,GAAe,IAAIW,EAAOiB,CAAQ,EAClC3B,GAAsB,IAAI2B,EAAUjB,CAAK,GAEtCiB,CACX,CACA,MAAMF,GAAUf,GAAUV,GAAsB,IAAIU,CAAK,EC5KzD,SAASkB,GAAOC,EAAMC,EAAS,CAAE,QAAAC,EAAS,QAAAC,EAAS,SAAAC,EAAU,WAAAC,CAAY,EAAG,GAAI,CAC5E,MAAMhC,EAAU,UAAU,KAAK2B,EAAMC,CAAO,EACtCK,EAAc1B,GAAKP,CAAO,EAChC,OAAI8B,GACA9B,EAAQ,iBAAiB,gBAAkBkC,GAAU,CACjDJ,EAAQvB,GAAKP,EAAQ,MAAM,EAAGkC,EAAM,WAAYA,EAAM,WAAY3B,GAAKP,EAAQ,WAAW,EAAGkC,CAAK,CAC9G,CAAS,EAEDL,GACA7B,EAAQ,iBAAiB,UAAYkC,GAAUL,EAE/CK,EAAM,WAAYA,EAAM,WAAYA,CAAK,CAAC,EAE9CD,EACK,KAAME,GAAO,CACVH,GACAG,EAAG,iBAAiB,QAAS,IAAMH,EAAY,CAAA,EAC/CD,GACAI,EAAG,iBAAiB,gBAAkBD,GAAUH,EAASG,EAAM,WAAYA,EAAM,WAAYA,CAAK,CAAC,CAE/G,CAAK,EACI,MAAM,IAAM,CAAA,CAAG,EACbD,CACX,CAMA,SAASG,GAAST,EAAM,CAAE,QAAAE,CAAO,EAAK,CAAA,EAAI,CACtC,MAAM7B,EAAU,UAAU,eAAe2B,CAAI,EAC7C,OAAIE,GACA7B,EAAQ,iBAAiB,UAAYkC,GAAUL,EAE/CK,EAAM,WAAYA,CAAK,CAAC,EAErB3B,GAAKP,CAAO,EAAE,KAAK,IAAA,EAAe,CAC7C,CAEA,MAAMqC,GAAc,CAAC,MAAO,SAAU,SAAU,aAAc,OAAO,EAC/DC,GAAe,CAAC,MAAO,MAAO,SAAU,OAAO,EAC/CC,GAAgB,IAAI,IAC1B,SAASC,GAAU1B,EAAQC,EAAM,CAC7B,GAAI,EAAED,aAAkB,aACpB,EAAEC,KAAQD,IACV,OAAOC,GAAS,UAChB,OAEJ,GAAIwB,GAAc,IAAIxB,CAAI,EACtB,OAAOwB,GAAc,IAAIxB,CAAI,EACjC,MAAM0B,EAAiB1B,EAAK,QAAQ,aAAc,EAAE,EAC9C2B,EAAW3B,IAAS0B,EACpBE,EAAUL,GAAa,SAASG,CAAc,EACpD,GAEA,EAAEA,KAAmBC,EAAW,SAAW,gBAAgB,YACvD,EAAEC,GAAWN,GAAY,SAASI,CAAc,GAChD,OAEJ,MAAMG,EAAS,eAAgBC,KAAcvB,EAAM,CAE/C,MAAMZ,EAAK,KAAK,YAAYmC,EAAWF,EAAU,YAAc,UAAU,EACzE,IAAI7B,EAASJ,EAAG,MAChB,OAAIgC,IACA5B,EAASA,EAAO,MAAMQ,EAAK,MAAO,CAAA,IAM9B,MAAM,QAAQ,IAAI,CACtBR,EAAO2B,CAAc,EAAE,GAAGnB,CAAI,EAC9BqB,GAAWjC,EAAG,IAC1B,CAAS,GAAG,CAAC,CACb,EACI,OAAA6B,GAAc,IAAIxB,EAAM6B,CAAM,EACvBA,CACX,CACA3B,GAAc6B,IAAc,CACxB,GAAGA,EACH,IAAK,CAAChC,EAAQC,EAAMC,IAAawB,GAAU1B,EAAQC,CAAI,GAAK+B,EAAS,IAAIhC,EAAQC,EAAMC,CAAQ,EAC/F,IAAK,CAACF,EAAQC,IAAS,CAAC,CAACyB,GAAU1B,EAAQC,CAAI,GAAK+B,EAAS,IAAIhC,EAAQC,CAAI,CACjF,EAAE,4WCoF6CgC,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,aAkB3DA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,WAStBA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,WAOtBA,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,eAQkBA,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,kCA2RvDA,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,23DA/VLC,GAAAC,EAAA,IAAAC,EAAAH,OAAoB,GAAKA,EAAe,CAAA,EAAGI,GAAsBJ,EAAI,CAAA,CAAA,CAAA,GAAAK,EAAAH,EAAA,MAAAC,CAAA,48CA9ElFG,EAgbMvC,GAAAwC,EAAAC,EAAA,EA/aLC,EA+ZMF,EAAAG,CAAA,EA9ZLD,EA4DEC,EAAAC,CAAA,kBAEFF,EA8FMC,EAAAE,CAAA,EA3FLH,EA2EMG,EAAAC,CAAA,EA1ELJ,EAiCMI,EAAAC,CAAA,EAhCLL,EA+BMK,EAAAC,CAAA,EA9BLN,EA6BSM,EAAAC,CAAA,EAtBRP,EAIEO,EAAAd,CAAA,SAEFO,EAeMO,EAAAC,CAAA,SAKTR,EAsCMI,EAAAK,CAAA,EArCLT,EAAyES,EAAAC,CAAA,gBAEzEV,EAkCMS,EAAAE,CAAA,EAjCLX,EAgBCW,EAAAC,CAAA,gBAEDZ,EAOCW,EAAAE,CAAA,gBAEDb,EAKCW,EAAAG,CAAA,gBAKJd,EAaMG,EAAAY,CAAA,EAZLf,EAWMe,EAAAC,CAAA,EAVLhB,EAA8DgB,EAAAC,CAAA,gBAE9DjB,EAOMgB,EAAAE,EAAA,EANLlB,EAKEkB,GAAAC,EAAA,QAFW5B,EAAI,CAAA,CAAA,UAYrBS,EAAyCC,EAAAmB,EAAA,kBA8P1CpB,EAaMF,EAAAuB,EAAA,EAZLrB,EAWSqB,GAAAC,EAAA,uLAhWEC,GAAA,GAAA,CAAA/B,GAAAC,EAAA,IAAAC,EAAAH,QAAoB,GAAKA,GAAe,CAAA,EAAGI,GAAsBJ,GAAI,CAAA,CAAA,CAAA,+BA0BnCA,GAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAAC,EAAAC,CAAA,iBAkB3DnC,GAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAiC,EAAAG,EAAAC,CAAA,iBAStBrC,GAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAiC,EAAAK,EAAAC,CAAA,iBAOtBvC,GAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAiC,EAAAO,EAAAC,CAAA,iBAQkBzC,GAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAAS,EAAAC,CAAA,mBAMxC3C,GAAI,CAAA,SAAJA,GAAI,CAAA,CAAA,mBAqRnBA,GAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAAW,GAAAC,EAAA,uGAveX,MAAAC,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,YAAAC,CAAA,EAAAC,EAEPC,EAAkB,GAClBtE,EAAO,GAIPuE,EAAe,GACfC,EAAiB,GAMjBC,EAEE,MAAAC,EAAA,SAAA,CACD1E,IAAS2E,EAAM,OACdL,IAAoB9C,GAAsBmD,EAAM,IAAI,GAAKL,IAAoB,KAChFM,EAAA,EAAAN,EAAkB9C,GAAsBxB,CAAI,CAAA,EAIxC,MAAA6E,EAAA,MAAoBC,GAAkB,aAAa,MAAO9E,EAAMsE,CAAe,EAAE,MACrF3F,GAAA,CACAoG,GAAM,MAAMpG,CAAK,IAIf,OAAAkG,GACG,MAAAG,GAAK,IAAIH,CAAW,EACnB,IAED,IAYRI,GAAA,SAAA,CACCL,EAAA,EAAA5E,EAAO2E,EAAM,IAAA,EACbC,EAAA,EAAAN,EAAkBK,EAAM,iBAAA,EAExB,MAAeO,GAAU,aAAa,KAAK,EAAE,MAAOvG,IACnD,QAAQ,IAAIA,CAAK,EACV,iDASI8F,EAAwBU,mBAIvBC,GAAC,OACNC,EAAQZ,EAAyB,OAAK,GACxC,IAAAa,MAAa,WACjBA,EAAO,OAAU/E,GAAK,CACjB,IAAAgF,EAAsB,GAAAhF,EAAM,OAAO,MAAM,GAEvC,MAAAiF,MAAU,MAChBA,EAAI,IAAMD,EAEVC,EAAI,OAAM,UAAA,CACH,MAAAC,EAAS,SAAS,cAAc,QAAQ,EACxCrE,EAAMqE,EAAO,WAAW,IAAI,EAG5BC,EAAcF,EAAI,MAAQA,EAAI,OAGhC,IAAAG,EAAUC,EACVF,EAAc,GACjBC,EAAW,IAAMD,EACjBE,EAAY,MAEZD,EAAW,IACXC,EAAY,IAAMF,GAInBD,EAAO,MAAQ,IACfA,EAAO,OAAS,IAGV,MAAAI,GAAW,IAAMF,GAAY,EAC7BG,GAAW,IAAMF,GAAa,EAGpCxE,EAAI,UAAUoE,EAAKK,EAASC,EAASH,EAAUC,CAAS,EAGlD,MAAAG,EAAgBN,EAAO,UAAU,YAAY,EAGnDb,EAAA,EAAAN,EAAkByB,CAAa,MAE/BtB,EAAyB,MAAQ,KAAIA,CAAA,IAKtCY,EAAM,OAAS,GACd,CAAA,YAAa,aAAc,aAAc,WAAW,EAAE,SAASA,EAAM,CAAC,EAAE,IAAM,GAE/EC,EAAO,cAAcD,EAAM,CAAC,CAAA,UAezBZ,EAAyB,MAAK,eAoC1BuB,GAAe,MAClB1B,EAAkB9C,GAAsBxB,CAAI,CAAA,EAE5C+E,GAAM,KACLkB,EAAM,EACL,uGAAuG,EAGvG,CAAA,SAAU,IAAO,EAAE,CAAA,eAUhB,MAAAC,EAAY,MAAAC,GAAexB,EAAM,KAAK,EAE5CC,EAAA,EAAAN,EAAkB4B,CAAG,eAOrBtB,EAAA,EAAAN,EAAkB,WAAW,gBAelBtE,EAAI,KAAA,0BA4Cd4E,EAAA,EAAAL,GAAgBA,CAAY,UAwC7B6B,GAAgB,aAAa,KAAK,EAClCxB,EAAA,EAAAJ,EAAiB,EAAI,EACrB,gBACCI,EAAA,EAAAJ,EAAiB,EAAK,GACpB,wBAsLWE,KAGjBN,iOCzbqC,GAClC,MAACiC,EAAa,cADoB,GAClC,QAACA,EAAa,qFAwCwBjF,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,WAG/DmC,GAAAnC,MAAiB,OAAK,4hBAN1BM,EAAoCvC,EAAA8D,EAAArB,CAAA,WAEpCF,EAOMvC,EAAA+C,EAAAN,CAAA,EANLC,EAA0EK,EAAAoE,CAAA,gBAC1EzE,EAIMK,EAAAC,CAAA,EAHLN,EAEMM,EAAAE,CAAA,8BAJmCjB,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,EAG/DpD,EAAA,GAAAG,KAAAA,GAAAnC,MAAiB,OAAK,KAAAiC,EAAAC,EAAAC,CAAA,kFAiCoCnC,EAAW,CAAA,CAAA,MAAQ;AAAA,IACjF,2DAD8DA,EAAW,CAAA,CAAA,qBAAQ;AAAA,IACjF,oFADCM,EAAgFvC,EAAAsH,EAAA7E,CAAA,mCAAnBR,EAAW,CAAA,CAAA,4DAnFtEA,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,mBAcfqC,GAAArC,OAAoB,KAClBA,EAAK,CAAA,EAAC,EAAE,yBAAyB,EACjCA,EAAe,CAAA,EACV,KAAAA,KAAQ,MAAM,IAAIA,EAAM,CAAA,EAAA,EAAE,YAAY,CAAA,IAC3CA,EAAK,CAAA,EAAC,EAAE,UAAU,GAAA,eAUhBA,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,WAU9BA,EAAK,CAAA,EAAC,EAAE,mBAAmB,EAAA,2iBA4CxBA,EAAW,CAAA,EAAC,SAAS,YAAY,IAEjCA,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,kEA9ELsF,oDAqCjBtF,EAAa,CAAA,GAAAuF,GAAAvF,CAAA,oFA5CdA,EAAW,CAAA,CAAA,qeAAXA,EAAW,CAAA,CAAA,+7BAYoDK,EAAAmF,EAAA,OAAAC,EAAA,0DAAAzF,KAAQ,MAAM,owBAjBnFM,EAkGMvC,GAAA0D,EAAAjB,EAAA,EAjGLC,EAgGMgB,EAAAE,CAAA,EA/FLlB,EA6CMkB,EAAAT,CAAA,EA5CLT,EAKMS,EAAAD,CAAA,EAJLR,EAGMQ,EAAAiE,CAAA,8BAEPzE,EAqCMS,EAAAE,CAAA,EApCLX,EA0BMW,EAAAD,CAAA,EAzBLV,EAeMU,EAAAJ,CAAA,sBAVLN,EASIM,EAAAyE,CAAA,gBAGL/E,EAOSU,EAAAH,CAAA,EADRP,EAAsCO,EAAAF,CAAA,gBAIxCL,EAOSW,EAAAC,CAAA,wCAiBXZ,EAAoCkB,EAAAE,CAAA,SAEpCpB,EAqBMkB,EAAAd,CAAA,SAENJ,EASMkB,EAAAD,CAAA,kCALLjB,EAICiB,EAAAgE,EAAA,4FA1FE1F,GAAW,CAAA,CAAA,uBACXA,GAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,iEAcf,CAAAC,IAAA7D,GAAA,KAAAK,KAAAA,GAAArC,QAAoB,KAClBA,GAAK,CAAA,EAAC,EAAE,yBAAyB,EACjCA,GAAe,CAAA,EACV,KAAAA,MAAQ,MAAM,IAAIA,GAAM,CAAA,EAAA,EAAE,YAAY,CAAA,IAC3CA,GAAK,CAAA,EAAC,EAAE,UAAU,GAAA,KAAAiC,EAAAG,EAAAC,CAAA,GAPyC,CAAAwD,IAAA7D,GAAA,GAAAyD,KAAAA,EAAA,0DAAAzF,MAAQ,6CAiBjEA,GAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAAK,EAAAC,CAAA,uBAU9BvC,GAAK,CAAA,EAAC,EAAE,mBAAmB,EAAA,KAAAiC,EAAAO,EAAAC,CAAA,EAK1BzC,GAAa,CAAA,8EAuCXA,GAAW,CAAA,EAAC,SAAS,YAAY,4FAEjCA,GAAK,CAAA,EAAC,EAAE,YAAY,EAAA,KAAAiC,EAAAW,EAAAC,CAAA,uLA5HtB,MAAAC,EAAOC,GAAW,MAAM,0BAE1B+C,EAAgB,GAEhBC,EAAkB,KAClBlH,EACH,CAAA,QAAS,GACT,OAAQ,EAAA,EAGH,MAAAmH,EAAA,SAAA,KACLD,EAAkB,IAAA,EAClBvC,EAAA,EAAA3E,EAAA,MAAgBoH,GAAoC,EAAE,MAAO1I,KAE3D,QAAS0H,GACT,OAAQA,OAIV,QAAQ,IAAIpG,CAAO,EAEnB2E,EAAA,EAAAuC,EAAkBG,GAAerH,EAAQ,OAAQA,EAAQ,OAAO,CAAA,EAChE,QAAQ,IAAIkH,CAAe,GAG5B,OAAAlC,GAAA,SAAA,CACCL,EAAA,EAAAsC,EAAA,MAAsBK,GAAiB,aAAa,KAAK,EAAE,MAAO5I,GAC1D,KAGRyI,0BAmCKI,GAAc,IAAI,EAAI,QAUvBJ,yZCs9BH1F,EAIMvC,EAAAkD,EAAAT,CAAA,EAHLC,EAEMQ,EAAAiE,CAAA,oSALP5E,EAAiCvC,EAAAsI,EAAA7F,CAAA,oGAlgB5B,OAAAR,OAAkB,KAAI,EAwfjBA,OAAkB,GAAK,ipBAGhCM,EAIMvC,EAAAkD,EAAAT,CAAA,EAHLC,EAEMQ,EAAAiE,CAAA,gSALP5E,EAA8BvC,EAAAsI,EAAA7F,CAAA,8DAlRaR,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,qCA8C3DsG,EAAAtG,OAAsB,IAAEuG,GAAAvG,CAAA,4iCAzCbK,EAAAmG,EAAA,cAAAC,EAAAzG,KAAM,EAAE,sCACpB,CAAA,SAAU,cAAc,CAAA,CAAA,aAGfA,EAAkB,CAAA;;;;;;yCAQlBA,EAAkB,CAAA,gsBAUlBA,EAAkB,CAAA,6HAjQlCM,EAsfMvC,EAAAmD,EAAAV,CAAA,EApcLC,EAmcMS,EAAAE,CAAA,EAhRLX,EAqEMW,EAAAD,CAAA,EApELV,EAAwEU,EAAA+D,CAAA,gBACxEzE,EA2CMU,EAAAL,CAAA,EA1CLL,EAiBMK,EAAAG,CAAA,EAhBLR,EAOEQ,EAAAuF,CAAA,OAFWxG,EAAc,CAAA,CAAA,SAI3BS,EAMEQ,EAAAyF,CAAA,OALW1G,EAAkB,CAAA,CAAA,SAQhCS,EAsBMK,EAAAC,CAAA,EArBLN,EAoBSM,EAAA4F,CAAA,EAbRlG,EAYMkG,EAAAC,CAAA,EANLnG,EAEEmG,EAAAC,CAAA,EACFpG,EAEEmG,EAAAE,CAAA,2HAxCkC9G,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,EAKhDhF,EAAA,CAAA,EAAA,KAAAyE,KAAAA,EAAAzG,KAAM,EAAE,sCACpB,CAAA,SAAU,cAAc,CAAA,6CAGfA,EAAkB,CAAA,qBADhBA,EAAc,CAAA,QAAdA,EAAc,CAAA,CAAA,sBAShBA,EAAkB,CAAA,iBAJhBA,EAAkB,CAAA,CAAA,sBAcpBA,EAAkB,CAAA,GAmB1BA,OAAsB,8IAUpB4F,GAAA5F,MAA2B,GAAC,WAI3BA,EAAiB,CAAA,GAAAiH,GAAAjH,CAAA,uCAZQA,EAAc,CAAA,CAAA,+DAQX,GAC/B,4GAT4BA,EAAc,CAAA,CAAA,0LAQX,GAC/B,4PAHgBkH,GAAAjG,EAAA,QAAA,KAAK,IAAI,GAAIjB,MAA2B,CAAC,EAAA,GAAA,8IAP7DM,EAmBMvC,EAAAqD,EAAAZ,CAAA,EAlBLC,EAAoDW,EAAA8D,CAAA,gBACpDzE,EAgBMW,EAAAD,CAAA,EAfLV,EASMU,EAAAL,CAAA,EARLL,EAOMK,EAAAC,CAAA,EANLN,EAKMM,EAAAE,CAAA,0DATsBjB,EAAc,CAAA,CAAA,EAQxCgC,EAAA,CAAA,EAAA,IAAA4D,KAAAA,GAAA5F,MAA2B,GAAC,KAAAiC,EAAA0D,EAAAC,CAAA,WAFdsB,GAAAjG,EAAA,QAAA,KAAK,IAAI,GAAIjB,MAA2B,CAAC,EAAA,GAAA,EAMtDA,EAAiB,CAAA,sIAEnBA,EAAiB,CAAA,CAAA,mEAAjBA,EAAiB,CAAA,CAAA,+GADnBM,EAEMvC,EAAAsI,EAAA7F,CAAA,8BADJR,EAAiB,CAAA,CAAA,8FAtSvBA,EAAa,CAAA,EAAA,EAkgBRA,OAAkB,GAAK,0UApgBnCM,EA8gBMvC,EAAAkD,EAAAT,CAAA,EA7gBLC,EA4gBMQ,EAAAiE,CAAA,sSA3hCA,MAAApC,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,UAAAoE,CAAA,EAAAlE,EAMPmE,EAAgB,KAEhBC,EAAA,CAAA,EACAC,EAAsC,KAOtCxB,EAAgB,KAMhByB,EAAqB,GACrBC,EAAiB,GACjBC,EAAqB,GACrBC,EAAoB,GACpBC,EAA0B,KAyYxB,MAAAC,EAAA,SAAA,KACLL,EAAqB,EAAA,EACf,MAAAM,EAAA,MAAYC,GACjB,aAAa,MACbN,EACAC,EACAH,GACC,MAAO/J,IACRoG,GAAM,MAAMpG,CAAK,EACV,OAGJ,GAAAsK,GAAOA,EAAI,GAAA,CACR,MAAA3D,EAAS2D,EAAI,KACjB,YAAA,IAAgB,mBAChB,YAAYE,GAAY;AAAA,CAAI,CAC5B,EAAA,UAAA,EAEK,OAAA,CACE,KAAA,CAAA,MAAAtK,EAAO,KAAAG,SAAesG,EAAO,KAAA,EACjC,GAAAtG,EAAA,cAGCoK,EAAQvK,EAAM,MAAM;AAAA,CAAI,YAEjBwK,KAAQD,KACdC,IAAS,GAAA,CACZ,QAAQ,IAAIA,CAAI,MACZC,EAAO,KAAK,MAAMD,CAAI,KAC1B,QAAQ,IAAIC,CAAI,EAEZA,EAAK,YACFA,EAAK,SAERA,EAAK,aACFA,EAAK,OAGRA,EAAK,UAENA,EAAK,QAAA,CACLA,EAAK,OAAO,SAAS,SAAS,GAC9B,CAAAA,EAAK,OAAO,SAAS,QAAQ,EAE9BvE,GAAM,QAAQuE,EAAK,MAAM,EAErBA,EAAK,SACR1E,EAAA,EAAAkE,EAAoBQ,EAAK,MAAA,EAErBA,EAAK,UACR1E,EAAA,EAAAmE,EACC,KAAK,MAAOO,EAAK,UAAYA,EAAK,MAAS,GAAI,EAAI,EAAA,MAEpDP,EAA0B,GAAA,IAOxB,OAAApK,EAAA,CACR,QAAQ,IAAIA,CAAK,EACjBoG,GAAM,MAAMpG,CAAK,IAKpB4K,GAAO,IAAU,MAAAhB,EAAA,CAAA,MAEjBI,EAAqB,EAAA,MAErBC,EAAiB,EAAA,MACjBC,EAAqB,EAAA,MACrBC,EAAoB,EAAA,MACpBC,EAA0B,IAAA,GAG3B9D,GAAA,SAAA,EAC4B,MAAAuE,GAAgB,aAAa,KAAK,GAE5C,uBAChBhB,EAAgB,EAAA,QAEV,QAAQ,IAAA,YAEZC,EAAA,MAAoBgB,GAAc,aAAa,KAAK,EAAE,MAAO9K,IAC5DoG,GAAM,MAAMpG,CAAK,OAId8J,EAAY,OAAS,IACxBC,EAAuB,kBAIxB9D,EAAA,EAAAsC,EAAA,MAAsBK,GAAiB,aAAa,KAAK,EAAE,MAAO5I,GAAU,EAAK,CAAA,cAInF6J,EAAgB,EAAA,EAChBzD,GAAM,MAAM,wBAAwB,kBAuPjB6D,EAAc,KAAA,0BAKdC,EAAkB,KAAA,0BAY7BG,sQCjoB8BU,EAAAtI,MAAS,MAAO,wHAAnCuI,EAAA,QAAAC,EAAAxI,MAAS,6BAAxBM,EAA6DvC,EAAAwK,EAAA/H,CAAA,iBAA3BwB,EAAA,CAAA,EAAA,GAAAsG,KAAAA,EAAAtI,MAAS,MAAO,KAAAiC,EAAAwG,EAAAH,CAAA,EAAnCtG,EAAA,CAAA,EAAA,GAAAwG,KAAAA,EAAAxI,MAAS,uHAgCQA,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,mCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CM,EAAqDvC,EAAAsH,EAAA7E,CAAA,mCAArBR,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,uDAsCEtI,EAAK,EAAA,EAAC,EAAE,YAAY,EAAA,qBA+BpBA,EAAK,EAAA,EAAC,EAAE,cAAc,EAAA,gJAtB/D,OAAAA,OAAc,KAAI0I,wBAQpBC,EAAA3I,OAAc,MAAIiH,GAAAjH,CAAA,kBAsBhB,GAAAA,OAAkB,GAAE,OAAAuF,GAEf,GAAAvF,OAAkB,OAAM,OAAAuG,+rCA7CrCjG,EAAoCvC,EAAA8D,EAAArB,CAAA,WAEpCF,EA6BMvC,EAAAgD,EAAAP,CAAA,EA5BLC,EAgBMM,EAAAE,CAAA,EAfLR,EAA2EQ,EAAAiE,CAAA,gBAE3EzE,EAYSQ,EAAAD,CAAA,6CAeXV,EA2BMvC,EAAAqD,EAAAZ,CAAA,EA1BLC,EAyBMW,EAAAD,CAAA,EAxBLV,EAA6EU,EAAAL,CAAA,gBAE7EL,EAqBSU,EAAAE,CAAA,iLAtDsCrB,EAAK,EAAA,EAAC,EAAE,YAAY,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,kEAiB/D5F,OAAc,uFAc6BA,EAAK,EAAA,EAAC,EAAE,cAAc,EAAA,KAAAiC,EAAA2G,EAAAC,CAAA,wPAnBlC7I,EAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,kKAAjDM,EAA2DvC,EAAAsH,EAAA7E,CAAA,mCAA1BR,EAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFhBtI,EAAK,EAAA,EAAC,EAAE,SAAS,EAAA,kKAAlDM,EAA4DvC,EAAAsH,EAAA7E,CAAA,mCAA3BR,EAAK,EAAA,EAAC,EAAE,SAAS,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,2VAYrCtI,EAAK,EAAA,EAAC,EAAE,uDAAuD,CAAA,6CAJ9EM,EAOMvC,EAAAsI,EAAA7F,CAAA,EANLC,EAKE4F,EAAAG,CAAA,OADWxG,EAAS,CAAA,CAAA,4DADRA,EAAK,EAAA,EAAC,EAAE,uDAAuD,6CAChEA,EAAS,CAAA,QAATA,EAAS,CAAA,CAAA,kDA6BYA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,kKAA/CM,EAAyDvC,EAAAsH,EAAA7E,CAAA,mCAAxBR,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAZdtI,EAAK,EAAA,EAAC,EAAE,SAAS,EAAA,kKAAlDM,EAA4DvC,EAAAsH,EAAA7E,CAAA,mCAA3BR,EAAK,EAAA,EAAC,EAAE,SAAS,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,+CA7IftI,EAAK,EAAA,EAAC,EAAE,UAAU,EAAA,aAGVA,EAAK,EAAA,EAAC,EAAE,OAAO,EAAA,iBAQjCA,EAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,WAClBA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,WACTA,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,WACvBA,EAAK,EAAA,EAAC,EAAE,OAAO,EAAA,aAQIA,EAAK,EAAA,EAAC,EAAE,UAAU,EAAA,4BA+BjBA,EAAK,EAAA,EAAC,EAAE,eAAe,EAAA,8BAsB9BA,EAAK,EAAA,EAAC,EAAE,eAAe,EAAA,yBAUpCA,EAAK,EAAA,EAAC,EAAE,qBAAqB,EAAA,gBAMpDA,EAAY,CAAA,EAAGA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAIA,EAAK,EAAA,EAAC,EAAE,MAAM,GAAA,qBAkGpDA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,qBA7JLA,EAAS,CAAA,CAAA,2BAAd,OAAI8I,IAAA,gCAMJ9I,EAAK,EAAA,EAAC,WAAa,SAAO+I,GAAA,qBAwBvB,OAAA/I,QAAwB,GAAIgJ,+BAiC/BhJ,EAAY,CAAA,GAAAiJ,GAAAjJ,CAAA,oJApFS,KAAG,2BACL,KAAG,2BACE,KAAG,2BACP,KAAG,y2BAHF,KAAG,iEACL,KAAG,iEACE,KAAG,iEACP,KAAG,8pDAPbA,EAAa,CAAA,IAAA,QAAAkJ,GAAA,IAAAlJ,EAAA,EAAA,EAAA,KAAAmJ,CAAA,CAAA,yRAmBbnJ,EAAI,CAAA,IAAA,QAAAkJ,GAAA,IAAAlJ,EAAA,EAAA,EAAA,KAAAoJ,CAAA,CAAA,o8BA7BtB9I,EAmMMvC,GAAAsL,EAAA7I,EAAA,EAlMLC,EAkKM4I,EAAAC,CAAA,EAjKL7I,EAuEM6I,EAAA7H,CAAA,EAtELhB,EAAkEgB,EAAAyD,CAAA,gBAElEzE,EAiBMgB,EAAAX,CAAA,EAhBLL,EAAsEK,EAAAG,CAAA,gBACtER,EAcMK,EAAAC,CAAA,EAbLN,EAYSM,EAAAoI,CAAA,EANR1I,EAAsD0I,EAAAI,CAAA,gBACtD9I,EAAkD0I,EAAAK,CAAA,gBAClD/I,EAA4D0I,EAAAM,CAAA,gBAC5DhJ,EAAoD0I,EAAAO,CAAA,qBAPxC1J,EAAa,CAAA,EAAA,EAAA,SAc5BS,EAgBMgB,EAAAP,CAAA,EAfLT,EAAyES,EAAAC,CAAA,gBACzEV,EAaMS,EAAAE,CAAA,EAZLX,EAWSW,EAAAgI,CAAA,gEATIpJ,EAAI,CAAA,EAAA,EAAA,kCAyBnBS,EAkBMgB,EAAAE,EAAA,EAjBLlB,EAgBMkB,GAAAD,EAAA,EAfLjB,EAA8EiB,GAAAb,EAAA,oBAE9EJ,EAYSiB,GAAAV,EAAA,wBAKZP,EAAyC6I,EAAAzH,EAAA,UAEzCpB,EAOM6I,EAAA1I,EAAA,EANLH,EAAyEG,GAAAY,EAAA,oBACzEf,EAIEG,GAAA8F,EAAA,QAHW1G,EAAM,CAAA,CAAA,UAMpBS,EA4EM6I,EAAA/I,EAAA,EA3ELE,EASMF,GAAAuB,CAAA,EARLrB,EAAiEqB,EAAApB,CAAA,kBACjED,EAMCqB,EAAAT,EAAA,8CAsEJZ,EA6BM4I,EAAAM,EAAA,EA5BLlJ,EA2BSkJ,GAAArI,EAAA,iPA9LgCtB,GAAK,EAAA,EAAC,EAAE,UAAU,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,4BAGVhH,GAAK,EAAA,EAAC,EAAE,OAAO,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,4BAQjC5F,GAAK,EAAA,EAAC,EAAE,QAAQ,EAAA,KAAAiC,EAAAG,EAAAC,CAAA,4BAClBrC,GAAK,EAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAAK,EAAAC,CAAA,4BACTvC,GAAK,EAAA,EAAC,EAAE,WAAW,EAAA,KAAAiC,EAAAO,EAAAC,CAAA,4BACvBzC,GAAK,EAAA,EAAC,EAAE,OAAO,EAAA,KAAAiC,EAAAS,EAAAC,CAAA,gBAP7B3C,GAAa,CAAA,CAAA,4BAeoBA,GAAK,EAAA,EAAC,EAAE,UAAU,EAAA,KAAAiC,EAAA2H,EAAAC,CAAA,iBAUxD7J,GAAS,CAAA,CAAA,wBAAd,OAAI8I,IAAA,EAAA,2IAAJ,sBANU9I,GAAI,CAAA,CAAA,EAYdA,GAAK,EAAA,EAAC,WAAa,0FAeyBA,GAAK,EAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAA6H,GAAAC,EAAA,8GAsB9B/J,GAAK,EAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAA+H,GAAAC,EAAA,kBAEpDjK,GAAM,CAAA,CAAA,8BAQUA,GAAK,EAAA,EAAC,EAAE,qBAAqB,EAAA,KAAAiC,EAAAiI,GAAAC,EAAA,+BAMpDnK,GAAY,CAAA,EAAGA,GAAK,EAAA,EAAC,EAAE,MAAM,EAAIA,GAAK,EAAA,EAAC,EAAE,MAAM,GAAA,KAAAiC,EAAAmI,GAAAC,EAAA,EAIhDrK,GAAY,CAAA,qJA8FhBA,GAAK,EAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAAqI,GAAAC,EAAA,6KA9TXC,EAAWC,KAIX3H,EAAOC,GAAW,MAAM,uBAInB,GAAA,CAAA,aAAA2H,CAAA,EAAAzH,EACA,CAAA,UAAAkE,CAAA,EAAAlE,EAGP0H,EAAA,CAAU,OAAQ,QAAS,iBAAkB,uBAAwB,WAAW,EAChFC,EAAgB,SAEhBC,EAAA,CAAA,EACAC,EAAOjG,EAAM,SACbkG,EAAsB,GACtBC,EAAS,GAETC,EAAe,GAEb,MAAAC,EAAA,SAAA,CACC,MAAmB,aAAa,sBAEnB,eAClBH,EAAuB,CAAAA,CAAA,EACvBL,EAAe,CAAA,oBAAAK,CAAA,CAAA,GAEfpH,GAAM,MACL,2JAAA,OAMCwH,EAAgB,GAChBC,EAAY,KAEZC,EAAA,CAEH,KAAM,EACN,YAAa,GACb,kBAAmB,GACnB,cAAe,GACf,SAAU,GACV,aAAc,GACd,aAAc,GACd,MAAO,GACP,MAAO,GACP,KAAM,KACN,MAAO,GACP,QAAS,GACT,WAAY,IAGP,MAAAC,EAAA,SAAA,CACDH,IAAkB,OACrBA,EAAgB,MAAA,MAEhBA,EAAgB,EAAA,EAGjBT,EAAA,CAAe,cAAeS,IAAkB,GAAKA,EAAgB,UAGtEtH,GAAA,SAAA,SACCL,EAAA,EAAAoH,EAAgB,aAAa,OAAS,QAAA,MAEtCC,EAAkB,MAAAU,GAAA,CAAA,EAElB/H,EAAA,EAAAuH,EAAsBS,EAAU,qBAAuB,EAAA,EACvDhI,EAAA,EAAAwH,EAASQ,EAAU,QAAU,EAAA,EAE7BhI,EAAA,EAAA2H,EAAgBK,EAAU,eAAiB,EAAA,EAC3ChI,EAAA,EAAA4H,EAAYI,EAAU,WAAa,IAAA,MAEnCH,EAAO,KAAOG,EAAU,MAAQ,EAAAH,CAAA,MAChCA,EAAO,YAAcG,EAAU,aAAe,GAAAH,CAAA,MAC9CA,EAAO,kBAAoBG,EAAU,mBAAqB,GAAAH,CAAA,MAC1DA,EAAO,MAAQG,EAAU,OAAS,GAAAH,CAAA,MAClCA,EAAO,MAAQG,EAAU,OAAS,GAAAH,CAAA,MAClCA,EAAO,QAAUG,EAAU,SAAW,GAAAH,CAAA,EACtC7H,EAAA,EAAA6H,EAAA,CAAA,GAAcA,KAAWG,EAAU,MAAA,CAAA,MACnCH,EAAO,MAAOI,EAAAD,GAAA,YAAAA,EAAW,SAAX,MAAAC,EAAmB,QAAQC,EAAAF,GAAA,YAAAA,EAAW,SAAX,YAAAE,EAAmB,OAAY,CAAA,GAAA,KAAK,GAAG,EAAI,gBAG/EC,EAAcC,GAAA,KACfC,EAAeD,IAAW,YAAc,OAASA,EAEjDA,IAAW,WACdC,EAAe,OAAO,WAAW,8BAA8B,EAAE,QAAU,OAAS,SAGjFA,IAAiB,QAAA,CAAWD,EAAO,SAAS,MAAM,IACrD,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,SAAS,EACxE,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,SAAS,GAGzEjB,EACE,OAAQ3G,GAAMA,IAAM6H,CAAY,EAChC,QAAS7H,GAAA,CACTA,EAAE,MAAM,GAAG,EAAE,QAASA,GAAAA,CACrB,SAAS,gBAAgB,UAAU,OAAOA,CAAC,MAI9C6H,EAAa,MAAM,GAAG,EAAE,QAAS7H,GAAA,CAChC,SAAS,gBAAgB,UAAU,IAAIA,CAAC,IAGzC,QAAQ,IAAI4H,CAAM,GAGbE,EAAsBF,GAAA,CAC3BG,GAAM,IAAIH,CAAM,EAChB,aAAa,QAAQ,QAASA,CAAM,EAChCA,EAAO,SAAS,MAAM,IACzB,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,SAAS,EACxE,SAAS,gBAAgB,MAAM,YAAY,mBAAoB,SAAS,EACxE,SAAS,gBAAgB,UAAU,IAAI,MAAM,GAE9CD,EAAWC,CAAM,gBAcDhB,EAAaoB,GAAA,IAAA,SAER,MAAAC,EAAA,IAAAH,EAAmBlB,CAAa,eAiBrCE,EAAIkB,GAAA,IAAA,wBAEJhI,GAAC,CACZa,EAAM,eAAeiG,CAAI,UA6BzBI,kBAmBSF,EAAM,KAAA,0BAahBxH,EAAA,EAAAyH,GAAgBA,CAAY,yCAiB1BzH,EAAA,EAAA4H,EAAYA,IAAc,KAAO,KAAO,IAAI,gBAiBhCA,EAAS,KAAA,0BAarBE,YA6BJZ,EAAY,CACX,OAAQM,IAAW,GAAKA,EAAS,OACjC,OAAM,CACL,MAAOK,EAAO,OAAS,EAAIA,EAAO,KAAO,SAAc,OACvD,KAAMA,EAAO,KAAOA,EAAO,KAAK,MAAM,GAAG,EAAE,OAAQrH,GAAMA,CAAC,EAAI,OAC9D,YAAaqH,EAAO,cAAgB,GAAKA,EAAO,YAAc,OAC9D,kBACCA,EAAO,oBAAsB,GAAKA,EAAO,kBAAoB,OAC9D,cAAeA,EAAO,gBAAkB,GAAKA,EAAO,cAAgB,OACpE,SAAUA,EAAO,WAAa,GAAKA,EAAO,SAAW,OACrD,aAAcA,EAAO,eAAiB,GAAKA,EAAO,aAAe,OACjE,aAAcA,EAAO,eAAiB,GAAKA,EAAO,aAAe,OACjE,MAAOA,EAAO,QAAU,GAAKA,EAAO,MAAQ,OAC5C,MAAOA,EAAO,QAAU,GAAKA,EAAO,MAAQ,OAC5C,MAAOA,EAAO,QAAU,GAAKA,EAAO,MAAQ,OAC5C,QAASA,EAAO,UAAY,GAAKA,EAAO,QAAU,OAClD,WAAYA,EAAO,aAAe,GAAKA,EAAO,WAAa,QAE5D,UAAWD,EAAa,MAAMA,CAAS,EAAIA,EAAY,SAASA,CAAS,EAAK,SAE/EZ,EAAS,MAAM,whBCxKoBxK,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,oCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CM,EAAqDvC,EAAAsH,EAAA7E,CAAA,oCAArBR,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAsBZtI,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,oCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CM,EAAqDvC,EAAAsH,EAAA7E,CAAA,oCAArBR,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAwBZtI,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,oCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CM,EAAqDvC,EAAAsH,EAAA7E,CAAA,oCAArBR,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAsBZtI,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,oCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CM,EAAqDvC,EAAAsH,EAAA7E,CAAA,oCAArBR,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,6CAY3CtI,EAAK,EAAA,EAAC,EAAE,iDAAiD,EAAA,6BAUrD,OAAAA,OAAiB,GAAIgJ,khBAb7B1I,EAoBMvC,EAAAgD,EAAAP,CAAA,EAnBLC,EAkBMM,EAAAE,CAAA,EAjBLR,EAEMQ,EAAAiE,CAAA,gBAENzE,EAYSQ,EAAA0F,CAAA,yEAfP3G,EAAK,EAAA,EAAC,EAAE,iDAAiD,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,wHAazBhH,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,oCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CM,EAAqDvC,EAAAsH,EAAA7E,CAAA,oCAArBR,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAyBbtI,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,oCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CM,EAAqDvC,EAAAsH,EAAA7E,CAAA,oCAArBR,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAqBbtI,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,oCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,oCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,uCAyBkBA,EAAAtI,MAAM,KAAI,gIAA1DuI,EAAA,QAAAC,EAAAxI,MAAM,uEAArBM,EAAmFvC,EAAAwK,EAAA/H,CAAA,iBAApBwB,EAAA,CAAA,EAAA,OAAAsG,KAAAA,EAAAtI,MAAM,KAAI,KAAAiC,EAAAwG,EAAAH,CAAA,EAA1DtG,EAAA,CAAA,EAAA,OAAAwG,KAAAA,EAAAxI,MAAM,ktBAgBtBM,EAaMvC,EAAA6I,EAAApG,CAAA,EALLC,EAIEmG,EAAAsF,CAAA,4CAeClF,EAAAhH,MAAM,KAAI,+IADGuI,EAAA,QAAAC,EAAAxI,MAAM,uEAArBM,EAESvC,EAAAwK,EAAA/H,CAAA,wBADPwB,EAAA,CAAA,EAAA,OAAAgF,KAAAA,EAAAhH,MAAM,KAAI,KAAAiC,EAAA8E,EAAAC,CAAA,EADGhF,EAAA,CAAA,EAAA,OAAAwG,KAAAA,EAAAxI,MAAM,wEAiBnBgH,EAAAhH,MAAM,KAAI,+IADGuI,EAAA,QAAAC,EAAAxI,MAAM,uEAArBM,EAESvC,EAAAwK,EAAA/H,CAAA,wBADPwB,EAAA,CAAA,EAAA,OAAAgF,KAAAA,EAAAhH,MAAM,KAAI,KAAAiC,EAAA8E,EAAAC,CAAA,EADGhF,EAAA,CAAA,EAAA,OAAAwG,KAAAA,EAAAxI,MAAM,kFAwBrBA,EAAK,EAAA,EAAC,EAAE,4BAA4B,EAAA,0QAyB/BA,EAAiB,CAAA,CAAA,uBAAtB,OAAI8I,GAAA,2BA+CF9I,EAAiB,CAAA,EAAC,OAAS,GAACuF,GAAAvF,CAAA,s3BA7ElCM,EAAoCvC,EAAA8D,EAAArB,CAAA,WAEpCF,EAgFMvC,EAAA+C,EAAAN,CAAA,EA/ELC,EAyBMK,EAAAG,CAAA,EAxBLR,EAEMQ,EAAAiE,CAAA,gBAENzE,EAmBSQ,EAAA0F,CAAA,SAEVlG,EA8CMK,EAAAC,CAAA,uIAtEHf,EAAK,EAAA,EAAC,EAAE,4BAA4B,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,mBAyB/BpF,EAAiB,CAAA,CAAA,oBAAtB,OAAI8I,GAAA,EAAA,mHAAJ,OA+CE9I,EAAiB,CAAA,EAAC,OAAS,uwCAzCbA,EAAK,EAAA,EAAC,EAAE,iCAAiC,CAAA,0HAMzCA,EAAK,EAAA,EAAC,EAAE,wCAAwC,CAAA,mLAOjDA,EAAK,EAAA,EAAC,EAAE,yDAAyD,CAAA,kJAlBjFM,EA0CMvC,EAAAgD,EAAAP,CAAA,EAzCLC,EAoBMM,EAAAE,CAAA,EAnBLR,EAYMQ,EAAAiE,CAAA,EAXLzE,EAIEyE,EAAAvE,CAAA,OADWX,EAAM,EAAA,EAAC,MAAM,CAAC,CAAA,SAG3BS,EAIEyE,EAAAtD,CAAA,OADW5B,EAAM,EAAA,EAAC,MAAM,CAAC,CAAA,SAI5BS,EAIEQ,EAAAkL,CAAA,EADWC,GAAAD,EAAAnM,MAAO,OAAO,SAI5BS,EAkBSM,EAAA4F,CAAA,sHApCO3G,EAAK,EAAA,EAAC,EAAE,iCAAiC,6CAC1CA,EAAM,EAAA,EAAC,MAAM,CAAC,QAAdA,EAAM,EAAA,EAAC,MAAM,CAAC,CAAA,qBAKbA,EAAK,EAAA,EAAC,EAAE,wCAAwC,6CACjDA,EAAM,EAAA,EAAC,MAAM,CAAC,QAAdA,EAAM,EAAA,EAAC,MAAM,CAAC,CAAA,qBAMdA,EAAK,EAAA,EAAC,EAAE,yDAAyD,yBAClEgC,EAAA,CAAA,EAAA,KAAAmK,EAAA,QAAAnM,MAAO,SAAPoM,GAAAD,EAAAnM,MAAO,OAAO,oDA6B5BA,EAAK,EAAA,EAAC,EAAE,uEAAuE,EAAA,6KADjFM,EAEMvC,EAAAsI,EAAA7F,CAAA,oCADJR,EAAK,EAAA,EAAC,EAAE,uEAAuE,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,+CAlU3CtI,EAAK,EAAA,EAAC,EAAE,eAAe,EAAA,eAIdA,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,mBAoBxBA,EAAK,EAAA,EAAC,EAAE,uBAAuB,EAAA,mBAqB5EA,EAAK,EAAA,EAAC,EAAE,gCAAgC,EAAA,mBAqBKA,EAAK,EAAA,EAAC,EAAE,iBAAiB,EAAA,0BA6CtEA,EAAK,EAAA,EAAC,EAAE,+CAA+C,EAAA,2BAsBXA,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,kCAqBnCA,EAAK,EAAA,EAAC,EAAE,eAAe,EAAA,qBAUtBA,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,2BAYzCA,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,sDA8BfA,EAAK,EAAA,EAAC,EAAE,eAAe,EAAA,mDAgBvBA,EAAK,EAAA,EAAC,EAAE,eAAe,EAAA,qBAWVA,EAAK,EAAA,EAAC,EAAE,yBAAyB,EAAA,2BAqG3EA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,kCAjUP,OAAAA,SAAe,GAAIqM,+CAoBnB,OAAArM,QAAsB,GAAIsM,+CAsB1B,OAAAtM,QAAqB,GAAIuM,+CAoBzB,OAAAvM,QAAmB,GAAI+I,4BASzByD,GAAA,CAAAxM,MAAU,YAAU0I,GAAA1I,CAAA,qBAqClB,OAAAA,QAAqB,GAAIiH,+CAmB1B,OAAAjH,SAAkB,MAAKuG,4BAyBrBkG,GAAAC,GAAA1M,MAAQ,OAAM3B,EAAA,CAAA,2BAAnB,OAAIyK,IAAA,mDAaG9I,EAAK,EAAA,EAAC,EACd,uGAAuG,4CA4BhG,IAAA2M,GAAAD,GAAA1M,MAAQ,OAAM4M,EAAA,CAAA,2BAAnB,OAAI9D,IAAA,mCAgBC9I,EAAO,EAAA,CAAA,2BAAZ,OAAI8I,IAAA,gCAmBL9I,EAAK,EAAA,EAAC,OAAS,SAAOiJ,GAAAjJ,CAAA,+kMAjFZA,EAAc,CAAA,IAAA,QAAAkJ,GAAA,IAAAlJ,EAAA,EAAA,EAAA,KAAAmJ,EAAA,CAAA,6WA2CZnJ,EAAK,EAAA,EAAC,EAAE,gBAAgB,CAAA,EADzBA,EAAsB,CAAA,IAAA,QAAAkJ,GAAA,IAAAlJ,EAAA,EAAA,EAAA,KAAAoJ,EAAA,CAAA,gOAiBrBpJ,EAAK,EAAA,EAAC,EAAE,gBAAgB,CAAA,EADzBA,EAA8B,CAAA,IAAA,QAAAkJ,GAAA,IAAAlJ,EAAA,EAAA,EAAA,KAAA6M,EAAA,CAAA,8jBApOhDvM,EA0VOvC,GAAA+O,EAAAtM,EAAA,EAnVNC,EAyUMqM,EAAAC,CAAA,EAxULtM,EAkIMsM,EAAAzD,CAAA,EAjIL7I,EAAuE6I,EAAApE,CAAA,gBAEvEzE,EAkBM6I,EAAAxI,CAAA,EAjBLL,EAgBMK,EAAAC,CAAA,EAfLN,EAA+EM,EAAAE,CAAA,gBAE/ER,EAYSM,EAAAC,CAAA,sBAIXP,EAkBM6I,EAAApI,CAAA,EAjBLT,EAgBMS,EAAAE,CAAA,EAfLX,EAAsFW,EAAAD,CAAA,gBAEtFV,EAYSW,EAAAC,CAAA,sBAIXZ,EAoBM6I,EAAA3H,CAAA,EAnBLlB,EAkBMkB,EAAAD,CAAA,EAjBLjB,EAEMiB,EAAAb,CAAA,gBAENJ,EAYSiB,EAAAJ,CAAA,sBAIXb,EAkBM6I,EAAA1I,CAAA,EAjBLH,EAgBMG,EAAAY,CAAA,EAfLf,EAAgFe,EAAAC,CAAA,gBAEhFhB,EAYSe,EAAAD,CAAA,+CA4BXd,EAoBM6I,EAAA/I,EAAA,EAnBLE,EAkBMF,GAAAuB,EAAA,EAjBLrB,EAEMqB,GAAApB,EAAA,oBAEND,EAYSqB,GAAAC,EAAA,wBAKZtB,EAgBMsM,EAAAC,EAAA,EAfLvM,EAcMuM,GAAA3D,EAAA,EAbL5I,EAA+E4I,GAAAM,EAAA,oBAE/ElJ,EAUS4I,GAAA4D,EAAA,wBAIXxM,EAAoCsM,EAAAG,EAAA,UAEpCzM,EAmBMsM,EAAAI,CAAA,EAlBL1M,EAIM0M,EAAAC,CAAA,EAHL3M,EAEM2M,EAAAC,EAAA,EADL5M,EAAkE4M,GAAAC,EAAA,mBAIpE7M,EAWM0M,EAAAI,EAAA,EAVL9M,EASS8M,GAAApE,EAAA,EAJR1I,EAAuE0I,GAAAI,EAAA,2EAH3DvJ,EAAc,CAAA,EAAA,EAAA,UAW7BS,EAAoCsM,EAAAS,EAAA,UAEpC/M,EAkEMsM,EAAAU,EAAA,EAjELhN,EAsBMgN,GAAAC,EAAA,EArBLjN,EAAoDiN,GAAAC,EAAA,4CAsBrDlN,EAgCMgN,GAAAG,EAAA,EA/BLnN,EAcMmN,GAAAC,EAAA,EAbLpN,EAA6CoN,GAAAC,EAAA,WAC7CrN,EAWSoN,GAAAzE,EAAA,EANR3I,EAA6D2I,GAAAI,EAAA,2EAHjDxJ,EAAsB,CAAA,EAAA,EAAA,WAYpCS,EAcMmN,GAAAG,EAAA,EAbLtN,EAAgDsN,GAAAC,EAAA,WAChDvN,EAWSsN,GAAAlB,EAAA,EANRpM,EAA6DoM,GAAApD,EAAA,2EAHjDzJ,EAA8B,CAAA,EAAA,EAAA,WAa7CS,EAOMgN,GAAAQ,EAAA,EANLxN,EAAmFwN,GAAAC,EAAA,oBACnFzN,EAIEwN,GAAAvH,EAAA,QAHW1G,EAAqB,CAAA,CAAA,mCA8FrCS,EAOMqM,EAAAqB,EAAA,EANL1N,EAKS0N,GAAAC,EAAA,6IAtMIpO,EAAyB,EAAA,CAAA,kKAzIGA,GAAK,EAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,6BAIdhH,GAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,4GAoBxB5F,GAAK,EAAA,EAAC,EAAE,uBAAuB,EAAA,KAAAiC,EAAAG,EAAAC,CAAA,4GAqB5ErC,GAAK,EAAA,EAAC,EAAE,gCAAgC,EAAA,KAAAiC,EAAAoM,EAAAC,CAAA,4GAqBKtO,GAAK,EAAA,EAAC,EAAE,iBAAiB,EAAA,KAAAiC,EAAAS,EAAAC,CAAA,iFAkBpE3C,OAAU,2GA2BZA,GAAK,EAAA,EAAC,EAAE,+CAA+C,EAAA,KAAAiC,EAAAsM,GAAAC,EAAA,+GAsBXxO,GAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAAwM,GAAAC,EAAA,+GAqBnC1O,GAAK,EAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAA0M,GAAAC,EAAA,+BAUtB5O,GAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAAiI,GAAAC,EAAA,eACrDsC,GAAAC,GAAA1M,OAAQ,OAAM3B,EAAA,CAAA,wBAAnB,OAAIyK,IAAA,EAAA,4IAAJ,0BAJU9I,GAAc,CAAA,CAAA,+BAePA,GAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAA4M,GAAAC,EAAA,0CAElC9O,GAAK,EAAA,EAAC,EACd,uGAAuG,0FA2B5EA,GAAK,EAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAA8M,GAAAC,EAAA,eAC3CrC,GAAAD,GAAA1M,OAAQ,OAAM4M,EAAA,CAAA,wBAAnB,OAAI9D,IAAA,EAAA,4IAAJ,sCAHW9I,GAAK,EAAA,EAAC,EAAE,gBAAgB,+CADzBA,GAAsB,CAAA,CAAA,+BAmBPA,GAAK,EAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAAgN,GAAAC,EAAA,qBAC3ClP,GAAO,EAAA,CAAA,wBAAZ,OAAI8I,IAAA,EAAA,4IAAJ,mCAHW9I,GAAK,EAAA,EAAC,EAAE,gBAAgB,+CADzBA,GAA8B,CAAA,CAAA,+BAcFA,GAAK,EAAA,EAAC,EAAE,yBAAyB,EAAA,KAAAiC,EAAAkN,GAAAC,EAAA,kBAE9DpP,GAAqB,CAAA,CAAA,EAO/BA,GAAK,EAAA,EAAC,OAAS,0GA4FlBA,GAAK,EAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAAoN,GAAAC,EAAA,2NAzKUC,GAAUA,EAAM,GA0Cf3C,GAAA4C,GAAMA,EAAE,WAAa,gJA/U3ChF,EAAWC,KAEX3H,EAAOC,GAAW,MAAM,yBAEnB,GAAA,CAAA,aAAA2H,CAAA,EAAAzH,EAGPwM,EAAoB,GACpBC,EAAmB,GACnBC,EAAyB,GACzBC,EAAiC,GACjCC,EAAiB,GACjBC,EAAwB,GACxBC,EAAmB,GAGnBC,EAAiB,GACjBC,EAAA,CAAA,EACAC,EAAe,GACfC,EAAa,GACbC,EAA+B,MAE7B,MAAAC,EAAA,SAAA,KACLN,EAAoB,CAAAA,CAAA,EACpBrF,EAAe,CAAA,iBAAAqF,CAAA,CAAA,GAGVO,EAAA,SAAA,KACLT,EAAkB,CAAAA,CAAA,EAClBnF,EAAe,CAAA,eAAAmF,CAAA,CAAA,GAGVU,EAAA,SAAA,MACLJ,EAAc,CAAAA,CAAA,EACdzF,EAAe,CAAA,WAAAyF,CAAA,CAAA,GAGVK,EAAA,SAAA,KACLN,EAAgB,CAAAA,CAAA,EAChBxF,EAAe,CAAA,aAAAwF,CAAA,CAAA,GAGVO,EAAA,SAAA,KACLhB,EAAqB,CAAAA,CAAA,EACrB/E,EAAA,CACC,MAAA,IACIc,EAAU,MACb,KAAMiE,MAKHiB,EAAA,SAAA,OACCC,GAAmB,MAAA,UAAU,UACjC,SACA,EAAA,KAAA,IACO,SAEP,EAAA,MAAA,IACO,IAGT,QAAQ,IAAIA,EAAU,EAElBA,KAAe,eAClBjB,EAAoB,CAAAA,CAAA,EACpBhF,EAAe,CAAA,iBAAAgF,CAAA,CAAA,GAEf/L,GAAM,MACL,sGAAA,GAKGiN,EAAA,SAAA,MACLR,EAAgBA,IAAkB,MAAQ,MAAQ,KAAA,EAClD1F,EAAe,CAAA,cAAA0F,CAAA,CAAA,GAGVS,EAAA,SAAA,CACDtN,EAAM,OAAS,cAClB0M,EAA0B,MAAAa,GAA4B,aAAa,MAAOb,CAAiB,CAAA,EACrF,MAAAc,GAAO,IAAU,MAAAC,GAAA,CAAA,GAGxBtG,EAAA,CACC,MAAA,IACIc,EAAU,MACb,MAAOmE,IAA2B,GAAKA,EAAyB,OAChE,cACCC,IAAmC,GAAKA,EAAiC,OAC1E,OAAQE,GAAgD,QAEzD,OAAA,CAASE,CAAc,KAIzBnM,GAAA,SAAA,iBACKN,EAAM,OAAS,SAClBC,EAAA,EAAAyM,EAAoBgB,GAAA,YAAAA,EAAS,0BAAA,MAG9BxB,IAAoBhE,GAAAD,GAAA,YAAAA,EAAW,QAAX,YAAAC,GAAkB,OAAQ,EAAA,MAC9CkE,IAAyBjE,GAAAF,GAAA,YAAAA,EAAW,QAAX,YAAAE,GAAkB,QAAS,EAAA,MACpDkE,IAAiCsB,GAAA1F,GAAA,YAAAA,EAAW,QAAX,YAAA0F,GAAkB,gBAAiB,EAAA,EACpE1N,EAAA,EAAAsM,IACCqB,GAAA3F,GAAA,YAAAA,EAAW,QAAX,YAAA2F,GAAkB,SAAA,qKAAA,EAEnB3N,EAAA,EAAAkM,EAAmBlE,EAAU,kBAAoB,EAAA,EACjDhI,EAAA,EAAA0M,EAAe1E,EAAU,cAAgB,EAAA,EACzChI,EAAA,GAAA2M,EAAa3E,EAAU,YAAc,EAAA,EACrChI,EAAA,EAAAqM,EAAiBrE,EAAU,gBAAkB,EAAA,EAC7ChI,EAAA,EAAAuM,EAAmBvE,EAAU,kBAAoB,EAAA,EACjDhI,EAAA,GAAA4M,EAAgB5E,EAAU,eAAiB,KAAA,EAE3ChI,EAAA,EAAAwM,IAAkBxE,GAAA,YAAAA,EAAW,SAAA,CAAW,EAAE,GAAG,GAAG,CAAC,CAAA,iBAsB5C+E,YAoBAE,YAsBAC,YAoBAJ,YAuBCE,YAuBDH,kBA4CUL,EAAchE,GAAA,IAAA,sBA0Cb2D,EAAsB3D,GAAA,IAAA,sBAgBtB4D,EAA8B5D,GAAA,IAAA,uBAgB/B8D,EAAqB,KAAA,4BAoB3BG,EAAkB,SAAW,GAAKA,EAAkB,GAAI,EAAC,EAAE,UAAY,SAC1EA,EAAiB,CAAA,GAAOA,EAAiB,CAAI,QAAS,GAAI,MAAK,CAAG,GAAI,EAAE,CAAA,CAAA,CAAA,sBAwBnDmB,GAAAC,EAAA,EAAA,MAAM,CAAC,EAAA,KAAA,gCAMPD,GAAAC,EAAA,EAAA,MAAM,CAAC,EAAA,KAAA,uCAOR,QAAO,KAAA,2BAQ1BpB,EAAkB,OAAOoB,GAAW,CAAC,kBAnT5CR,IACArG,EAAS,MAAM,qcCyEqBxK,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,oCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CM,EAAqDvC,EAAAsH,EAAA7E,CAAA,oCAArBR,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAsBZtI,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,oCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CM,EAAqDvC,EAAAsH,EAAA7E,CAAA,oCAArBR,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,uCAoCzChC,EAAAtG,OAAc,UAAQ0I,GAAA1I,CAAA,yFAAtBA,OAAc,4dAIHA,EAAK,EAAA,EAAC,EAAE,cAAc,CAAA,wIAOtBA,EAAK,EAAA,EAAC,EAAE,SAAS,CAAA,4DAVhCM,EAcMvC,EAAAsI,EAAA7F,CAAA,EAbLC,EAKE4F,EAAA1F,CAAA,OAFWX,EAAS,CAAA,CAAA,SAItBS,EAKE4F,EAAAzE,CAAA,OAFW5B,EAAS,CAAA,CAAA,mFARRA,EAAK,EAAA,EAAC,EAAE,cAAc,2CACvBA,EAAS,CAAA,QAATA,EAAS,CAAA,CAAA,qBAMRA,EAAK,EAAA,EAAC,EAAE,SAAS,2CAClBA,EAAS,CAAA,QAATA,EAAS,CAAA,CAAA,oDAoBUA,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,oCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CM,EAAqDvC,EAAAsH,EAAA7E,CAAA,oCAArBR,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,2CA0CJtI,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,yBAmBnBA,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,0BARnDA,EAAM,EAAA,CAAA,uBAAX,OAAI8I,GAAA,8BAmBC9I,EAAM,EAAA,CAAA,uBAAX,OAAI8I,GAAA,0iDA/BVxI,EAkBMvC,EAAA+C,EAAAN,CAAA,EAjBLC,EAAqEK,EAAAoE,CAAA,gBACrEzE,EAeMK,EAAAC,CAAA,EAdLN,EAaMM,EAAAE,CAAA,EAZLR,EAKEQ,EAAAN,CAAA,OAFWX,EAAa,CAAA,CAAA,SAI1BS,EAIWQ,EAAAqQ,CAAA,4DAIdhR,EAkBMvC,EAAA8C,EAAAL,CAAA,EAjBLC,EAAqEI,EAAAM,CAAA,gBACrEV,EAeMI,EAAAK,CAAA,EAdLT,EAaMS,EAAAE,CAAA,EAZLX,EAKEW,EAAAQ,CAAA,OAFW5B,EAAK,EAAA,CAAA,SAIlBS,EAIWW,EAAAmQ,CAAA,uIAjC6BvR,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,oBAM9ChH,EAAa,CAAA,QAAbA,EAAa,CAAA,CAAA,kBAKlBA,EAAM,EAAA,CAAA,oBAAX,OAAI8I,GAAA,EAAA,mHAAJ,6BAQqC9I,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,KAAAiC,EAAAuP,EAAAC,CAAA,wBAM9CzR,EAAK,EAAA,QAALA,EAAK,EAAA,CAAA,kBAKVA,EAAM,EAAA,CAAA,oBAAX,OAAI8I,GAAA,EAAA,mHAAJ,wFA5DqC9I,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,iBAOdA,EAAK,EAAA,EAAC,EAAE,SAAS,EAAA,WACtDoR,EAAA1E,GAAA1M,MAAO,OAAMA,EAAA,EAAA,CAAA,CAAA,uBAAlB,OAAI8I,GAAA,0lBADqBP,EAAA,SAAAmJ,EAAA1R,QAAY,uGAF3BA,EAAO,EAAA,IAAA,QAAAkJ,GAAA,IAAAlJ,EAAA,EAAA,EAAA,KAAA2R,CAAA,CAAA,2DANvBrR,EA4BMvC,EAAA+C,EAAAN,CAAA,EA3BLC,EAAqEK,EAAAoE,CAAA,gBACrEzE,EAgBMK,EAAAC,CAAA,EAfLN,EAcMM,EAAAE,CAAA,EAbLR,EAYSQ,EAAA0Q,CAAA,EARRlR,EAAwEkR,EAAApJ,CAAA,+DAF5DvI,EAAO,EAAA,EAAA,EAAA,iEALoBA,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,qBAOdhH,EAAK,EAAA,EAAC,EAAE,SAAS,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,EAAlC5D,EAAA,CAAA,EAAA,MAAA0P,KAAAA,EAAA1R,QAAY,+BAChCoR,EAAA1E,GAAA1M,MAAO,OAAMA,EAAA,EAAA,CAAA,CAAA,oBAAlB,OAAI8I,GAAA,EAAA,mHAAJ,uBAHU9I,EAAO,EAAA,CAAA,mJAqCHuI,EAAA,QAAAC,EAAAxI,MAAM,6BAArBM,EAA6BvC,EAAAwK,EAAA/H,CAAA,UAAdwB,EAAA,CAAA,EAAA,MAAAwG,KAAAA,EAAAxI,MAAM,qKAmBNuI,EAAA,QAAAC,EAAAxI,MAAM,6BAArBM,EAA6BvC,EAAAwK,EAAA/H,CAAA,UAAdwB,EAAA,CAAA,EAAA,MAAAwG,KAAAA,EAAAxI,MAAM,0EAjDesI,EAAAtI,MAAM,KAAI,kIAFtCuI,EAAA,QAAAC,EAAAxI,MAAM,8EAEHA,EAAO,EAAA,IAAKA,EAAK,EAAA,EAAC,aAH7BM,EAICvC,EAAAwK,EAAA/H,CAAA,iBADmCwB,EAAA,CAAA,EAAA,MAAAsG,KAAAA,EAAAtI,MAAM,KAAI,KAAAiC,EAAAwG,EAAAH,CAAA,EAFtCtG,EAAA,CAAA,EAAA,MAAAwG,KAAAA,EAAAxI,MAAM,uDAEHA,EAAO,EAAA,IAAKA,EAAK,EAAA,EAAC,mEArJMA,EAAK,EAAA,EAAC,EAAE,cAAc,EAAA,aA6BdA,EAAK,EAAA,EAAC,EAAE,mBAAmB,EAAA,iBAmBxEA,EAAK,EAAA,EAAC,EAAE,8BAA8B,EAAA,iBAoBDA,EAAK,EAAA,EAAC,EAAE,cAAc,EAAA,eA+CdA,EAAK,EAAA,EAAC,EAAE,wBAAwB,EAAA,wBAiG/EA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,+BA9KR,OAAAA,QAAqB,GAAI+I,+CAoBzB,OAAA/I,QAAmB,GAAIgJ,+BAoCzBhJ,EAAK,EAAA,EAAC,OAAS,SAAOiH,GAAAjH,CAAA,qBA8BpB,OAAAA,QAAyB,GAAIuG,+CAWhC,GAAAvG,QAAc,GAAE,OAAAiJ,GA8BX,GAAAjJ,QAAc,SAAQ,OAAAuF,47EA9LlCjF,EAgPOvC,GAAA+O,EAAAtM,EAAA,EAzNNC,EA+MMqM,EAAArL,CAAA,EA9MLhB,EAkEMgB,EAAAL,CAAA,EAjELX,EAAsEW,EAAA8D,CAAA,gBA4BtEzE,EAgBMW,EAAAL,CAAA,EAfLN,EAAkFM,EAAAE,CAAA,gBAElFR,EAYSM,EAAAC,CAAA,sBAGVP,EAkBMW,EAAAD,CAAA,EAjBLV,EAEMU,EAAAL,CAAA,gBAENL,EAYSU,EAAAE,CAAA,sBAIXZ,EAgEMgB,EAAAE,CAAA,EA/DLlB,EAAsEkB,EAAAT,CAAA,wCA8CtET,EAgBMkB,EAAAD,CAAA,EAfLjB,EAAuFiB,EAAAb,CAAA,gBAEvFJ,EAYSiB,EAAAJ,CAAA,sBAIXb,EAAoCgB,EAAAI,CAAA,iCA0ErCpB,EAOMqM,EAAAtL,CAAA,EANLf,EAKSe,EAAAD,CAAA,8IArNgCvB,GAAK,EAAA,EAAC,EAAE,cAAc,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,sBA6BdhH,GAAK,EAAA,EAAC,EAAE,mBAAmB,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,qGAmBxE5F,GAAK,EAAA,EAAC,EAAE,8BAA8B,EAAA,KAAAiC,EAAAG,EAAAC,CAAA,qGAoBDrC,GAAK,EAAA,EAAC,EAAE,cAAc,EAAA,KAAAiC,EAAAoM,EAAAC,CAAA,EA0BzDtO,GAAK,EAAA,EAAC,OAAS,8FAqB4BA,GAAK,EAAA,EAAC,EAAE,wBAAwB,EAAA,KAAAiC,EAAAS,EAAAC,CAAA,8LAiG/E3C,GAAK,EAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAAW,GAAAC,EAAA,qKAhXX2H,EAAWC,KAEX3H,EAAOC,GAAW,MAAM,uBAEnB,GAAA,CAAA,aAAA2H,CAAA,EAAAzH,EAIP2O,EAAY,GACZC,EAAY,GACZC,EAAgB,GAGhBC,EAAY,GAEZC,EAAmB,GACnBC,EAAiB,GACjBC,EAAuB,GACvBC,EAAiB,GAGjBC,EAAY,GAEZC,EAAA,CAAA,EACAC,EAAU,GACVnK,EAAA,CAAA,EACAoH,EAAQ,GAEN,MAAAgD,EAAA,IAAA,CACL/O,EAAA,GAAA6O,EAAA,EACG,KAAM,OAAA,GACN,KAAM,MAAA,GACN,KAAM,OAAA,GACN,KAAM,MAAA,GACN,KAAM,MAAA,GACN,KAAM,SAAA,KAIJG,EAAA,IAAA,MACLrK,EAAY,CAAA,CAAA,KAAM,UAAa,KAAM,UAAA,CAAA,CAAA,GAGhCsK,EAAA,IAAA,OACCC,EAAgB,sBACrBlP,EAAA,GAAA6O,EAAA,MAAe,gBAAgB,UAAA,CAAA,EAG3BA,EAAO,OAAS,GACnB,cAAcK,CAAa,GAE1B,MAGEC,EAAA,SAAA,KACLX,EAAoB,CAAAA,CAAA,EAEhBA,QACHE,EAAuB,EAAA,MACvBD,EAAiB,EAAA,GAGlBvH,EAAA,CACC,iBAAAsH,EACA,qBAAAE,EACA,eAAAD,KAIIW,EAAA,SAAA,KACLV,EAAwB,CAAAA,CAAA,EACxBxH,EAAe,CAAA,qBAAAwH,CAAA,CAAA,GAGVW,EAAA,SAAA,KACLZ,EAAkB,CAAAA,CAAA,EAClBvH,EAAe,CAAA,eAAAuH,CAAA,CAAA,GAGVa,EAAA,SAAA,IACDV,IAAc,SAAA,CACX,MAAAvK,EAAA,MAAYkL,GAAkB,aAAa,MAAA,CAChD,IAAKnB,EACL,IAAKC,EACL,MAAAtC,EACA,QAASuC,IAGNjK,IACHrE,EAAA,EAAAoO,EAAY/J,EAAI,mBAAA,EAChBrE,EAAA,EAAAqO,EAAYhK,EAAI,cAAA,EAChBrE,EAAA,GAAA+L,EAAQ1H,EAAI,gBAAA,EACZrE,EAAA,EAAAsO,EAAgBjK,EAAI,gBAAA,KAKvBhE,GAAA,SAAA,mBAkBK,GAjBJL,EAAA,EAAAwO,EAAmBxG,EAAU,kBAAoB,EAAA,EACjDhI,EAAA,EAAAyO,EAAiBzG,EAAU,gBAAkB,EAAA,EAC7ChI,EAAA,EAAA0O,EAAuB1G,EAAU,sBAAwB,EAAA,MAEzDuG,IAAYtG,EAAAD,GAAA,YAAAA,EAAW,QAAX,YAAAC,EAAkB,YAAa,EAAA,MAC3C2G,IAAY1G,GAAAF,GAAA,YAAAA,EAAW,QAAX,YAAAE,GAAkB,YAAa,EAAA,MAC3CyG,IAAiBjB,GAAA1F,EAAU,QAAV,YAAA0F,GAAiB,iBAAkB,EAAA,OACpDoB,IAAUnB,GAAA3F,GAAA,YAAAA,EAAW,QAAX,YAAA2F,GAAkB,UAAW,EAAA,OACvC5B,IAAQyD,GAAAxH,GAAA,YAAAA,EAAW,QAAX,YAAAwH,GAAkB,QAAS,EAAA,EAE/BZ,IAAc,UACjBG,IACAC,KAEAC,IAGGlP,EAAM,OAAS,QAAA,OACZsE,GAAY,MAAAoL,GAAe,aAAa,KAAK,EAE/CpL,KACHrE,EAAA,EAAAoO,EAAY/J,GAAI,mBAAA,EAChBrE,EAAA,EAAAqO,EAAYhK,GAAI,cAAA,EAChBrE,EAAA,GAAA+L,EAAQ1H,GAAI,gBAAA,EACZrE,EAAA,EAAAsO,EAAgBjK,GAAI,gBAAA,EAChBuK,IAAc,eACjBE,EAAUR,CAAA,mBAkETa,YAoBAE,kBA8CajB,EAAS,KAAA,0BAOTC,EAAS,KAAA,0BAatBe,KAyBuBvU,EAAA6U,GAAMf,GAAkBe,EAAE,eAAiB,gBAHrDZ,EAAOtG,GAAA,IAAA,sCA+BP8F,EAAa,KAAA,0BAmBbvC,EAAK,KAAA,gCAtNlBhM,EAAM,OAAS,eACZuP,EAAmB,EAE1BpI,EAAY,CACX,MAAK,CACJ,UAAWqH,IAAc,GAAKA,EAAY,OAC1C,UAAWK,IAAc,GAAKA,EAAY,OAC1C,SACEA,IAAc,SAAWN,EAAgBQ,KAAa,GACpDF,IAAc,SACbN,EACAQ,EACD,OACJ,MAAO/C,IAAU,GAAKA,EAAQ,OACd,eAAA4C,KAGlB3H,EAAS,MAAM,gQCJqBxK,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,y9BAhB7CM,EAcMvC,EAAA6I,EAAApG,CAAA,EARLC,EAIEmG,EAAAC,CAAA,EACFpG,EAEEmG,EAAAE,CAAA,WAGHxG,EAAsDvC,EAAAsH,EAAA7E,CAAA,8BAAtBR,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,6DAlBZpF,EAAK,CAAA,EAAC,EAAE,IAAI,EAAA,0wBAd7CM,EAYMvC,EAAA6I,EAAApG,CAAA,EANLC,EAAwDmG,EAAAC,CAAA,EACxDpG,EAIEmG,EAAAE,CAAA,WAGHxG,EAAuDvC,EAAAsH,EAAA7E,CAAA,8BAAtBR,EAAK,CAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,8hBA2KCpF,EAAK,CAAA,EAAC,EAAE,mBAAmB,EAAA,qfAvB3EM,EAwBSvC,EAAA4I,EAAAnG,CAAA,EAlBRC,EAgBMkG,EAAAzB,CAAA,SACNzE,EAAkFkG,EAAA1F,CAAA,8DAAnCjB,EAAK,CAAA,EAAC,EAAE,mBAAmB,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,8DAnElEpF,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,+nEAfhCM,EAyDMvC,EAAAgD,EAAAP,CAAA,EAxDLC,EAeMM,EAAAmE,CAAA,EAdLzE,EAYMyE,EAAAiO,CAAA,EANL1S,EAAmF0S,EAAAtM,CAAA,EACnFpG,EAIE0S,EAAArM,CAAA,SAEHrG,EAAuCyE,EAAAG,CAAA,gBAGxC5E,EAsCMM,EAAAE,CAAA,EArCLR,EAmBSQ,EAAAD,CAAA,SACTP,EAgBSQ,EAAAI,CAAA,6EAxCFrB,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,8aAuJgBpF,EAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,qfApB1EM,EAqBSvC,EAAA4I,EAAAnG,CAAA,EAfRC,EAaMkG,EAAAzB,CAAA,SACNzE,EAAiFkG,EAAA1F,CAAA,8DAAlCjB,EAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,8DAhEjEpF,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,+nEAfhCM,EAyDMvC,EAAAgD,EAAAP,CAAA,EAxDLC,EAeMM,EAAAmE,CAAA,EAdLzE,EAYMyE,EAAAiO,CAAA,EANL1S,EAAmF0S,EAAAtM,CAAA,EACnFpG,EAIE0S,EAAArM,CAAA,SAEHrG,EAAuCyE,EAAAG,CAAA,gBAGxC5E,EAsCMM,EAAAE,CAAA,EArCLR,EAmBSQ,EAAAD,CAAA,SACTP,EAgBSQ,EAAAI,CAAA,6EAxCFrB,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,4DAvNepF,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,eAgDpEA,EAAK,CAAA,EAAC,EAAE,wDAAwD,EAAA,6dAmClBA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,idAsBtBA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,wCAhG/D,OAAAA,QAAoB,GAAIuG,sDAuG1BvG,GAAkB,CAAA,EAAAuF,sDAuFlBvF,GAAiB,CAAA,EAAAiJ,09EA7MzB3I,EAkSMvC,GAAAyD,EAAAhB,EAAA,EAjSLC,EAgSMe,EAAAC,CAAA,EA/RLhB,EAsDMgB,EAAAX,CAAA,EAnDLL,EA8CMK,EAAAG,CAAA,EA7CLR,EAA6EQ,EAAAiE,CAAA,gBAE7EzE,EA0CSQ,EAAAD,CAAA,sBAGVP,EAEMK,EAAAC,CAAA,gBAGPN,EAAoCgB,EAAAyL,CAAA,SAEpCzM,EAqDMgB,EAAAC,CAAA,EApDLjB,EAOEiB,EAAA8E,CAAA,kBACF/F,EAqBSiB,EAAAL,CAAA,EAfRZ,EAaMY,EAAAF,CAAA,SACNV,EAA6EY,EAAAD,CAAA,gBAE9EX,EAqBSiB,EAAAJ,CAAA,EAfRb,EAaMa,EAAAJ,CAAA,SACNT,EAA6Ea,EAAAT,CAAA,gBAI/EJ,EAAoCgB,EAAA+L,CAAA,SAEpC/M,EA2KMgB,EAAAE,CAAA,+JA1R2C3B,GAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,+FAgDpEhH,GAAK,CAAA,EAAC,EAAE,wDAAwD,EAAA,KAAAiC,EAAAC,EAAAC,CAAA,gBAmClBnC,GAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAiC,EAAAoM,EAAAC,CAAA,gBAsBtBtO,GAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAiC,EAAAS,EAAAC,CAAA,8RAtNhE,OAAAyQ,CAAW,EAAAC,GAiBbvQ,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,aAAA2H,CAAA,EAAAzH,EAEPqQ,EAAkB,GAClBC,EAEAC,EAAqB,GACrBC,EAAoB,GAEpBC,QAwBEC,EAAqB,MAAAC,GAAA,WACfC,KAAQD,EAClB,QAAQ,IAAIC,CAAI,EAEZA,EAAK,WACFC,GAAc,aAAa,MAAOD,EAAK,IAAI,QAE3CC,GAAc,aAAa,MAAOD,CAAI,QAIxCE,GAAM,IAAA,MAAUC,GAAY,aAAa,KAAK,CAAA,GAG/CC,EAAA,SAAA,CACD,IAAAC,EAAA,IAAW,MAAM,KAAK,UAAA,MAAgBC,GAAY,aAAa,KAAK,KACvE,KAAM,kBAAA,CAAA,EAEPf,EAAOc,iBAAqB,KAAK,IAAA,CAAA,OAAA,GAG5BE,EAAA,SAAA,CACC,MAAAC,GAAK,GAAG,QACRC,GAAgB,aAAa,KAAK,EAAE,MAAO/W,GAAA,CAChDoG,GAAM,MAAMpG,CAAK,UAEZwW,GAAM,IAAA,MAAUC,GAAY,aAAa,KAAK,CAAA,GAG/CO,EAAA,SAAA,CACC,MAAAF,GAAK,GAAG,QACRG,GAAe,aAAa,KAAK,EAAE,MAAOjX,GAAA,CAC/CoG,GAAM,MAAMpG,CAAK,UAEZwW,GAAM,IAAA,MAAUC,GAAY,aAAa,KAAK,CAAA,GAG/CS,EAAA,SAAA,KACLnB,EAAmB,CAAAA,CAAA,EACnB,QAAQ,IAAIA,CAAe,EAEvBA,IAAoB,IACjB,MAAAe,GAAK,GAAG,EAEf3J,EAAe,CAAA,gBAAA4I,CAAA,CAAA,GAGhBzP,GAAA,SAAA,CACCL,EAAA,EAAA8P,EAAkB9H,EAAU,iBAAmB,EAAA,iBAgB3CiJ,+CAmDSf,EAAsB3P,wBACrBwP,EAAW,KAAA,0BAQtBG,EAAuB,MAAK,UAsB5BO,YA+CGG,IACA5Q,EAAA,EAAAgQ,EAAqB,EAAK,UAmB1BhQ,EAAA,EAAAgQ,EAAqB,EAAK,UAoB5BhQ,EAAA,EAAAgQ,EAAqB,EAAI,UA+CvBe,IACA/Q,EAAA,EAAAiQ,EAAoB,EAAK,UAmBzBjQ,EAAA,EAAAiQ,EAAoB,EAAK,UAoB3BjQ,EAAA,EAAAiQ,EAAoB,EAAI,oGAtVtBF,EAAA,CACN,QAAQ,IAAIA,CAAW,MAEnBrP,EAAa,IAAA,WACjBA,EAAO,OAAU/E,GAAA,CACZ4U,IAAAA,EAAQ,KAAK,MAAM5U,EAAM,OAAO,MAAM,EAEtC,GADJ,QAAQ,IAAI4U,CAAK,EACbW,GAAgBX,CAAK,GAAK,aAE5BA,EAAQY,GAAmBZ,CAAK,CACxB,OAAAxW,EAAA,CACR,QAAQ,IAAI,0BAA2BA,CAAK,EAG9CoW,EAAYI,CAAK,GAGdR,EAAY,OAAS,GACxBrP,EAAO,WAAWqP,EAAY,CAAC,CAAA,wmBC+W/BjT,EAIMvC,EAAAkD,EAAAT,CAAA,EAHLC,EAEMQ,EAAAiE,CAAA,+IA9PwBlF,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,6BA6IrBA,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,iDAzIjCA,EAAiB,CAAA,IAAA,iBAAjBA,EAAiB,CAAA,gFAQ3BA,EAAiB,CAAA,GAAAiH,GAAAjH,CAAA,kCAqIRA,EAAiB,CAAA,IAAA,iBAAjBA,EAAiB,CAAA,gFAW3BA,EAAiB,CAAA,GAAAuF,GAAAvF,CAAA,8pCA/JvBM,EA0IMvC,EAAAoD,EAAAX,CAAA,EAzILC,EAwIMU,EAAAL,CAAA,EAvILL,EAWMK,EAAAC,CAAA,EAVLN,EAAwDM,EAAAmE,CAAA,gBAExDzE,EAOMM,EAAAE,CAAA,8CAgITX,EAAoCvC,EAAA8D,EAAArB,CAAA,WAEpCF,EA8GMvC,EAAA2D,EAAAlB,CAAA,EA7GLC,EAeMiB,EAAAb,CAAA,EAdLJ,EAAwDI,EAAAO,CAAA,gBAExDX,EAWMI,EAAAK,CAAA,wEA1JuBlB,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,wCAIlChH,EAAiB,CAAA,0BAQ3BA,EAAiB,CAAA,gIAiIMA,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,KAAAiC,EAAAG,EAAAC,CAAA,wCAIlCrC,EAAiB,CAAA,0BAW3BA,EAAiB,CAAA,6UA9IZA,EAAoB,CAAA,CAAA,uBAAzB,OAAI8I,GAAA,sRADPxI,EAuHMvC,EAAAsI,EAAA7F,CAAA,kFAtHER,EAAoB,CAAA,CAAA,oBAAzB,OAAI8I,GAAA,EAAA,8GAAJ,OAAIA,EAAA8L,EAAA,OAAA9L,GAAA,0CAAJ,OAAIA,GAAA,iZAaFxI,EAmBMvC,EAAAsI,EAAA7F,CAAA,ghCAjBJF,EAeMvC,EAAA6I,EAAApG,CAAA,EATLC,EAEEmG,EAAAC,CAAA,EACFpG,EAEEmG,EAAAE,CAAA,EACFrG,EAEEmG,EAAAiO,CAAA,4dAqCLvU,EAkBSvC,EAAA4I,EAAAnG,CAAA,wiBAtCTF,EAkBSvC,EAAA4I,EAAAnG,CAAA,48BA0BTF,EAmBSvC,EAAA4I,EAAAnG,CAAA,0HAKVR,EAAK,CAAA,EAAC,EAAE,6BAA6B,EAAA,aACPA,EAAG,EAAA,EAAA,sDAvG5B,IAAA8U,EAAA9U,KAAaA,EAAG,EAAA,CAAA,GAAAgJ,GAAAhJ,CAAA,mDAiChB,OAAAA,QAAQ,EAAC0I,6UAsEc,GAAC,aAAK,UAAQ,0iBAAd,GAAC,mBAAK,UAAQ,oDA/GLrI,EAAAM,EAAA,QAAAoU,EAAA,gCAAA/U,EAAa,CAAA,EAAAA,EAC9C,EAAA,CAAA,EAAA,OACA,IAAE,2DAAA,sBACQA,EAAK,CAAA,EAAC,EAAE,cAAc,CAAA,mLAgCtBA,EAAK,CAAA,EAAC,EAAE,SAAS,CAAA,sPAtCjCM,EA+GMvC,EAAAoD,EAAAX,CAAA,EA9GLC,EAgCMU,EAAA+D,CAAA,EA/BLzE,EAOEyE,EAAAvE,CAAA,OAFWX,EAAG,EAAA,CAAA,+BA4BjBS,EAOMU,EAAAF,CAAA,EANLR,EAKEQ,EAAAW,CAAA,EAFWwK,GAAAxK,EAAA5B,KAAgBA,EAAG,EAAA,CAAA,CAAA,SAIjCS,EA0CMU,EAAAJ,CAAA,qBAENN,EAuBMU,EAAAL,CAAA,wBAEPR,EAGMvC,EAAAqD,EAAAZ,CAAA,gBADLC,EAAkDW,EAAAiE,CAAA,8FA/GZ,CAAAQ,GAAA7D,EAAA,CAAA,EAAA,IAAA+S,KAAAA,EAAA,gCAAA/U,EAAa,CAAA,EAAAA,EAC9C,EAAA,CAAA,EAAA,OACA,IAAE,mGACQA,EAAK,CAAA,EAAC,EAAE,cAAc,4CACvBA,EAAG,EAAA,QAAHA,EAAG,EAAA,CAAA,EAIXA,KAAaA,EAAG,EAAA,CAAA,oHA2BPA,EAAK,CAAA,EAAC,EAAE,SAAS,0BAClBgC,EAAA,CAAA,EAAA,GAAAJ,EAAA,QAAA5B,KAAgBA,EAAG,EAAA,CAAA,GAAnBoM,GAAAxK,EAAA5B,KAAgBA,EAAG,EAAA,CAAA,CAAA,0FA0EhCA,EAAK,CAAA,EAAC,EAAE,6BAA6B,EAAA,KAAAiC,EAAAG,EAAAC,CAAA,uBACPrC,EAAG,EAAA,EAAA,KAAAiC,EAAAoM,EAAAC,CAAA,0KA8GpCtO,EAAK,CAAA,EAAC,EAAE,2BAA2B,EAAA,WAMlCA,EAAK,CAAA,EAAC,EAAE,sBAAsB,EAAA,YAtFxBA,EAAgB,CAAA,CAAA,uBAArB,OAAI8I,GAAA,uwBAFRxI,EA+EMvC,EAAAkD,EAAAT,CAAA,EA9ELC,EA6EMQ,EAAAiE,CAAA,4DAGP5E,EASMvC,EAAAgD,EAAAP,CAAA,gBAPLC,EAMIM,EAAAiU,CAAA,yCAvFIhV,EAAgB,CAAA,CAAA,oBAArB,OAAI8I,GAAA,EAAA,8GAAJ,OAAIA,EAAA8L,EAAA,OAAA9L,GAAA,kCAgFN9I,EAAK,CAAA,EAAC,EAAE,2BAA2B,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,wBAMlCpF,EAAK,CAAA,EAAC,EAAE,sBAAsB,EAAA,KAAAiC,EAAAC,EAAAC,CAAA,+BAtF7B,OAAI2G,GAAA,+jBA6BFxI,EAiBSvC,EAAA4I,EAAAnG,CAAA,wiBApCTF,EAiBSvC,EAAA4I,EAAAnG,CAAA,28BAyBTF,EAmBSvC,EAAA4I,EAAAnG,CAAA,qKA9DL,OAAAR,QAAQ,EAACuG,2mBALDvG,EAAK,CAAA,EAAC,EAAE,yCAAyC,CAAA,uGAHhEM,EAyEMvC,EAAAgD,EAAAP,CAAA,EAxELC,EAIEM,EAAAyF,CAAA,OADWxG,EAAG,EAAA,CAAA,SAGhBS,EAwCMM,EAAAmE,CAAA,qBAENzE,EAuBMM,EAAAE,CAAA,wFArEQjB,EAAK,CAAA,EAAC,EAAE,yCAAyC,4CAClDA,EAAG,EAAA,QAAHA,EAAG,EAAA,CAAA,+MAoGrBA,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,gDA5QX,OAAAA,EAAsB,CAAA,IAAA,MAAQA,OAAsB,KAAI,sqBAV/DM,EAyROvC,EAAA+O,EAAAtM,CAAA,EAhRNC,EAsQMqM,EAAA5H,CAAA,wBAENzE,EAOMqM,EAAA7L,CAAA,EANLR,EAKSQ,EAAA0F,CAAA,wNADP3G,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,kIA1aXoF,EAAWC,KAuBX3H,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,UAAAoE,CAAA,EAAAlE,EAGPgS,EAAA,CAAoB,EAAE,EAEtBC,EAAA,CAAmB,EAAE,EACrBC,EAAA,CAAwB,EAAE,EAE1BC,EAAA,CAAA,EAEAC,EAAoB,KACpBC,EAAoB,WAElBC,EAA6B,MAAAC,GAAA,KAClCL,EAA6B,MAAAM,GAAiB,aAAa,MAAON,CAAoB,CAAA,MACtFD,EAAwB,MAAAQ,GAAiB,aAAa,MAAOR,CAAe,CAAA,EAEtE,MAAArN,EAAA,MAAY8N,GAAgB,aAAa,MAAOH,CAAG,EAAE,MAAOjY,IACjEoG,GAAM,MAAMpG,CAAK,EACV,OAGJsK,IACHlE,GAAM,QAAQkB,EAAM,EAAE,4BAA4B,CAAA,EAC9CgD,EAAI,eACPuN,EAAaD,EAAqBK,CAAG,CAAK,EAAA,GAAAJ,CAAA,GAItC,MAAAjN,GAAO,IAAU,MAAAhB,EAAA,CAAA,GAGlByO,EAA6B,MAAAJ,GAAA,KAClCP,EAAyB,MAAAY,GAAiB,aAAa,MAAOZ,CAAgB,CAAA,EAExE,MAAY9O,GAAiB,aAAa,MAAOqP,CAAG,EAAE,MAAOjY,IAClEoG,GAAM,MAAMpG,CAAK,EACV,QAIPoG,GAAM,QAAQkB,EAAM,EAAE,4BAA4B,CAAA,EAG7C,MAAAsD,GAAO,IAAU,MAAAhB,EAAA,CAAA,GAGlB2O,EAAA,SAAA,CAED,GAAAZ,EAAgB,SAAWC,EAAqB,SAE/CD,EAAgB,OAASC,EAAqB,QACjD3R,EAAA,EAAA0R,EAAkBA,EAAgB,MAAM,EAAGC,EAAqB,MAAM,CAAA,EAInED,EAAgB,OAASC,EAAqB,QAAA,OAC3CY,EAAOZ,EAAqB,OAASD,EAAgB,eAClDpM,EAAI,EAAGA,EAAIiN,EAAMjN,IACzBoM,EAAgB,KAAK,EAAE,MAK1BC,EAA6B,MAAAM,GAAiB,aAAa,MAAON,CAAoB,CAAA,MACtFD,EAAwB,MAAAQ,GAAiB,aAAa,MAAOR,CAAe,CAAA,EACtE,MAAA/M,GAAO,IAAU,MAAAhB,EAAA,CAAA,GAGlB6O,EAAA,SAAA,CACLxS,EAAA,EAAAyR,EAAmBA,EAAiB,OAAQnQ,GAAQA,IAAQ,EAAE,CAAA,EAC9D,QAAQ,IAAImQ,CAAgB,EAExBA,EAAiB,SAAW,OAC/BK,EAAoB,EAAA,QACdW,GAAmB,aAAa,MAAOX,CAAiB,EAE9D3R,GAAM,KAAKkB,EAAM,EAAE,qBAAqB,CAAA,QAExCoQ,EAAyB,MAAAY,GAAiB,aAAa,MAAOZ,CAAgB,CAAA,EAExE,MAAsB9O,GAAiB,aAAa,KAAK,EAAE,MAAO5I,IACvEoG,GAAM,MAAMpG,CAAK,EACV,SAIPoG,GAAM,QAAQkB,EAAM,EAAE,4BAA4B,CAAA,EAC5C,MAAAsD,GAAO,IAAU,MAAAhB,EAAA,CAAA,KAK1BtD,GAAA,SAAA,CACK,GAAAN,EAAM,OAAS,QAAA,OACZ,QAAQ,IAAA,gBAEZ0R,EAAyB,MAAA5M,GAAc,aAAa,KAAK,CAAA,qBAGzD8M,EAA6B,MAAAe,GAAc,aAAa,KAAK,CAAA,qBAG7DhB,EAAwB,MAAAiB,GAAc,aAAa,KAAK,CAAA,QAI1DhB,EAAqB,cAAerQ,EAAK0Q,IAAA,EACtB,MAAAG,GAAgB,aAAa,MAAOH,CAAG,GACjD,WACPhS,EAAA,EAAA4R,EAAatQ,CAAG,EAAI,GAAAsQ,CAAA,UAIhBgB,EAAqB,MAAAhO,GAAgB,aAAa,KAAK,EACvDiO,EAAqB,MAAAC,GAAgB,aAAa,KAAK,EAE7D9S,EAAA,EAAA6R,EAAoBgB,EAAa,iBAAA,EACjC7S,EAAA,EAAA8R,EAAoBc,EAAa,iBAAA,mBAuBhBf,EAAiB5X,2BAE5B8Y,GAAmB,aAAa,MAAOlB,CAAiB,wDAgD1CH,EAAgBM,CAAG,EAAA,KAAA,8BAS7BL,EAAoB,CAAA,GAAOA,EAAsB,EAAE,CAAA,MACnDD,EAAe,CAAA,GAAOA,EAAiB,EAAE,CAAA,aAmBzCC,EAAuBA,EAAqB,OAAM,CAChDrQ,EAAK0R,IAAWhB,IAAQgB,CAAM,CAAA,MAEhCtB,EAAkBA,EAAgB,OAAM,CAAEuB,EAAKC,IAAWlB,IAAQkB,CAAM,CAAA,SAqBxEnB,EAAoBC,CAAG,iBAsCjBF,EAAiB7X,2BAE5BwY,GAAmB,aAAa,MAAOX,CAAiB,EAEpDL,EAAiB,SAAW,GAC/BzR,EAAA,EAAAyR,GAAoB,EAAE,CAAA,2DAsBlBA,EAAgB,CAAA,GAAOA,EAAkB,EAAE,CAAA,aAmB3CA,EAAmBA,EAAiB,OAAM,CACxCnQ,EAAK0R,IAAWhB,IAAQgB,CAAM,CAAA,SAsBhCZ,EAAoBJ,CAAG,UAjOlCM,IACAE,IAEAxL,EAAS,MAAM,2VCmEsBxK,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,kKAA7CM,EAAsDvC,EAAAsH,EAAA7E,CAAA,mCAAtBR,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,yCAFbtI,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,kKAA5CM,EAAqDvC,EAAAsH,EAAA7E,CAAA,mCAArBR,EAAK,EAAA,EAAC,EAAE,IAAI,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,2CAqFLtI,EAAK,EAAA,EAAC,EAAE,mBAAmB,EAAA,giBAKtDA,EAAK,EAAA,EAAC,EAAE,cAAc,CAAA,wIAOtBA,EAAK,EAAA,EAAC,EAAE,SAAS,CAAA,uDAbjCM,EAkBMvC,EAAAgD,EAAAP,CAAA,EAjBLC,EAA6EM,EAAAmE,CAAA,gBAE7EzE,EAcMM,EAAAE,CAAA,EAbLR,EAKEQ,EAAAN,CAAA,OAFWX,EAAmB,CAAA,CAAA,SAIhCS,EAKEQ,EAAAW,CAAA,OAFW5B,EAAc,CAAA,CAAA,kFAbcA,EAAK,EAAA,EAAC,EAAE,mBAAmB,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,oBAKtDhH,EAAK,EAAA,EAAC,EAAE,cAAc,4CACvBA,EAAmB,CAAA,QAAnBA,EAAmB,CAAA,CAAA,oBAMlBA,EAAK,EAAA,EAAC,EAAE,SAAS,4CAClBA,EAAc,CAAA,QAAdA,EAAc,CAAA,CAAA,oDA7CaA,EAAK,EAAA,EAAC,EAAE,kBAAkB,EAAA,moCAKpDA,EAAK,EAAA,EAAC,EAAE,yCAAyC,CAAA,wOALjEM,EAA4EvC,EAAAmH,EAAA1E,CAAA,kBAC5EF,EA4BMvC,EAAAgD,EAAAP,CAAA,EA3BLC,EAMMM,EAAAE,CAAA,EALLR,EAIEQ,EAAAuF,CAAA,OADWxG,EAAgB,CAAA,CAAA,SAG9BS,EAmBSM,EAAA4F,CAAA,kFA5BgC3G,EAAK,EAAA,EAAC,EAAE,kBAAkB,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,oBAKpDhH,EAAK,EAAA,EAAC,EAAE,yCAAyC,4CAClDA,EAAgB,CAAA,QAAhBA,EAAgB,CAAA,CAAA,gEAhDWA,EAAK,EAAA,EAAC,EAAE,wBAAwB,EAAA,+iBAgCxEA,EAAK,EAAA,EAAC,EAAE,0DAA0D,EAAA,WAMjEA,EAAK,EAAA,EAAC,EAAE,4BAA4B,EAAA,6xBAjCvBA,EAAK,EAAA,EAAC,EAAE,yCAAyC,CAAA,4bALjEM,EAAkFvC,EAAAmH,EAAA1E,CAAA,kBAClFF,EA4BMvC,EAAAgD,EAAAP,CAAA,EA3BLC,EAMMM,EAAAE,CAAA,EALLR,EAIEQ,EAAAuF,CAAA,OADWxG,EAAsB,CAAA,CAAA,SAGpCS,EAmBSM,EAAA4F,CAAA,WAGVrG,EASMvC,EAAA+C,EAAAN,CAAA,gBAPLC,EAMIK,EAAAkU,CAAA,yFAvCqChV,EAAK,EAAA,EAAC,EAAE,wBAAwB,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,oBAK1DhH,EAAK,EAAA,EAAC,EAAE,yCAAyC,2CAClDA,EAAsB,CAAA,QAAtBA,EAAsB,CAAA,CAAA,oBA0BnCA,EAAK,EAAA,EAAC,EAAE,0DAA0D,EAAA,KAAAiC,EAAAuP,EAAAC,CAAA,oBAMjEzR,EAAK,EAAA,EAAC,EAAE,4BAA4B,EAAA,KAAAiC,EAAA2G,EAAAC,CAAA,gFA4DI7I,EAAK,EAAA,EAAC,EAAE,mBAAmB,EAAA,qBAyC3BA,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,uBAaxBA,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,4DAnDtD2W,GAAA,OAAAA,EAAA3W,OAA0B,UAAQ,CAAKA,EAAoB,CAAA,EAAA,SAAS,wBAAwB,s1CA2CnFA,EAAK,EAAA,EAAC,EAAE,iCAAiC,CAAA,0NAazCA,EAAK,EAAA,EAAC,EAAE,iCAAiC,CAAA,gEA9D1DM,EAAoCvC,EAAA8D,EAAArB,CAAA,WAEpCF,EAuCMvC,EAAA+C,EAAAN,CAAA,EAtCLC,EAA6EK,EAAAoE,CAAA,gBAC7EzE,EAoCMK,EAAAC,CAAA,EAnCLN,EAkCMM,EAAAE,CAAA,uBAIRX,EAWMvC,EAAA8C,EAAAL,CAAA,EAVLC,EAA0EI,EAAAM,CAAA,gBAC1EV,EAQMI,EAAAK,CAAA,EAPLT,EAMMS,EAAAE,CAAA,EALLX,EAIEW,EAAAT,CAAA,OADWX,EAAS,CAAA,CAAA,WAMzBM,EAWMvC,EAAAyD,EAAAhB,CAAA,EAVLC,EAAqEe,EAAAE,CAAA,gBACrEjB,EAQMe,EAAAC,CAAA,EAPLhB,EAMMgB,EAAAE,CAAA,EALLlB,EAIEkB,EAAAC,CAAA,OADW5B,EAAK,EAAA,CAAA,kFA5DsBA,EAAK,EAAA,EAAC,EAAE,mBAAmB,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,sFAyC3BpF,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAAuP,EAAAC,CAAA,oBAKlDzR,EAAK,EAAA,EAAC,EAAE,iCAAiC,6CAC1CA,EAAS,CAAA,QAATA,EAAS,CAAA,CAAA,oBAOkBA,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,KAAAiC,EAAAK,EAAAC,CAAA,oBAK7CvC,EAAK,EAAA,EAAC,EAAE,iCAAiC,8CAC1CA,EAAK,EAAA,QAALA,EAAK,EAAA,CAAA,mGAjCVA,EAAa,CAAA,GAAAiH,GAAAjH,CAAA,OAGZA,EAAM,CAAA,GAAA,CAAA,CAAA,uBAAX,OAAI8I,GAAA,iXANO9I,EAAK,EAAA,EAAC,EAAE,gBAAgB,CAAA,gBADzBA,EAAa,CAAA,IAAA,QAAAkJ,GAAA,IAAAlJ,EAAA,EAAA,EAAA,KAAA2R,CAAA,CAAA,UAF1BrR,EAaSvC,EAAA4T,EAAAnR,CAAA,8EAXIR,EAAa,CAAA,EAAA,EAAA,8CAInBA,EAAa,CAAA,wEAGZA,EAAM,CAAA,GAAA,CAAA,CAAA,oBAAX,OAAI8I,GAAA,EAAA,mHAAJ,yBANW9I,EAAK,EAAA,EAAC,EAAE,gBAAgB,wCADzBA,EAAa,CAAA,CAAA,kFAThBA,EAAM,CAAA,GAAA,CAAA,CAAA,uBAAX,OAAI8I,GAAA,4nBAVTxI,EAeMvC,EAAAkD,EAAAT,CAAA,EAdLC,EAaMQ,EAAAiE,CAAA,EAZLzE,EAKEyE,EAAAsB,CAAA,OAFWxG,EAAa,CAAA,CAAA,SAI1BS,EAIWyE,EAAA0R,CAAA,kHARE5W,EAAa,CAAA,QAAbA,EAAa,CAAA,CAAA,iBAKlBA,EAAM,CAAA,GAAA,CAAA,CAAA,oBAAX,OAAI8I,GAAA,EAAA,mHAAJ,gEAciC9I,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,uLAA5DM,EAAuEvC,EAAAwK,EAAA/H,CAAA,mCAAnCR,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,uCAGGA,EAAAtI,MAAM,KAAI,gIAA1DuI,EAAA,QAAAC,EAAAxI,MAAM,uEAArBM,EACCvC,EAAAwK,EAAA/H,CAAA,iBAD8DwB,EAAA,CAAA,EAAA,KAAAsG,KAAAA,EAAAtI,MAAM,KAAI,KAAAiC,EAAAwG,EAAAH,CAAA,EAA1DtG,EAAA,CAAA,EAAA,KAAAwG,KAAAA,EAAAxI,MAAM,wEAhBOsI,EAAAtI,MAAM,KAAI,wHAArBuI,EAAA,QAAAC,EAAAxI,MAAM,2BAArBM,EAA8CvC,EAAAwK,EAAA/H,CAAA,iBAApBwB,EAAA,CAAA,EAAA,KAAAsG,KAAAA,EAAAtI,MAAM,KAAI,KAAAiC,EAAAwG,EAAAH,CAAA,EAArBtG,EAAA,CAAA,EAAA,KAAAwG,KAAAA,EAAAxI,MAAM;;;;;;;;;kgBAgE5BM,EAwBMvC,EAAAsI,EAAA7F,CAAA,+CAnQiCR,EAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,aAGhBA,EAAK,EAAA,EAAC,EAAE,yBAAyB,EAAA,eAU5DA,EAAK,EAAA,EAAC,EAAE,yBAAyB,EAAA,SAC1BA,EAAK,EAAA,EAAC,EAAE,SAAS,EAAA,SAClBA,EAAK,EAAA,EAAC,EAAE,kBAAkB,EAAA,iBAQjDA,EAAK,EAAA,EAAC,EAAE,iCAAiC,EAAA,0BAiN5CA,EAAK,EAAA,EAAC,EAAE,MAAM,EAAA,qCA1LP,OAAAA,QAA0B,GAAIuM,+CAWlC,GAAAvM,QAA0B,GAAE,OAAA0I,GA0CvB,GAAA1I,QAA0B,UAAS,OAAAgJ,GA+BnC,GAAAhJ,QAA0B,SAAQ,OAAA+I,gCAsBvC/I,EAAqB,CAAA,GAAAuF,GAAAvF,CAAA,KAkFpBA,EAAO,CAAA,GAAAiJ,GAAA,4vDAlOIjJ,EAAK,EAAA,EAAC,EAAE,eAAe,CAAA,EADxBA,EAAqB,CAAA,IAAA,QAAAkJ,GAAA,IAAAlJ,EAAA,EAAA,EAAA,KAAA2R,CAAA,CAAA,0fA2N4F3R,EAAO,CAAA,EACpI,sBACA,GAAE,kCAEKA,EAAO,CAAA,2IAhQpBM,EAiSOvC,GAAA+O,EAAAtM,EAAA,EAzQNC,EAgOMqM,EAAApL,CAAA,EA/NLjB,EAuDMiB,EAAAb,CAAA,EAtDLJ,EAAwEI,EAAAqE,CAAA,gBAExEzE,EAgBMI,EAAAC,CAAA,EAfLL,EAAwFK,EAAAG,CAAA,gBACxFR,EAaMK,EAAAC,CAAA,EAZLN,EAWSM,EAAA4Q,CAAA,EAHRlR,EAA8DkR,EAAApI,CAAA,SAC9D9I,EAAqDkR,EAAAnI,CAAA,SACrD/I,EAA6DkR,EAAAlI,CAAA,cARjDzJ,EAAqB,CAAA,EAAA,EAAA,SAapCS,EAiCMI,EAAAK,CAAA,EAhCLT,EA+BMS,EAAAE,CAAA,EA9BLX,EAEMW,EAAAD,CAAA,gBAENV,EAyBSW,EAAAJ,CAAA,sBAIZP,EAAoCiB,EAAAG,CAAA,yDAyKrCpB,EAsCMqM,EAAAnL,CAAA,EArCLlB,EAoCSkB,EAAAN,CAAA,wKArQgCrB,GAAK,EAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,qBAGhBhH,GAAK,EAAA,EAAC,EAAE,yBAAyB,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,qBAU5D5F,GAAK,EAAA,EAAC,EAAE,yBAAyB,EAAA,KAAAiC,EAAAuP,EAAAC,CAAA,qBAC1BzR,GAAK,EAAA,EAAC,EAAE,SAAS,EAAA,KAAAiC,EAAAG,EAAAC,CAAA,qBAClBrC,GAAK,EAAA,EAAC,EAAE,kBAAkB,EAAA,KAAAiC,EAAA2G,EAAAC,CAAA,qBAPrC7I,GAAK,EAAA,EAAC,EAAE,eAAe,uCADxBA,GAAqB,CAAA,CAAA,qBAgBhCA,GAAK,EAAA,EAAC,EAAE,iCAAiC,EAAA,KAAAiC,EAAAoM,EAAAC,CAAA,qKAiIzCtO,GAAqB,CAAA,4FAgFxBA,GAAK,EAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAA4U,GAAAC,EAAA,EAEV9W,GAAO,CAAA,uMARoHA,GAAO,CAAA,EACpI,sBACA,2CAEOA,GAAO,CAAA,2IAhYbwK,EAAWC,KAEX3H,EAAOC,GAAW,MAAM,uBAEnB,GAAA,CAAA,aAAA2H,CAAA,EAAAzH,EAEP8T,EAAU,GAEVC,EAAwB,GACxBC,EAAwB,GAExBC,EAAyB,GACzBC,EAAmB,GAEnBC,EAAsB,GACtBC,EAAiB,GAEjBC,EAAgB,GAChBnP,EAAS,KAEToP,EAAY,GACZC,EAAQ,GAEN,MAAArQ,EAAA,SAAA,CACL3D,EAAA,EAAA2E,EAAA,MAAesP,GAAyB,aAAa,KAAK,EAAE,MAAOla,IAClEoG,GAAM,MAAMpG,CAAK,EACV,QAERiG,EAAA,EAAA8T,EAAA,MAAsBI,GAA+B,aAAa,KAAK,EAAE,MAAOna,GACxE,MAIHoa,EAAA,SAAA,IACDX,IAA0B,UAAA,CACvB,MAAAnP,EAAA,MAAY+P,GAAgC,aAAa,MAC9D,CAAA,iBAAAT,CAAA,CAAA,EACE,MAAO5Z,IACToG,GAAM,MAAMpG,CAAK,EAEjB,QAAQ,IAAIA,CAAK,EACV,OAGJsK,GACHrE,EAAA,EAAA2T,EAAmBtP,EAAI,gBAAA,EAEjB,MAAAV,EAAA,EAEFgB,GACHxE,GAAM,QAAQkB,EAAM,EAAE,4BAA4B,CAAA,QAGhD,iBAAAsS,GAA2B,MAAAU,GAA6B,aAAa,KAAK,EAAAV,CAAA,OAGxE,MAAAtP,EAAA,MAAY+P,GAAgC,aAAa,MAC9D,CAAA,uBAAAV,CAAA,CAAA,EACE,MAAO3Z,IACToG,GAAM,MAAMpG,CAAK,EACV,OAGJsK,GACHrE,EAAA,EAAA0T,EAAyBrP,EAAI,sBAAA,EAEvB,MAAAV,EAAA,EAEFgB,GACHxE,GAAM,QAAQkB,EAAM,EAAE,4BAA4B,CAAA,QAGhD,uBAAAqS,GAAiC,MAAAW,GAA6B,aAAa,KAAK,EAAAX,CAAA,IAIhFY,EAAA,SAAA,CACC,MAAAjQ,EAAA,MAAYkQ,GACjB,aAAa,MACbf,EACAC,GACC,MAAO1Z,IACRoG,GAAM,MAAMpG,CAAK,EACV,OAGJsK,IACHrE,EAAA,EAAAwT,EAAwBnP,EAAI,MAAA,EAC5BrE,EAAA,EAAAyT,EAAwBpP,EAAI,OAAA,GAGzBoP,IACHlG,GAAO,IAAA,MAAUC,GAAmC,CAAA,EACpD7J,MAIFtD,GAAA,SAAA,CACK,GAAAN,EAAM,OAAS,QAAA,CACZ,MAAAsE,EAAA,MAAYmQ,GAAyB,aAAa,KAAK,EAAE,MAAOza,IACrEoG,GAAM,MAAMpG,CAAK,EACV,OAGJsK,IACHrE,EAAA,EAAAwT,EAAwBnP,EAAI,MAAA,EAC5BrE,EAAA,EAAAyT,EAAwBpP,EAAI,OAAA,SAEvBoQ,EAAa,MAAAJ,GAA6B,aAAa,KAAK,EAElErU,EAAA,EAAA0T,EAAyBe,EAAK,sBAAA,EAC9BzU,EAAA,EAAA2T,EAAmBc,EAAK,gBAAA,QAElBlH,EAAe,MAAAuF,GAAgB,aAAa,KAAK,EAEvD9S,EAAA,EAAA6T,EAAiBtG,EAAO,cAAA,EACxBvN,EAAA,EAAA4T,EAAsBrG,EAAO,mBAAA,MAE7BwG,EAAkB,MAAAW,GAAa,aAAa,KAAK,CAAA,OACjDV,EAAc,MAAAW,GAAc,aAAa,KAAK,CAAA,EAE1ClB,GACH9P,oBAuCc6P,EAAqBhL,GAAA,IAAA,iCAG1B8L,EAAqB,UAmBvBd,IAA0B,IAAME,IAA2B,IAC9DvT,GAAM,MAAMkB,EAAM,EAAE,qCAAqC,CAAA,EACzDrB,EAAA,EAAAyT,EAAwB,EAAK,GACnBD,IAA0B,WAAaG,IAAqB,IACtExT,GAAM,MAAMkB,EAAM,EAAE,+BAA+B,CAAA,EACnDrB,EAAA,EAAAyT,EAAwB,EAAK,GACnBD,IAA0B,UAAYK,IAAmB,IACnE1T,GAAM,MAAMkB,EAAM,EAAE,6BAA6B,CAAA,EACjDrB,EAAA,EAAAyT,EAAwB,EAAK,GAE7BzT,EAAA,EAAAyT,GAAyBA,CAAqB,EAG/Ca,kBAsBWZ,EAAsB,KAAA,0BAOlCS,kBAmCYR,EAAgB,KAAA,0BAO5BQ,kBAyBYP,EAAmB,KAAA,0BAOnBC,EAAc,KAAA,0BAoBVC,EAAa,KAAA,iCAcfA,EAAatL,GAAA,IAAA,6BAwBduL,EAAS,KAAA,0BAaTC,EAAK,KAAA,gCA/OtBhU,EAAA,EAAAuT,EAAU,EAAI,EAEVC,IAA0B,UACvB,MAAAT,GAAmB,aAAa,MAAOa,EAAqBC,CAAc,EAG3E,MAAAe,GAAkC,aAAa,MAAOd,CAAa,QAEnEe,GAAgB,aAAa,MAAOd,CAAS,EAAE,MAAOha,IAC3DoG,GAAM,MAAMpG,CAAK,EACV,aAEF+a,GAAiB,aAAa,MAAOd,CAAK,EAAE,MAAOja,IACxDoG,GAAM,MAAMpG,CAAK,EACV,OAGRiN,EAAS,MAAM,EACfhH,EAAA,EAAAuT,EAAU,EAAK,izBCtKsE/W,EAAS,CAAA,CAAA,UAAhGM,EAMMvC,EAAA6I,EAAApG,CAAA,EALLC,EAIEmG,EAAAsF,CAAA,6BALoFlM,EAAS,CAAA,CAAA,mDAHpF,UAAAuY,EAAY,SAAA,EAAAtV;;;;;;;;;sgBC2FhB3C,EAwBMvC,EAAAsI,EAAA7F,CAAA,6CA5EoCR,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,iZAiD9DA,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,eAETA,EAAO,CAAA,GAAAiJ,GAAA,uyCAlBCjJ,EAAK,CAAA,EAAC,EAAE,uDAAuD,CAAA,iMAUqDA,EAAO,CAAA,EACrI,sBACA,GAAE,kCAEKA,EAAO,CAAA,gRAjDvBM,EAqFMvC,EAAA8C,EAAAL,CAAA,EApFLC,EAmBMI,EAAAI,CAAA,EAlBLR,EAA2EQ,EAAAiE,CAAA,gBAC3EzE,EAgBSQ,EAAAD,CAAA,SAGVP,EA8DMI,EAAAK,CAAA,EA7DLT,EA4DMS,EAAAE,CAAA,EA3DLX,EA0DOW,EAAA0L,CAAA,EApDNrM,EAWMqM,EAAAhM,CAAA,EAVLL,EAKEK,EAAA4F,CAAA,OAJW1G,EAAO,CAAA,CAAA,SAMpBS,EAEMK,EAAAC,CAAA,SAGPN,EAsCMqM,EAAA3L,CAAA,EArCLV,EAoCSU,EAAAE,CAAA,+HA9EmCrB,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,cAiClDhH,EAAK,CAAA,EAAC,EAAE,uDAAuD,mCAHhEA,EAAO,CAAA,CAAA,cAmBlBA,EAAK,CAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAA2G,EAAAC,CAAA,EAET7I,EAAO,CAAA,2LARqHA,EAAO,CAAA,EACrI,sBACA,sCAEOA,EAAO,CAAA,mgBAhFjB,MAAAwK,EAAWC,SAEN,KAAA+N,CAAI,EAAAvV,QAETH,EAAOC,GAAW,MAAM,sBAE1B,IAAAgU,EAAU,GACV0B,EAAU,SAERnV,EAAa,SAAA,CAClBE,EAAA,EAAAuT,EAAU,EAAI,QAERlP,EAAG,MAAS6Q,GAAa,aAAa,MAAOD,CAAO,EAAE,MAAOlb,IAClEoG,GAAM,MAAMpG,CAAK,EAEV,OAGJsK,IACH,QAAQ,IAAIA,CAAG,EACflE,GAAM,QAAQ,2BAA2B,EACzCH,EAAA,EAAAiV,EAAU,EAAE,EACZjV,EAAA,EAAAgV,EAAO,EAAK,EACZhO,EAAS,MAAM,GAGhBhH,EAAA,EAAAuT,EAAU,EAAK,UAWZvT,EAAA,EAAAgV,EAAO,EAAK,gBA0BEC,EAAO,KAAA,0BALpBnV,6PC+DEtD,EAAK,CAAA,EAAC,EAAE,iDAAiD,EAAA,wSAF5DM,EAIMvC,EAAAkD,EAAAT,CAAA,EAHLC,EAEMQ,EAAAiE,CAAA,6BADJlF,EAAK,CAAA,EAAC,EAAE,iDAAiD,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,6DAjEnBtI,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,WACCA,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,oBAKjEA,EAAQ,CAAA,CAAA,uBAAb,OAAI8I,GAAA,muCAbVxI,EAoEMvC,EAAAkD,EAAAT,CAAA,EAnELC,EAkEMQ,EAAAiE,CAAA,EAjELzE,EAgEQyE,EAAAyT,CAAA,EA/DPlY,EAQQkY,EAAAC,CAAA,EALPnY,EAIKmY,EAAAC,CAAA,EAHJpY,EAA0DoY,EAAAC,CAAA,gBAC1DrY,EAA+EoY,EAAAE,CAAA,gBAC/EtY,EAA+CoY,EAAAG,CAAA,SAGjDvY,EAqDQkY,EAAAM,CAAA,qFA1D8BjZ,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,oBACChH,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,aAKjE5F,EAAQ,CAAA,CAAA,oBAAb,OAAI8I,GAAA,EAAA,8GAAJ,OAAIA,EAAA8L,EAAA,OAAA9L,GAAA,0CAAJ,OAAIA,GAAA,whCAeDxI,EA+BSvC,EAAA4I,EAAAnG,CAAA,4FA1CTwG,EAAAhH,MAAO,QAAO,WAKd4F,EAAAsT,GAAMlZ,EAAO,EAAA,EAAA,WAAa,GAAI,EAAE,OAAOA,EAAM,CAAA,EAAA,EAAE,eAAe,CAAA,EAAA,25BARlEM,EAiDKvC,EAAA8a,EAAArY,CAAA,EAhDJC,EAIKoY,EAAAM,CAAA,EAHJ1Y,EAEM0Y,EAAAjU,CAAA,gBAEPzE,EAIKoY,EAAAO,CAAA,EAHJ3Y,EAEM2Y,EAAAnY,CAAA,gBAEPR,EAqCKoY,EAAAQ,CAAA,EApCJ5Y,EAmCM4Y,EAAAtY,CAAA,oCA5CJ,CAAA8E,GAAA7D,EAAA,IAAAgF,KAAAA,EAAAhH,MAAO,QAAO,KAAAiC,EAAA8E,EAAAC,CAAA,GAKd,CAAAnB,GAAA7D,EAAA,KAAA4D,KAAAA,EAAAsT,GAAMlZ,EAAO,EAAA,EAAA,WAAa,GAAI,EAAE,OAAOA,EAAM,CAAA,EAAA,EAAE,eAAe,CAAA,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,gLA/C1B5F,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,wZAwBzDA,EAAQ,CAAA,EAAC,OAAS,EAAC,mkDA1B3BM,EA+HMvC,EAAAqD,EAAAZ,CAAA,EA9HLC,EAmBMW,EAAAH,CAAA,EAlBLR,EAAuEQ,EAAAiE,CAAA,gBACvEzE,EAgBSQ,EAAAD,CAAA,SAGVP,EAwGMW,EAAAD,CAAA,EAvGLV,EAgFMU,EAAAJ,CAAA,wBACNN,EAqBMU,EAAAL,CAAA,EApBLL,EAKCK,EAAAO,CAAA,SACDZ,EAaCK,EAAAQ,CAAA,wGA1H6CtB,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,sbAiItDhH,EAAkB,CAAA,IAAA,gBAAlBA,EAAkB,CAAA,mWAAlBA,EAAkB,CAAA,8LA3JZyK,GAAA,EAQX,MAAA3H,EAAOC,GAAW,MAAM,0BAEnB,KAAAyV,EAAO,EAAA,EAAAvV,EAEdqW,EAAA,CAAA,EAEAC,EAAqB,gBAgBrB/V,EAAA,EAAAgV,EAAO,EAAK,eAoDiB,MAAAgB,GACjB,aAAa,MACbC,EAAO,EAAE,EACR,MAAOlc,IACRoG,GAAM,MAAMpG,CAAK,EACV,SAIPoG,GAAM,QAAQ,6BAA6B,EAC3CH,EAAA,EAAA8V,EAAiB,MAAAI,GAAY,aAAa,KAAK,CAAA,WAwC1DlW,EAAA,EAAA+V,EAAqB,EAAI,eAMhB,MAASI,GAAuB,aAAa,KAAK,EAAE,MAAOpc,IACnEoG,GAAM,MAAMpG,CAAK,EACV,SAIPoG,GAAM,QAAQ,6BAA6B,MAC3C2V,EAAQ,CAAA,CAAA,2CAUHC,EAAkB9b,2BAE5B+F,EAAA,EAAA8V,EAAiB,MAAAI,GAAY,aAAa,KAAK,CAAA,gFA7IzClB,iBAELc,EAAiB,MAAAI,GAAY,aAAa,KAAK,CAAA,gICiB3C1Z,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,aAEsBA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,0DAAxB,GAAC,aAAyB,GAAC,8GAA3B,GAAC,iBAAyB,GAAC,0HAHjEM,EAIMvC,EAAAsI,EAAA7F,CAAA,gBADLC,EAAuE4F,EAAAhB,CAAA,2CAFtErF,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,cAEsBhH,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAiC,EAAAC,EAAAC,CAAA;gGAiD/DnC,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,0CAlEMA,EAAe,CAAA,IAAA,gBAAfA,EAAe,CAAA,qQAuBrBA,EAAY,CAAA,IAAA,iBAAZA,EAAY,CAAA,0oDArB9BM,EAmEOvC,EAAA+O,EAAAtM,CAAA,EA7DNC,EAmDMqM,EAAA5L,CAAA,EAlDLT,EAqBMS,EAAAH,CAAA,EApBLN,EAmBMM,EAAAE,CAAA,sBARLR,EAOMQ,EAAAiE,CAAA,sBAIRzE,EAcMS,EAAAC,CAAA,SAENV,EAUMS,EAAAE,CAAA,EATLX,EAQSW,EAAAJ,CAAA,SAIXP,EAOMqM,EAAAjM,CAAA,EANLJ,EAKSI,EAAAQ,CAAA,mHAnEarB,EAAe,CAAA,qHAuBrBA,EAAY,CAAA,4CA2C1BA,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAAK,EAAAC,CAAA,kQAlFXiI,EAAWC,KAEX3H,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,aAAA2H,CAAA,EAAAzH,EAEP2W,EAAkB,GAGlBC,EAAe,GAEnBhW,GAAA,SAAA,CACCL,EAAA,EAAAqW,GAAerO,GAAA,YAAAA,EAAW,SAAU,EAAA,kBAIdoO,EAAenc,uBAuBrBoc,EAAYpc,2BAEvBiN,EAAY,CAAG,OAAQmP,CAAY,CAAA,UA4BrCrW,EAAA,EAAAoW,EAAkB,EAAI,UAhDzBpP,EAAS,MAAM,0uBC8GgBxK,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,qXAtB+CK,EAAAsG,EAAA,QAAAmT,EAAA,sFAAA9Z,OAC1F,SACG,+BACA,4CAA2C,UAJ/CM,EAwBSvC,EAAA4I,EAAAnG,CAAA,EAfRC,EAaMkG,EAAAzB,CAAA,SACNzE,EAAmDkG,EAAA1F,CAAA,4DAAxBjB,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,EAtB+CpD,EAAA,GAAA8X,KAAAA,EAAA,sFAAA9Z,OAC1F,SACG,+BACA,4/EA/EyCA,EAAK,CAAA,EAAC,EAAE,UAAU,EAAA,ovCA+CpCA,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,8jBA8EjBA,EAAK,CAAA,EAAC,EAAE,WAAW,EAAA,qBAenBA,EAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,ofA2BzBA,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,ieAsDfA,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,iXA0BfA,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,mCArMxCyL,GAAAzL,EAAK,CAAA,IAAL,YAAAyL,GAAO,QAAS,SAAOsO,GAAA/Z,CAAA,iFAmOvB,OAAAA,QAAgB,UAAS,EAQpBA,QAAgB,SAAQ,EAExBA,QAAgB,cAAa,EAO7BA,QAAgB,YAAW,EAO3BA,QAAgB,kBAAiB,EAOjCA,QAAgB,QAAO,EAOvBA,QAAgB,SAAQ,EAOxBA,QAAgB,QAAO,EAEvBA,QAAgB,UAAS,EAMzBA,QAAgB,QAAO,ilFAjT0DK,EAAAgB,EAAA,QAAA2Y,EAAA,sFAAAha,OAC1F,UACG,+BACA,4CAA2C,6DA2E4CK,EAAAiB,EAAA,QAAA2Y,EAAA,sFAAAja,OAC1F,YACG,+BACA,4CAA2C,6DAuB4CK,EAAAkB,EAAA,QAAA2Y,EAAA,sFAAAla,OAC1F,kBACG,+BACA,4CAA2C,+DAY4CK,EAAA0B,GAAA,QAAAoY,GAAA,sFAAAna,OAC1F,QACG,+BACA,4CAA2C,+DAoD4CK,EAAA4M,GAAA,QAAAmN,GAAA,sFAAApa,OAC1F,QACG,+BACA,4CAA2C,8DAuB4CK,EAAA+N,GAAA,QAAAiM,GAAA,sFAAAra,OAC1F,UACG,+BACA,4CAA2C,oWAtOlDM,EAiVMvC,GAAA4L,EAAAnJ,EAAA,EAhVLC,EAmBMkJ,EAAA1I,CAAA,EAlBLR,EAAyEQ,EAAAiE,CAAA,gBACzEzE,EAgBSQ,EAAAD,CAAA,SAGVP,EA0TMkJ,EAAAL,CAAA,EAzTL7I,EA8PM6I,EAAAxH,CAAA,EA3PLrB,EAwBSqB,EAAAT,CAAA,EAfRZ,EAaMY,EAAAN,CAAA,SACNN,EAAoDY,EAAAP,CAAA,wCAuDrDL,EAwBSqB,EAAAR,CAAA,EAfRb,EAaMa,EAAAH,CAAA,SACNV,EAAsDa,EAAAF,CAAA,gBAGvDX,EAaSqB,EAAAP,CAAA,EAJRd,EAEMc,EAAAL,CAAA,sBACNT,EAA4Dc,EAAAV,CAAA,gBAG7DJ,EAyBSqB,EAAAC,EAAA,EAhBRtB,EAcMsB,GAAAL,EAAA,WACNjB,EAAkDsB,GAAAJ,EAAA,mBA+BnDlB,EAwBSqB,EAAAmL,EAAA,EAfRxM,EAaMwM,GAAAxL,EAAA,WACNhB,EAAkDwM,GAAAzL,EAAA,mBAGnDf,EAwBSqB,EAAAsM,EAAA,EAfR3N,EAaM2N,GAAAxN,CAAA,WACNH,EAAoD2N,GAAA1N,EAAA,mBA6BtDD,EAyDM6I,EAAA/I,EAAA,kOA7UyCP,GAAK,CAAA,EAAC,EAAE,UAAU,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,sBA+CpChH,GAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAiC,EAAAuP,EAAAC,CAAA,GAtB8C,CAAA5L,IAAA7D,GAAA,GAAAgY,KAAAA,EAAA,sFAAAha,QAC1F,UACG,+BACA,iEAsBCyL,GAAAzL,GAAK,CAAA,IAAL,YAAAyL,GAAO,QAAS,8FA2EOzL,GAAK,CAAA,EAAC,EAAE,WAAW,EAAA,KAAAiC,EAAAoM,EAAAC,CAAA,GAtB4C,CAAAzI,IAAA7D,GAAA,GAAAiY,KAAAA,EAAA,sFAAAja,QAC1F,YACG,+BACA,mFAkCwBA,GAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,KAAAiC,EAAAS,EAAAC,CAAA,GAXsC,CAAAkD,IAAA7D,GAAA,GAAAkY,KAAAA,EAAA,sFAAAla,QAC1F,kBACG,+BACA,qFAmCwBA,GAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAiC,EAAA4U,GAAAC,EAAA,GAvBgD,CAAAjR,IAAA7D,GAAA,GAAAmY,MAAAA,GAAA,sFAAAna,QAC1F,QACG,+BACA,uFA0EwBA,GAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAiC,EAAA6H,GAAAC,EAAA,GAtBgD,CAAAlE,IAAA7D,GAAA,GAAAoY,MAAAA,GAAA,sFAAApa,QAC1F,QACG,+BACA,uFA6CwBA,GAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAiC,EAAAqY,GAAAC,EAAA,GAtB8C,CAAA1U,IAAA7D,GAAA,GAAAqY,MAAAA,GAAA,sFAAAra,QAC1F,UACG,+BACA,+5BAzPD,MAAA8C,EAAOC,GAAW,MAAM,0BAEnB,KAAAyV,EAAO,EAAA,EAAAvV,QAEZyH,EAAsB,MAAA8P,GAAA,CAC3B,QAAQ,IAAIA,CAAO,EACb,MAAAC,GAAS,QAASjP,EAAc,GAAAgP,CAAA,CAAA,EAChC,MAAArS,GAAO,IAAU,MAAAhB,EAAA,CAAA,QACjBuT,GAAmB,aAAa,OAAS,GAAIlP,CAAA,CAAA,GAG9CrE,EAAA,SACQ,MAAAwT,GAAW,aAAa,KAAK,MAGvCC,EAAc,uBAUdpX,EAAA,EAAAgV,EAAO,EAAK,UA0BXhV,EAAA,EAAAoX,EAAc,SAAS,UAmDtBpX,EAAA,EAAAoX,EAAc,QAAQ,UA2BvBpX,EAAA,EAAAoX,EAAc,WAAW,UA0BzBpX,EAAA,EAAAoX,EAAc,iBAAiB,UAe/BpX,EAAA,EAAAoX,EAAc,OAAO,UAuDrBpX,EAAA,EAAAoX,EAAc,OAAO,UA0BrBpX,EAAA,EAAAoX,EAAc,SAAS,UAoDtBjX,GAAM,QAAQkB,EAAM,EAAE,8BAA8B,CAAA,UASpDlB,GAAM,QAAQkB,EAAM,EAAE,8BAA8B,CAAA,UAOpDlB,GAAM,QAAQkB,EAAM,EAAE,8BAA8B,CAAA,UAOpDlB,GAAM,QAAQkB,EAAM,EAAE,8BAA8B,CAAA,UAOpDlB,GAAM,QAAQkB,EAAM,EAAE,8BAA8B,CAAA,UAOpDlB,GAAM,QAAQkB,EAAM,EAAE,8BAA8B,CAAA,UAQpDlB,GAAM,QAAQkB,EAAM,EAAE,8BAA8B,CAAA,qyBCxW5C7E,EAAW,CAAA,CAAA,2CAElBA,EAAS,CAAA,CAAA,UANjBM,EAaMvC,EAAA6I,EAAApG,CAAA,EALLC,EAIEmG,EAAAsF,CAAA,oCARYlM,EAAW,CAAA,CAAA,mBAElBA,EAAS,CAAA,CAAA,mDAVL,UAAAuY,EAAY,SAAA,EAAAtV,GACZ,YAAA4X,EAAc,KAAA,EAAA5X,ygBCkCPjD,EAAK,CAAA,EAAC,EAAE,MAAM,yJAAdA,EAAK,CAAA,EAAC,EAAE,MAAM,iKAmBGA,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,8QAAhDM,EAAwDvC,EAAAsI,EAAA7F,CAAA,0CAAxBR,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,+HAUhBpF,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,8QAA/CM,EAAuDvC,EAAAsI,EAAA7F,CAAA,0CAAvBR,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,+HAUfpF,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,8QAAjDM,EAAyDvC,EAAAsI,EAAA7F,CAAA,0CAAzBR,EAAK,CAAA,EAAC,EAAE,SAAS,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,+HAUjBpF,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,uPAA/CM,EAAuDvC,EAAAsI,EAAA7F,CAAA,0CAAvBR,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,+HAUfpF,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,8QAAhDM,EAAwDvC,EAAAsI,EAAA7F,CAAA,0CAAxBR,EAAK,CAAA,EAAC,EAAE,QAAQ,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,01DAGjD9E,EAAiEvC,EAAA8D,EAAArB,CAAA,WAEjEF,EAQMvC,EAAAsI,EAAA7F,CAAA,89BA9DMsa,6MANdxa,EAsEMvC,EAAAsI,EAAA7F,CAAA,qsBAhGA,MAAAsC,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,aAAAgY,CAAA,EAAA9X,EACA,CAAA,iBAAA+X,CAAA,EAAA/X,EACA,CAAA,mBAAAgY,CAAA,EAAAhY,EACA,CAAA,cAAAiY,CAAA,EAAAjY,EACA,CAAA,cAAAkY,CAAA,EAAAlY,EACA,CAAA,QAAAmY,CAAA,EAAAnY,GAEA,OAAAoY,EAAS,EAAA,EAAApY,EAEhBuV,EAAO,gBA0BP0C,YAUAF,YAUAC,YAUAF,YAUAI,YAaC3X,EAAA,EAAAgV,EAAO,EAAK,EACZ4C,sCA3EOpX,GAAC,CACRA,EAAE,SAAW,IAChBoX,gpBCuLIpb,EAAK,CAAA,EAAC,EAAE,qCAAqC,EAAA,6KAD/CM,EAEMvC,EAAAsI,EAAA7F,CAAA,6BADJR,EAAK,CAAA,EAAC,EAAE,qCAAqC,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,+DAlGLtI,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,WAEhDA,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,uDAMhBoR,EAAA1E,GAAA1M,KAAM,OAAMA,EAAA,EAAA,CAAA,CAAA,uBAAjB,OAAI8I,GAAA,0tDAhBXxI,EAuGMvC,EAAA+C,EAAAN,CAAA,EAtGLC,EA4FMK,EAAAG,CAAA,EA3FLR,EA0FMQ,EAAAiE,CAAA,EAzFLzE,EAwFQyE,EAAAyT,CAAA,EAvFPlY,EAUQkY,EAAAC,CAAA,EAPPnY,EAMKmY,EAAAC,CAAA,EALJpY,EAA0DoY,EAAAC,CAAA,gBAC1DrY,EAEKoY,EAAAE,CAAA,gBACLtY,EAA+CoY,EAAAG,CAAA,SAGjDvY,EA2EQkY,EAAAM,CAAA,0DAKXxY,EAOMK,EAAAC,CAAA,EANLN,EAKCM,EAAA4F,CAAA,oEA7FuC3G,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,oBAEhDhH,EAAK,CAAA,EAAC,EAAE,YAAY,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,SAMhBwL,EAAA1E,GAAA1M,KAAM,OAAMA,EAAA,EAAA,CAAA,CAAA,oBAAjB,OAAI8I,GAAA,EAAA,8GAAJ,OAAIA,EAAA8L,EAAA,OAAA9L,GAAA,0CAAJ,OAAIA,GAAA,yxBAwBDxI,EAoBSvC,EAAA4I,EAAAnG,CAAA,g/BAITF,EAoBSvC,EAAA4I,EAAAnG,CAAA,8FA1DRwG,EAAAhH,MAAK,MAAK,aAOX4F,EAAAsT,GAAMlZ,EAAK,EAAA,EAAA,WAAa,GAAI,EAAE,OAAOA,EAAM,CAAA,EAAA,EAAE,qBAAqB,CAAA,EAAA,g4BATvDK,EAAA2U,EAAA,OAAAsG,EAAA,MAAAtb,MAAK,EAAE,6MAJEK,EAAAwY,EAAA,QAAA0C,EAAA,mBAAAvb,QAAQA,EAAK,CAAA,EAAC,OAAS,GAC7C,YAAU,gDAAA,UAFZM,EAqEKvC,EAAA8a,EAAArY,CAAA,EAjEJC,EAMKoY,EAAAM,CAAA,EALJ1Y,EAII0Y,EAAAnE,CAAA,EAHHvU,EAEMuU,EAAA9P,CAAA,gBAIRzE,EAIKoY,EAAAO,CAAA,EAHJ3Y,EAEM2Y,EAAAnY,CAAA,gBAGPR,EAkDKoY,EAAAQ,CAAA,EAjDJ5Y,EAgDM4Y,EAAAtY,CAAA,wDA5DH,CAAA8E,GAAA7D,EAAA,IAAAgF,KAAAA,EAAAhH,MAAK,MAAK,KAAAiC,EAAA8E,EAAAC,CAAA,GAFA,CAAAnB,GAAA7D,EAAA,GAAAsZ,KAAAA,EAAA,MAAAtb,MAAK,qBAShB,CAAA6F,GAAA7D,EAAA,KAAA4D,KAAAA,EAAAsT,GAAMlZ,EAAK,EAAA,EAAA,WAAa,GAAI,EAAE,OAAOA,EAAM,CAAA,EAAA,EAAE,qBAAqB,CAAA,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,2HAb9C,CAAAC,GAAA7D,EAAA,GAAAuZ,KAAAA,EAAA,mBAAAvb,QAAQA,EAAK,CAAA,EAAC,OAAS,GAC7C,YAAU,qOApE2BA,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,mqBA8CjEA,EAAK,CAAA,EAAC,OAAS,EAAC,uoCANNA,EAAK,CAAA,EAAC,EAAE,cAAc,CAAA,wQA1CxCM,EAgKMvC,EAAA8C,EAAAL,CAAA,EA/JLC,EAmBMI,EAAAI,CAAA,EAlBLR,EAA+EQ,EAAAiE,CAAA,gBAC/EzE,EAgBSQ,EAAA0F,CAAA,SAGVlG,EAyIMI,EAAAK,CAAA,EAxILT,EAsBMS,EAAAC,CAAA,EArBLV,EAoBMU,EAAAL,CAAA,EAnBLL,EAaMK,EAAAC,CAAA,SACNN,EAIEK,EAAA0F,CAAA,OAFWxG,EAAW,CAAA,CAAA,SAK1BS,EAAyCS,EAAAW,CAAA,SACzCpB,EA+GMS,EAAAE,CAAA,oGA5JyCpB,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,mBAwCvDhH,EAAK,CAAA,EAAC,EAAE,cAAc,yCADvBA,EAAW,CAAA,QAAXA,EAAW,CAAA,CAAA,0rBAnGpB,OAAAoT,CAAW,EAAAC,GAKb7I,EAAWC,KAWX3H,EAAOC,GAAW,MAAM,0BAEnB,KAAAyV,EAAO,EAAA,EAAAvV,EAEduY,EAAc,GAEdzH,EAAA,CAAA,QAEE0H,EAA8B,MAAAJ,GAAA,CAC7B,MAAYK,GAAgB,aAAa,MAAOL,CAAM,EAAE,MAAO9d,GAAA,CACpEoG,GAAM,MAAMpG,CAAK,QAGlBwW,EAAc,MAAA4H,GAAoB,aAAa,KAAK,CAAA,EAEpDnR,EAAS,QAAQ,GAGZoR,EAA2B,MAAAP,GAAA,CAC1B,MAAYQ,GAAe,aAAa,MAAOR,CAAM,EAAE,MAAO9d,GAAA,CACnEoG,GAAM,MAAMpG,CAAK,QAGlBwW,EAAc,MAAA4H,GAAoB,aAAa,KAAK,CAAA,GAG/CG,EAAA,SAAA,OACC/H,EAAc,MAAAgI,GAAoB,aAAa,KAAK,EACtD,IAAA7H,EAAA,IAAW,KAAM,CAAA,KAAK,UAAUH,CAAK,IACxC,KAAM,kBAAA,CAAA,EAEPX,EAAOc,0BAA8B,KAAK,IAAA,CAAA,OAAA,UAiBvC1Q,EAAA,EAAAgV,EAAO,EAAK,gBAmCCgD,EAAW,KAAA,aAwBE,MAAAnd,EAAA/B,GAAMkf,IAAgB,IAAMlf,EAAE,MAC/C,YACA,EAAA,SAASkf,EAAY,YAAW,CAAA,cAyB7BC,EAAqB5H,EAAK,EAAE,eAwB5B+H,EAAkB/H,EAAK,EAAE,UAgCjCiI,2GA5JDtD,iBAELzE,EAAc,MAAA4H,GAAoB,aAAa,KAAK,CAAA,ugBC0KtDrb,EAKEvC,EAAAsI,EAAA7F,CAAA,guBAuHkDR,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,0xBA5BrEM,EA+BMvC,EAAA+C,EAAAN,CAAA,EA9BLC,EA6BIK,EAAAkU,CAAA,EApBHvU,EAeMuU,EAAA9P,CAAA,SAENzE,EAEMuU,EAAAjU,CAAA,EADLN,EAA0EM,EAAAE,CAAA,mEAA3BjB,EAAK,EAAA,EAAC,EAAE,WAAW,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,sDAUvCpF,EAAK,EAAA,EAAC,EAAE,uCAAuC,EAAA,WAExEA,EAAK,EAAA,EAAC,EACN,4GAA4G,EAAA,WAG1GA,EAAK,EAAA,EAAC,EAAE,wDAAwD,EAAA,qBA2B5DA,EAAK,EAAA,EAAC,EAAE,qBAAqB,EAAA,wkDAnCvCM,EAuCMvC,EAAAqD,EAAAZ,CAAA,EAtCLC,EAqCMW,EAAAD,CAAA,EApCLV,EAAkFU,EAAA+D,CAAA,gBAClFzE,EAOMU,EAAAF,CAAA,gBAHLR,EAECQ,EAAAoE,CAAA,gBAGF5E,EAyBMU,EAAAL,CAAA,EAxBLL,EAuBSK,EAAA6F,CAAA,EAdRlG,EAWMkG,EAAAC,CAAA,EALLnG,EAIEmG,EAAAsF,CAAA,SAGHzL,EAA2CkG,EAAA5F,CAAA,mEAjClBf,EAAK,EAAA,EAAC,EAAE,uCAAuC,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,oBAExEhH,EAAK,EAAA,EAAC,EACN,4GAA4G,EAAA,KAAAiC,EAAA0D,EAAAC,CAAA,oBAG1G5F,EAAK,EAAA,EAAC,EAAE,wDAAwD,EAAA,KAAAiC,EAAAuP,EAAAC,CAAA,oBA2B5DzR,EAAK,EAAA,EAAC,EAAE,qBAAqB,EAAA,KAAAiC,EAAAK,EAAAC,CAAA,oDA2CpCvC,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,gBAERA,EAAK,EAAA,CAAA,uBAAV,OAAI8I,GAAA,8cATPxI,EAwBMvC,EAAAsI,EAAA7F,CAAA,EAvBLC,EAOS4F,EAAAM,CAAA,8HADP3G,EAAK,EAAA,EAAC,EAAE,KAAK,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,oBAERhH,EAAK,EAAA,CAAA,oBAAV,OAAI8I,GAAA,EAAA,mHAAJ,8DAYC9B,EAAAhH,MAAI,KAAI,+SAXVM,EAYSvC,EAAA4I,EAAAnG,CAAA,wDADPwB,EAAA,CAAA,EAAA,QAAAgF,KAAAA,EAAAhH,MAAI,KAAI,KAAAiC,EAAA8E,EAAAC,CAAA,gDAcRsB,EAAAtI,EAAM,EAAA,EAAA,EAAEA,MAAK,UAAU,EAAA,wHAJmDK,EAAAgG,EAAA,QAAA,uEAAArG,EAAQ,EAAA,IAAA,EAChF,GACA,QAAM,SAAA,UAHVM,EAwBMvC,EAAAsI,EAAA7F,CAAA,iBAnBJwB,EAAA,CAAA,EAAA,MAAAsG,KAAAA,EAAAtI,EAAM,EAAA,EAAA,EAAEA,MAAK,UAAU,EAAA,KAAAiC,EAAAwG,EAAAH,CAAA,2CA+DpBA,EAAAtI,MAAK,MAAK,4bAtB6CK,EAAA2U,EAAA,QAAAgH,EAAA,qDAAAhc,EAAK,EAAA,EAAA,KAAOA,OACtEA,EAAI,EAAA,EAAC,KAAOA,EACZ,CAAA,GAAAA,EAAK,EAAA,EAAA,KAAOA,EAAY,CAAA,EACrB,+BACAA,EAAI,EAAA,EAAC,KAAOA,EAAc,CAAA,EAC1B,+BACA,yDAAuD,kCAAA,EAChDK,EAAA2U,EAAA,OAAAsG,EAAA,MAAAtb,MAAK,EAAE,mCARlBM,EA0BIvC,EAAAiX,EAAAxU,CAAA,EALHC,EAIMuU,EAAA/T,CAAA,EAHLR,EAEMQ,EAAAiE,CAAA,sEADJlD,EAAA,CAAA,EAAA,MAAAsG,KAAAA,EAAAtI,MAAK,MAAK,KAAAiC,EAAAwG,EAAAH,CAAA,EAtB6CtG,EAAA,CAAA,EAAA,MAAAga,KAAAA,EAAA,qDAAAhc,EAAK,EAAA,EAAA,KAAOA,OACtEA,EAAI,EAAA,EAAC,KAAOA,EACZ,CAAA,GAAAA,EAAK,EAAA,EAAA,KAAOA,EAAY,CAAA,EACrB,+BACAA,EAAI,EAAA,EAAC,KAAOA,EAAc,CAAA,EAC1B,+BACA,yDAAuD,oDAChDgC,EAAA,CAAA,EAAA,MAAAsZ,KAAAA,EAAA,MAAAtb,MAAK,6QAvB2CK,EAAAgG,EAAA,QAAA4V,EAAA,qDAAAjc,EAAK,EAAA,EAAA,KAAOA,OACtEA,EAAI,EAAA,EAAC,KAAOA,EACZ,CAAA,GAAAA,EAAK,EAAA,EAAA,KAAOA,EAAY,CAAA,EACrB,+BACAA,EAAI,EAAA,EAAC,KAAOA,EAAc,CAAA,EAC1B,+BACA,wDAAsD,kCAAA,UAP1DM,EAcMvC,EAAAsI,EAAA7F,CAAA,EALLC,EAIE4F,EAAAG,CAAA,OAFWxG,EAAS,CAAA,CAAA,uFAATA,EAAS,CAAA,QAATA,EAAS,CAAA,CAAA,EAVoCgC,EAAA,CAAA,EAAA,MAAAia,KAAAA,EAAA,qDAAAjc,EAAK,EAAA,EAAA,KAAOA,OACtEA,EAAI,EAAA,EAAC,KAAOA,EACZ,CAAA,GAAAA,EAAK,EAAA,EAAA,KAAOA,EAAY,CAAA,EACrB,+BACAA,EAAI,EAAA,EAAC,KAAOA,EAAc,CAAA,EAC1B,+BACA,wDAAsD,+PAsI/C,OAAAA,MAAK,4JA0CTA,EAAI,EAAA,EAAC,KAAOA,EAAO,EAAA,GAAAiH,GAAAjH,CAAA,kOA5CzBM,EAgEMvC,EAAAsI,EAAA7F,CAAA,iEA9DIwB,EAAA,CAAA,EAAA,OAAAka,EAAA,OAAAlc,MAAK,6PA0CTA,EAAI,EAAA,EAAC,KAAOA,EAAO,EAAA,g0CAnFzBM,EAqCMvC,EAAAsI,EAAA7F,CAAA,EApCLC,EAkBS4F,EAAArF,CAAA,SACTP,EAgBS4F,EAAAhF,CAAA,swCA9EVf,EAwCMvC,EAAAsI,EAAA7F,CAAA,EAvCLC,EAoBS4F,EAAArF,CAAA,SACTP,EAiBS4F,EAAAhF,CAAA,2qBAkERf,EAiBSvC,EAAA4I,EAAAnG,CAAA,0lBAITF,EAiBSvC,EAAA4I,EAAAnG,CAAA,wGAvOTsU,GAAA9U,QAAQ,GAAMA,EAAG,EAAA,EAAG,GAAKA,EAAK,EAAA,EAAA,aAAeA,EAAgB,EAAA,EAACA,EAAM,EAAA,EAAA,CAAC,EAAE,aAAUgJ,GAAAhJ,CAAA,yBA6BhFA,EAAe,CAAA,IAAKA,EAAI,EAAA,EAAC,GAAE0I,uEA0D1B1I,EAAe,CAAA,IAAKA,EAAI,EAAA,EAAC,GAAE,EA0CtBA,EAAY,CAAA,IAAKA,EAAI,EAAA,EAAC,GAAE,6QAnDjCK,EAAA6E,EAAA,QAAAiX,GAAAnc,EAAK,EAAA,EAAA,KAAOA,OAAWA,EAAI,EAAA,EAAC,KAAOA,EAAmB,CAAA,GAAAA,EAAK,EAAA,EAAA,KAAOA,EAAY,CAAA,EAC5E,mCACAA,EAAI,EAAA,EAAC,KAAOA,EAAc,CAAA,EAC1B,mCACA,kEAAgE,sFAAA,yEAtDrEM,EAgNMvC,EAAAkD,EAAAT,CAAA,qBAjKLC,EAgKMQ,EAAAiE,CAAA,qCA3OFlF,QAAQ,GAAMA,EAAG,EAAA,EAAG,GAAKA,EAAK,EAAA,EAAA,aAAeA,EAAgB,EAAA,EAACA,EAAM,EAAA,EAAA,CAAC,EAAE,kRA8EzE,CAAA6F,GAAA7D,EAAA,CAAA,EAAA,MAAAma,KAAAA,GAAAnc,EAAK,EAAA,EAAA,KAAOA,OAAWA,EAAI,EAAA,EAAC,KAAOA,EAAmB,CAAA,GAAAA,EAAK,EAAA,EAAA,KAAOA,EAAY,CAAA,EAC5E,mCACAA,EAAI,EAAA,EAAC,KAAOA,EAAc,CAAA,EAC1B,mCACA,kEAAgE,+OAqK9D,KAAAA,MAAM,8JAANgC,EAAA,CAAA,EAAA,SAAAoa,EAAA,KAAApc,MAAM,mLAoB8BoF,EAAApF,MAAM,KAAI,sTAL5CC,GAAAmE,EAAA,IAAAiY,EAAArc,MAAM,iBAAiB,GAAAK,EAAA+D,EAAA,MAAAiY,CAAA,yQAR/B/b,EAcSvC,EAAA4I,EAAAnG,CAAA,EARRC,EAMMkG,EAAAzB,CAAA,EALLzE,EAIEyE,EAAAd,CAAA,SAEH3D,EAA0DkG,EAAA1F,CAAA,iDALnDe,EAAA,CAAA,EAAA,QAAA,CAAA/B,GAAAmE,EAAA,IAAAiY,EAAArc,MAAM,iBAAiB,gBAKWgC,EAAA,CAAA,EAAA,QAAAoD,KAAAA,EAAApF,MAAM,KAAI,KAAAiC,EAAAkD,EAAAC,CAAA,oHAtc9CkX,EAAc,uFAMpBtc,EAAK,EAAA,EAAC,EAAE,UAAU,EAAA,4pCA9D+BA,EAAW,CAAA,CAAA,EAAvCA,EAAkB,CAAA,IAAA,iBAAlBA,EAAkB,CAAA,uFAEjCA,EAAkB,EAAA,IAAA,iBAAlBA,EAAkB,EAAA,kFAQzBA,EAAY,EAAA,GAAAqM,GAAArM,CAAA,OAgGVyL,GAAAzL,EAAK,EAAA,IAAL,YAAAyL,GAAO,QAAS,SAAOa,GAAAtM,CAAA,OAoCpBA,EAAS,EAAA,EAAC,iBAAmB,KAAIuM,GAAAvM,CAAA,KAuEnCA,EAAK,EAAA,EAAC,OAAS,GAAC+I,GAAA/I,CAAA,QA6BbA,EAAgB,EAAA,CAAA,yBAArB,OAAI8I,GAAA,kEAsPD,IAAA0D,GAAAxM,QAAU,QAASiJ,GAAAjJ,CAAA,86EA5RTA,EAAK,EAAA,EAAC,EAAE,QAAQ,CAAA,8bA/K2DA,EAAY,EAAA,EACrG,GACA,YAAW,0FAT0CA,EAAY,EAAA,EAClE,wBACA,gCAA8B,wHAAA,mBAErBA,EAAY,EAAA,CAAA,uEAPzBM,EAuhBMvC,EAAA2C,EAAAF,CAAA,EA9gBLC,EAweMC,EAAAE,CAAA,EAneLH,EAuEMG,EAAAO,CAAA,EAtELV,EA6CIU,EAAA6T,CAAA,EA1BHvU,EAOMuU,EAAA9P,CAAA,SACNzE,EAEMuU,EAAA/T,CAAA,gBACNR,EAcMuU,EAAAjU,CAAA,SAGPN,EAsBSU,EAAAwF,CAAA,iCAsCVlG,EAqVMG,EAAAe,CAAA,0BAzSLlB,EA0BMkB,EAAAd,CAAA,EAzBLJ,EAwBMI,EAAAK,CAAA,EAvBLT,EAaMS,EAAAE,CAAA,SAENX,EAOES,EAAAsF,CAAA,OAJWxG,EAAM,CAAA,CAAA,iCAoCrBS,EAgPMkB,EAAAD,CAAA,kEAGPjB,EA+BMG,EAAAY,CAAA,EA5BLf,EA2BMe,EAAAC,EAAA,kLAlgB8CzB,EAAW,CAAA,+BAAvCA,EAAkB,CAAA,wEAEjCA,EAAkB,EAAA,2BAQzBA,EAAY,EAAA,qGAoDXA,EAAK,EAAA,EAAC,EAAE,UAAU,EAAA,KAAAiC,EAAAuP,EAAAC,CAAA,IA4CjBhG,GAAAzL,EAAK,EAAA,IAAL,YAAAyL,GAAO,QAAS,uEAoCbzL,EAAS,EAAA,EAAC,iBAAmB,0FA8DpBA,EAAK,EAAA,EAAC,EAAE,QAAQ,4CACjBA,EAAM,CAAA,QAANA,EAAM,CAAA,CAAA,EAQhBA,EAAK,EAAA,EAAC,OAAS,sFA6BZA,EAAgB,EAAA,CAAA,wBAArB,OAAI8I,IAAA,EAAA,mIAAJ,OAAIA,GAAA8L,GAAA,OAAA9L,IAAA,cAsPD9I,QAAU,iPA3c2EA,EAAY,EAAA,EACrG,GACA,gHATqDA,EAAY,EAAA,EAClE,wBACA,gCAA8B,gLAErBA,EAAY,EAAA,CAAA,yEAwNnB,OAAI8I,GAAA,mSAjaHyT,GAAa,4NAvBb,MAAAzZ,EAAOC,GAAW,MAAM,uBA0B1B,IAAAyZ,EAGAC,EAAS,GAETC,EAAc,KAEdC,EAAiB,KAEjBC,EAAe,KACfC,EAAkB,KAClBC,EAAY,GAEZC,EAAqB,GACrBC,EAAe,GAGfC,EAAA,CAAA,EA6BJpZ,GAAA,SAAA,CACCqZ,GAAO,UAAWlZ,IAAA,CACbmZ,GAAgBnZ,IACnBoZ,GAAY,IAAI,EAAK,GAGjBD,GAAiB,CAAAnZ,IACrBoZ,GAAY,IAAI,EAAI,IAItBA,GAAY,IAAI,OAAO,WAAab,EAAU,QACxCxI,GAAM,IAAA,MAAUC,GAAY,aAAa,KAAK,CAAA,EAEhD,IAAAqJ,EACAC,GAEK,SAAAC,IAAA,CACF,MAAAC,GAAc,OAAO,WACrBC,GAAgB,KAAK,IAAIH,GAAS,QAAUD,EAAW,OAAO,EAChEA,EAAW,QAAU,IAAMI,IAAiBD,GAAc,IACzDF,GAAS,QAAUD,EAAW,SACjCD,GAAY,IAAI,EAAK,EAElBE,GAAS,QAAUD,EAAW,SACjCD,GAAY,IAAI,EAAI,SAKjBM,GAAgB1Z,IAAA,CACrBqZ,EAAarZ,GAAE,eAAe,CAAC,EAC/B,QAAQ,IAAIqZ,EAAW,OAAO,GAGzBM,GAAc3Z,IAAA,CACnBsZ,GAAWtZ,GAAE,eAAe,CAAC,EAC7BuZ,MAGD,cAAO,iBAAiB,aAAcG,EAAY,EAClD,OAAO,iBAAiB,WAAYC,EAAU,OAG7C,OAAO,oBAAoB,aAAcD,EAAY,EACrD,OAAO,oBAAoB,WAAYC,EAAU,WAK7CC,EAAgC,MAAAC,GAAA,OAC/BC,GAAsB,MAAA,QAAQ,IACnCD,EAAS,IAAW,MAAAhK,IAAA,OACbkK,GAAoB,MAAAC,GAAY,aAAa,MAAOnK,GAAK,EAAE,EAAE,MAAOtW,IAAU,IAAI,EACpF,OAAAwgB,KACHlK,GAAK,KAAOkK,GAAY,MAElBlK,MAIH,MAAAE,GAAM,IAAI+J,EAAa,GAOxBG,EAAA,MAAuBC,EAAIC,KAAA,CAC5BA,KAAW,GACdxa,GAAM,MAAMkB,EAAM,EAAE,kCAAkC,CAAA,SAIhDuZ,GAAe,aAAa,MAAOF,EAAA,CACxC,MAAOC,EAAA,CAAA,QAEFpK,GAAM,IAAA,MAAUC,GAAY,aAAa,KAAK,CAAA,IAIhDqK,EAAoB,MAAAH,GAAA,CACnB,MAAYrC,GAAe,aAAa,MAAOqC,CAAE,EAAE,MAAO3gB,KAC/DoG,GAAM,MAAMpG,EAAK,MACjBqf,EAAe,IAAA,EAER,SAIH0B,IAAYJ,GACf7J,GAAK,GAAG,QAGHN,GAAM,IAAA,MAAUC,GAAY,aAAa,KAAK,CAAA,IAIhDgH,EAA0B,MAAAkD,GAAA,CACzB,MAAArW,GAAA,MAAY0W,GAAc,aAAa,MAAOL,CAAE,EAAE,MAAO3gB,KAC9DoG,GAAM,MAAMpG,EAAK,EACV,OAGJsK,KACHwM,GAAA,MAAWxM,GAAI,EAAE,EAAA,QACXkM,GAAM,IAAA,MAAUC,GAAY,aAAa,KAAK,CAAA,IAIhDtJ,EAAsB,MAAA8P,GAAA,CACrB,MAAAC,GAAS,QAASjP,EAAc,GAAAgP,CAAA,CAAA,QAChCE,GAAmB,aAAa,OAAS,GAAIlP,CAAA,CAAA,EACnD,SAAS,KAAO,KAGXyP,EAA4B,MAAAiD,GAAA,OAC3BxC,GAAgB,aAAa,MAAOwC,CAAE,QACtCnK,GAAM,IAAA,MAAUC,GAAY,aAAa,KAAK,CAAA,GAG/CwK,EAAmB,MAAAC,GAAA,CACxBA,EAAK,MAAA,iBAIoB1B,EAAkBtf,uBAEjCihB,EAAkBjhB,8BAEtB,MAAAsW,GAAM,IAAG,MAAOC,GAAY,aAAa,KAAK,CAAA,UAUnDoJ,GAAY,IAAG,CAAED,CAAY,eA0B3B3Z,EAAA,EAAAmZ,EAAiB,IAAI,EAEf,MAAAtI,GAAK,GAAG,EACR,MAAAsK,EAAgB,SAAS,eAAe,iBAAiB,EAC/D,gBACCA,GAAA,MAAAA,EAAe,QAEXC,GACHxB,GAAY,IAAI,EAAK,GAEpB,WAkCHA,GAAY,IAAG,CAAED,CAAY,UA4B5B3Z,EAAA,EAAAmZ,EAAiB,IAAI,EACrBtB,GAAO,IAAI,EAAE,UA+CV3Q,EAAY,CACX,gBAAiB,EAAI,CAAA,gBA4Cb+R,EAAM,KAAA,0BAEjBmB,EAAuBiB,CAAM,gBAWvB,MAAA9K,GAAM,IAAG,MAAOC,GAAY,aAAa,KAAK,CAAA,oBAS/C8K,GAAO,MAASC,GAAqB,aAAa,MAAOC,EAAI,IAAI,EACjEF,GAAQ,SAAW,IAChB,MAAAG,GAAK,IAAG,MAAOC,GAAe,aAAa,KAAK,CAAA,EACtDJ,GAAgB,MAAA9K,GAAY,aAAa,KAAK,SAEzCD,GAAM,IAAI+K,EAAO,iBAoDVhC,EAAS,KAAA,8BAerBH,EAAiB9I,EAAK,EAAE,EACpB+K,GACHxB,GAAY,IAAI,EAAK,cAItBN,EAAYjJ,EAAK,KAAK,MACtBgJ,EAAkBhJ,EAAK,EAAE,UA6BvBoK,EAAcpK,EAAK,GAAIiJ,CAAS,EAChCtZ,EAAA,EAAAqZ,EAAkB,IAAI,EACtBrZ,EAAA,EAAAsZ,EAAY,EAAE,WAmBdtZ,EAAA,EAAAqZ,EAAkB,IAAI,EACtBrZ,EAAA,EAAAsZ,EAAY,EAAE,UAoBduB,EAAWxK,EAAK,EAAE,WAmBlBrQ,EAAA,EAAAoZ,EAAe,IAAI,cA4ClBD,EAAiB9I,EAAK,EAAE,UAxBzBmH,EAAiBnH,EAAK,EAAE,WAGxBrQ,EAAA,EAAAkZ,EAAcC,CAAc,EAC5BnZ,EAAA,EAAAuZ,EAAqB,EAAI,UAGzB9B,EAAmBpH,EAAK,EAAE,cAG1BiJ,EAAYjJ,EAAK,KAAK,MACtBgJ,EAAkBhJ,EAAK,EAAE,cAGzB+I,EAAe/I,EAAK,EAAE,WAGtBrQ,EAAA,EAAAmZ,EAAiB,IAAI,cA4BpBC,EAAe/I,EAAK,EAAE,WAuC1BrQ,EAAA,EAAAwZ,GAAgBA,CAAY,MATpBhZ,GAAC,CACNA,EAAE,SAAW,iBAChBmb,GAAkB,IAAI,EAAI,6CAzdtB3C,EAAUzY,oDA7KlBP,EAAA,GAAAyZ,EAAmB4B,EAAO,OAAQhL,GAAA,IAChC4I,IAAW,GACP,MAAA,IAEH2C,IAAAA,GAAQvL,EAAK,MAAM,YAAA,EACjB,MAAAwL,GAAQ5C,EAAO,kBAEjB6C,GAAiB,UAEjBzL,EAAK,MAAQA,EAAK,KAAK,UAAY,MAAM,QAAQA,EAAK,KAAK,QAAQ,IACtEyL,GAAiBzL,EAAK,KAAK,SAAS,KAAM0L,IAElCA,GAAQ,SAAWA,GAAQ,QAAQ,cAAc,SAASF,EAAK,IAIjED,GAAM,SAASC,EAAK,GAAKC,6PChEetf,EAAK,CAAA,EAAC,EAAE,oBAAoB,EAAA,gUAwBjDA,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,ghBAwBvBA,EAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,uWAkB1BA,EAAK,CAAA,EAAC,EAAE,sBAAsB,EAAA,ghBAwB9BA,EAAK,CAAA,EAAC,EAAE,oBAAoB,EAAA,2hBA0B5BA,EAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,8WAiBzBA,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,shBAwBxBA,EAAK,CAAA,EAAC,EAAE,aAAa,EAAA,whBAuBrBA,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,8WAqBHA,EAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,2BAQlEA,EAAK,CAAA,EAAC,EAAE,aAAa,EAAA,mMAcrBA,EAAK,CAAA,EAAC,EAAE,mBAAmB,EAAA,mMAc3BA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,s3MA/O7BM,EA6PMvC,GAAAyhB,EAAAhf,EAAA,EA5PLC,EAmBM+e,EAAAve,CAAA,EAlBLR,EAAmFQ,EAAAiE,CAAA,gBACnFzE,EAgBSQ,EAAA0F,CAAA,SAGVlG,EAkLM+e,EAAAC,CAAA,EAjLLhf,EAgLMgf,EAAAC,CAAA,EA/KLjf,EA0FMif,EAAA/R,CAAA,EAzFLlN,EAsBMkN,EAAA9M,CAAA,EArBLJ,EAAsDI,EAAAE,CAAA,gBAEtDN,EAkBMI,EAAAK,CAAA,SAGPT,EAgBMkN,EAAA/M,CAAA,EAfLH,EAAyDG,EAAAc,CAAA,gBAEzDjB,EAYMG,EAAAY,CAAA,SAGPf,EAsBMkN,EAAAtE,CAAA,EArBL5I,EAA6D4I,EAAA3I,CAAA,gBAE7DD,EAkBM4I,EAAAM,CAAA,SAGPlJ,EAsBMkN,EAAAR,CAAA,EArBL1M,EAA2D0M,EAAAH,CAAA,kBAE3DvM,EAkBM0M,EAAAI,EAAA,UAIR9M,EAkFMif,EAAAC,EAAA,EAjFLlf,EAeMkf,GAAA5R,EAAA,EAdLtN,EAAwDsN,GAAAL,EAAA,oBAExDjN,EAWMsN,GAAAC,EAAA,WAGPvN,EAsBMkf,GAAAxR,EAAA,EArBL1N,EAAuD0N,GAAAP,EAAA,oBAEvDnN,EAkBM0N,GAAApB,CAAA,WAGPtM,EAqBMkf,GAAAC,EAAA,EApBLnf,EAAoDmf,GAAAC,EAAA,oBAEpDpf,EAiBMmf,GAAAE,EAAA,WAGPrf,EAgBMkf,GAAAI,EAAA,EAfLtf,EAAuDsf,GAAAC,EAAA,oBAEvDvf,EAYMsf,GAAAE,EAAA,UAMVxf,EAEM+e,EAAAU,EAAA,EADLzf,EAA+Eyf,GAAAC,EAAA,mBAGhF1f,EA8CM+e,EAAAY,EAAA,EA7CL3f,EA4CM2f,GAAAC,EAAA,EA3CL5f,EA0CM4f,GAAAC,EAAA,EAzCL7f,EAYM6f,GAAAC,EAAA,EAXL9f,EAEM8f,GAAAC,EAAA,oBAEN/f,EAMM8f,GAAAE,EAAA,WAGPhgB,EAYM6f,GAAAI,EAAA,EAXLjgB,EAEMigB,GAAAC,EAAA,oBAENlgB,EAMMigB,GAAAE,EAAA,WAGPngB,EAYM6f,GAAAO,EAAA,EAXLpgB,EAEMogB,GAAAC,EAAA,oBAENrgB,EAMMogB,GAAAE,EAAA,2DAtPsC/gB,GAAK,CAAA,EAAC,EAAE,oBAAoB,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,eAwBjDhH,GAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAAC,EAAAC,CAAA,eAwBvBnC,GAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,KAAAiC,EAAAS,EAAAC,CAAA,eAkB1B3C,GAAK,CAAA,EAAC,EAAE,sBAAsB,EAAA,KAAAiC,EAAA6H,EAAAC,CAAA,eAwB9B/J,GAAK,CAAA,EAAC,EAAE,oBAAoB,EAAA,KAAAiC,EAAA+e,GAAAC,CAAA,iBA0B5BjhB,GAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,KAAAiC,EAAAif,GAAAC,EAAA,iBAiBzBnhB,GAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAAmf,GAAAC,EAAA,iBAwBxBrhB,GAAK,CAAA,EAAC,EAAE,aAAa,EAAA,KAAAiC,EAAAqf,GAAAC,EAAA,iBAuBrBvhB,GAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAAuf,GAAAC,EAAA,iBAqBHzhB,GAAK,CAAA,EAAC,EAAE,gBAAgB,EAAA,KAAAiC,EAAAyf,GAAAC,EAAA,iBAQlE3hB,GAAK,CAAA,EAAC,EAAE,aAAa,EAAA,KAAAiC,EAAA2f,GAAAC,EAAA,iBAcrB7hB,GAAK,CAAA,EAAC,EAAE,mBAAmB,EAAA,KAAAiC,EAAA6f,GAAAC,EAAA,iBAc3B/hB,GAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAiC,EAAA+f,GAAAC,EAAA,+eArPvB,MAAAnf,EAAOC,GAAW,MAAM,0BAEnB,KAAAyV,EAAO,EAAA,EAAAvV,eAUdO,EAAA,EAAAgV,EAAO,EAAK,6OCwBJpH,EAAA1E,GAAA,CAAA,OAAQ1M,EAAM,CAAA,CAAA,CAAA,uBAArB,OAAI8I,GAAA,0SADgE9I,EAAS,EAAA,CAAA,UAAjFM,EAmBMvC,EAAAsI,EAAA7F,CAAA,uEAlBK4Q,EAAA1E,GAAA,CAAA,OAAQ1M,EAAM,CAAA,CAAA,CAAA,oBAArB,OAAI8I,GAAA,EAAA,mHAAJ,wFADoE9I,EAAS,EAAA,CAAA,gNAKzDA,EAAY,CAAA,CAAA,gBACrBA,EAAI,CAAA,EAAA,IAAA,iBACHA,EAAQ,EAAA,EAAA,CAAA,gBACTkiB,GAAa,IAAM,EAAE,SAAOA,GAAa,IAAM,EAAE,EAAA,KAAA,EACzChb,GAAAb,EAAA,iBAAA6b,GAAe,IAAI,EAAE,OAAKA,GAAa,IAAM,EAAE,EAAK,KAAAA,GAAe,IAAI,EAAE,CAAA,wBACzEA,GAAc,EAAG,GAAG,EAAA,KAAA,EACVhb,GAAAb,EAAA,2BAAA6b,GAAcliB,EAAC,CAAA,EAAC,CAAC,EAAGA,KAAE,CAAC,CAAA,CAAA,EACvBkH,GAAAb,EAAA,2BAAA6b,GAAcliB,EAAC,CAAA,EAAC,CAAC,EAAGA,KAAE,CAAC,CAAA,CAAA,EACxCkH,GAAAb,EAAA,UAAA,GAAM6b,GAAc,EAAG,EAAE,CAAA,+BACXliB,EAAQ,CAAA,UAAWA,EAAQ,CAAA,CAAA,wBAA0BA,EAAQ,CAAA,CAAA,IAAA,EAChEkH,GAAAb,EAAA,qBAAA6b,GAAcliB,EAAK,CAAA,EAAC,CAAC,EAAGA,KAAM,CAAC,CAAA,EAAA,IAAA,sCACrBA,EAAQ,CAAA,EAAG,WAAaA,EAAc,CAAA,CAAA,EACvDkH,GAAAb,EAAA,aAAA,EAAIrG,EAAO,EAAA,CAAA,UAf3BM,EAeiCvC,EAAAsI,EAAA7F,CAAA,wCAZbR,EAAY,CAAA,CAAA,qBACrBA,EAAI,CAAA,EAAA,IAAA,OAKckH,GAAAb,EAAA,2BAAA6b,GAAcliB,EAAC,CAAA,EAAC,CAAC,EAAGA,KAAE,CAAC,CAAA,CAAA,OACvBkH,GAAAb,EAAA,2BAAA6b,GAAcliB,EAAC,CAAA,EAAC,CAAC,EAAGA,KAAE,CAAC,CAAA,CAAA,qCAE1BA,EAAQ,CAAA,UAAWA,EAAQ,CAAA,CAAA,wBAA0BA,EAAQ,CAAA,CAAA,IAAA,QAChEkH,GAAAb,EAAA,qBAAA6b,GAAcliB,EAAK,CAAA,EAAC,CAAC,EAAGA,KAAM,CAAC,CAAA,EAAA,IAAA,6CACrBA,EAAQ,CAAA,EAAG,WAAaA,EAAc,CAAA,CAAA,UACvDkH,GAAAb,EAAA,aAAA,EAAIrG,EAAO,EAAA,CAAA,0CAlB3BA,EAAQ,EAAA,GAAAiJ,GAAAjJ,CAAA,2FAARA,EAAQ,EAAA,iHAVHkiB,GAAcC,EAAKC,EAAG,CACtB,OAAA,KAAK,OAAM,GAAMA,EAAMD,GAAOA,qBA1B5B,GAAA,CAAA,KAAAE,EAAO,EAAE,EAAApf,GACT,EAAAqf,EAAC,CAAA,IAAU,EAAG,CAAA,EAAArf,GACd,EAAAsf,EAAC,CAAI,IAAM,CAAC,CAAA,EAAAtf,EACZ,CAAA,SAAAuf,EAAW,GAAI,EAAAvf,EACf,CAAA,SAAAwf,EAAW,EAAK,EAAAxf,GAChB,MAAAyf,EAAK,CAAI,EAAG,EAAE,CAAA,EAAAzf,GACd,WAAA0f,EAAU,CAAI,EAAG,GAAG,CAAA,EAAA1f,GACpB,WAAA2f,EAAU,EAAA,EAAA3f,EACV,CAAA,OAAA4f,EAAS,EAAE,EAAA5f,EACX,CAAA,eAAA6f,EAAiB,CAAC,EAAA7f,EAClB,CAAA,aAAA8f,EAAe,OAAO,EAAA9f,EACtB,CAAA,QAAA+f,EAAU,EAAK,EAAA/f,EACf,CAAA,KAAAggB,EAAO,EAAK,EAAAhgB,EACZ,CAAA,UAAAigB,EAAY,EAAK,EAAAjgB,EACjB,CAAA,QAAAkgB,EAAU,GAAI,EAAAlgB,EACd,CAAA,kBAAAmgB,EAAoB,EAAI,EAAAngB,EAE/BpF,EAAW,GAEfgG,GAAO,IAAA,CACA,CAAAuf,GAAqBX,GAAYK,GAAkB,YAExD,WAAU,IAAAtf,EAAA,GAAO3F,EAAW,EAAI,GAAG2kB,EAAWE,EAAM,CAAC,GAAKI,CAAc,aAOjEO,GAAQ,CACX,OAAAT,EAAW,OAAeA,EAAW,KAAK,MAAM,KAAK,OAAM,GAAMA,EAAW,OAAS,EAAC,CAAA,EAAA,OACvE,KAAK,MAAMV,GAAcS,EAAW,CAAC,EAAGA,EAAW,CAAC,CAAA,CAAA,CAAA,2hCC6B/D,OAAO,KAAK3iB,EAAS,CAAA,CAAA,CAAA,uBAA1B,OAAI8I,GAAA,mNAAC,OAAO,KAAK9I,EAAS,CAAA,CAAA,CAAA,oBAA1B,OAAI8I,GAAA,EAAA,2HAAJ,uDA4BO9B,EAAAhH,KAAUA,EAAO,CAAA,CAAA,EAAEA,EAAS,EAAA,CAAA,EAAAA,OAAM,MAAK,SAEjB4F,EAAA5F,KAAUA,EAAO,CAAA,CAAA,EAAEA,EAAS,EAAA,CAAA,EAAAA,OAAM,QAAO,+WAJlEM,EAKMvC,EAAAgD,EAAAP,CAAA,EAJLC,EAEMM,EAAAmE,CAAA,gBACNzE,EAAwEM,EAAAE,CAAA,iBAFtEe,EAAA,GAAAgF,KAAAA,EAAAhH,KAAUA,EAAO,CAAA,CAAA,EAAEA,EAAS,EAAA,CAAA,EAAAA,OAAM,MAAK,KAAAiC,EAAA8E,EAAAC,CAAA,EAEjBhF,EAAA,GAAA4D,KAAAA,EAAA5F,KAAUA,EAAO,CAAA,CAAA,EAAEA,EAAS,EAAA,CAAA,EAAAA,OAAM,QAAO,KAAAiC,EAAA0D,EAAAC,CAAA,2CATlE5F,EAAO,EAAA,EAAA,WAID2M,EAAAD,GAAA,OAAO,KAAK1M,EAAU,CAAA,EAAAA,MAASA,EAAO,EAAA,CAAA,CAAA,CAAA,uBAA3C,OAAI8I,GAAA,sVAd8BzI,EAAA6E,EAAA,QAAAiX,EAAA,gCAAAnc,QAAY,QAC7C,yBACAA,QAAY,QACZ,0BACAA,QAAY,UACZ,2BACAA,QAAY,UACZ,wBACA,IAAE,iCAAA,uDAVPM,EAyBMvC,EAAAgD,EAAAP,CAAA,EAxBLC,EAYMM,EAAAmE,CAAA,gBAENzE,EASMM,EAAAE,CAAA,0EAZJjB,EAAO,EAAA,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,EAV4BhF,EAAA,GAAAma,KAAAA,EAAA,gCAAAnc,QAAY,QAC7C,yBACAA,QAAY,QACZ,0BACAA,QAAY,UACZ,2BACAA,QAAY,UACZ,wBACA,IAAE,wDAME2M,EAAAD,GAAA,OAAO,KAAK1M,EAAU,CAAA,EAAAA,MAASA,EAAO,EAAA,CAAA,CAAA,CAAA,oBAA3C,OAAI8I,GAAA,EAAA,mHAAJ,2DAtBF9I,EAAO,CAAA,EAAA,SAAKA,EAAS,CAAA,EAACA,EAAO,CAAA,CAAA,EAAE,KAAI,aAK/BsjB,EAAA5W,GAAA,OAAO,KAAK1M,EAAU,CAAA,EAAAA,OAAU,OAAM3B,EAAA,CAAA,uBAA3C,OAAIyK,GAAA,0DAN8C,GAClD,aAAS,KAAG,qKADsC,GAClD,iBAAS,KAAG,qQAFfxI,EAmCMvC,EAAAkD,EAAAT,CAAA,EAlCLC,EAEMQ,EAAAiE,CAAA,qCAENzE,EAAyCQ,EAAAY,CAAA,wFAHtC7B,EAAO,CAAA,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,cAAKpF,EAAS,CAAA,EAACA,EAAO,CAAA,CAAA,EAAE,KAAI,KAAAiC,EAAAC,EAAAC,CAAA,OAK/BmhB,EAAA5W,GAAA,OAAO,KAAK1M,EAAU,CAAA,EAAAA,OAAU,OAAM3B,EAAA,CAAA,oBAA3C,OAAIyK,GAAA,EAAA,gHAAJ,2DA5CJ9I,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,kUAwBgBA,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,mCA6DvCA,EAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,WAnFlCujB,EAAA,IAAAC,GAAA,CAAA,MAAA,CAAA,EAAA,CAAA,GAAI,IAAI,EAAO,EAAA,CAAA,EAAG,EAAG,CAAA,CAAA,CAAA,QAiC/BxjB,EAAS,CAAA,GAAAiJ,GAAAjJ,CAAA,+DAlCbA,EAAW,CAAA,CAAA,qIAyB2B,GACtC,MAACiF,EAAa,wPA1BdjF,EAAW,CAAA,CAAA,yWAyB2B,GACtC,SAACiF,EAAa,2kCA9BlB3E,EAiCMvC,EAAAmD,EAAAV,CAAA,EAhCLC,EAwBMS,EAAAD,CAAA,EAvBLR,EAIMQ,EAAAiE,CAAA,kDACNzE,EAiBSQ,EAAAD,CAAA,SAEVP,EAMMS,EAAAE,CAAA,EALLX,EAAwEW,EAAAL,CAAA,gBACxEN,EAAgFW,EAAAN,CAAA,SAChFL,EAEMW,EAAAD,CAAA,yBAIRb,EAwDMvC,EAAA0D,EAAAjB,CAAA,EAvDLC,EA2CMgB,EAAAC,CAAA,EA1CLjB,EAyCMiB,EAAAb,CAAA,wBAEPJ,EAUMgB,EAAAE,CAAA,EATLlB,EAQSkB,EAAAN,CAAA,EADRZ,EAA0DY,EAAAgE,CAAA,4FArFzDrF,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAA8E,EAAAC,CAAA,iBACvBhH,EAAW,CAAA,CAAA,oBAuB4BA,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAA2G,EAAAC,CAAA,EAW1D7I,EAAS,CAAA,8EAkDUA,EAAK,CAAA,EAAC,EAAE,iBAAiB,EAAA,KAAAiC,EAAA2H,EAAAC,CAAA,+jBAzCC4Z,GAAYA,IAAY,8EA5DvE,MAAA3gB,EAAOC,GAAW,MAAM,0BAEnB,KAAAyV,EAAO,EAAA,EAAAvV,EAEdygB,EAAY,KAEhB7f,GAAA,SAAA,OACOgE,EAAY,MAAA8b,SAClBD,EAAY7b,CAAA,iBAeT,aAAa,QAAUoJ,EAAQ,QAC/BzN,EAAA,EAAAgV,EAAO,EAAK,UAwEZ,aAAa,QAAUvH,EAAQ,QAC/BzN,EAAA,EAAAgV,EAAO,EAAK,kzBCnGFxY,EAAW,CAAA,CAAA,2CAElBA,EAAS,CAAA,CAAA,UANjBM,EAaMvC,EAAA6I,EAAApG,CAAA,EALLC,EAIEmG,EAAAsF,CAAA,oCARYlM,EAAW,CAAA,CAAA,mBAElBA,EAAS,CAAA,CAAA,mDAVL,UAAAuY,EAAY,SAAA,EAAAtV,GACZ,YAAA4X,EAAc,GAAA,EAAA5X,+/BCQXjD,EAAW,CAAA,CAAA,cAClBA,EAAS,CAAA,CAAA,UANjBM,EAaMvC,EAAA6I,EAAApG,CAAA,EALLC,EAIEmG,EAAAsF,CAAA,oCAPYlM,EAAW,CAAA,CAAA,mBAClBA,EAAS,CAAA,CAAA,mDAVL,UAAAuY,EAAY,QAAA,EAAAtV,GACZ,YAAA4X,EAAc,GAAA,EAAA5X,qeC0CUjD,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,iRAAvDM,EAA+DvC,EAAAsI,EAAA7F,CAAA,wCAA/BR,EAAK,CAAA,EAAC,EAAE,eAAe,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,+HAWvBpF,EAAK,CAAA,EAAC,EAAE,oBAAoB,EAAA,iRAA5DM,EAAoEvC,EAAAsI,EAAA7F,CAAA,wCAApCR,EAAK,CAAA,EAAC,EAAE,oBAAoB,EAAA,KAAAiC,EAAAkD,EAAAC,CAAA,wqCAxBjD,oCAGA0V,6MANdxa,EA8BMvC,EAAAsI,EAAA7F,CAAA,yjBA/CA,MAAAsC,EAAOC,GAAW,MAAM,sBAEnB,GAAA,CAAA,gBAAA6gB,CAAA,EAAA3gB,EACA,CAAA,qBAAA4gB,CAAA,EAAA5gB,EAEA,CAAA,QAAAmY,EAAA,IAAA,mBAwBP,OAAO,KAAK,6BAA8B,QAAQ,UAWlDyI,OA/BQ7f,GAAC,CACRA,EAAE,SAAW,IAChBoX,kpBCQA9a,EAISvC,EAAA4I,EAAAnG,CAAA,8EALQR,EAAK,CAAA,EAAC,EAAE,MAAM,wKAAdA,EAAK,CAAA,EAAC,EAAE,MAAM,0TAUPA,EAAa,CAAA,IAAA,gBAAbA,EAAa,CAAA,ybA3BxCM,EAyBMvC,EAAAsI,EAAA7F,CAAA,EAxBLC,EAME4F,EAAAM,CAAA,iPAoBwB3G,EAAa,CAAA,4MApCjC,MAAA8C,EAAOC,GAAW,MAAM,0BAM1B+gB,EAAgB,gBAQlBtgB,EAAA,EAAAsgB,GAAiBA,CAAa,UAM9BtgB,EAAA,EAAAsgB,GAAiBA,CAAa,UAG9BtgB,EAAA,EAAAsgB,GAAiBA,CAAa,iBAaNA,EAAarmB,2HCNrB2H,EAAApF,KAAa,KAAI,OAAImC,EAAAnC,KAAa,MAAK,4CAA/C,SAAO,aAAmB,IAAE,aAAoB,GAAC,qFAAjD,SAAO,iBAAmB,IAAE,iBAAoB,GAAC,sGADvDM,EAEMvC,EAAAkD,EAAAT,CAAA,EADLC,EAA4DQ,EAAAiE,CAAA,6CAA/ClD,EAAA,GAAAoD,KAAAA,EAAApF,KAAa,KAAI,KAAAiC,EAAAkD,EAAAC,CAAA,EAAIpD,EAAA,GAAAG,KAAAA,EAAAnC,KAAa,MAAK,KAAAiC,EAAAC,EAAAC,CAAA;gGAWnDnC,EAAK,CAAA,EAAC,EAAE,aAAa,EAAA,WAQlBA,EAAK,CAAA,EAAC,EAAE,UAAU,EAAA,WArBnBA,EAAY,CAAA,GAAAiJ,GAAAjJ,CAAA,i7CAfrBM,EA0CMvC,EAAAmD,EAAAV,CAAA,EAzCLC,EAwCMS,EAAAE,CAAA,EArCLX,EAoCMW,EAAAD,CAAA,EAnCLV,EAkCMU,EAAAL,CAAA,EAjCLL,EAEMK,EAAAoE,CAAA,SAENzE,EAGMK,EAAAG,CAAA,+BAQNR,EAiBMK,EAAAC,CAAA,EAhBLN,EAOSM,EAAAC,CAAA,gBAETP,EAMCM,EAAAM,CAAA,uEAtBGrB,EAAY,CAAA,qEAadA,EAAK,CAAA,EAAC,EAAE,aAAa,EAAA,KAAAiC,EAAAK,EAAAC,CAAA,cAQlBvC,EAAK,CAAA,EAAC,EAAE,UAAU,EAAA,KAAAiC,EAAAO,EAAAC,CAAA,yEAhDrB,MAAAK,EAAOC,GAAW,MAAM,0BAE1BghB,EAAe,KAEnB,OAAAlgB,GAAA,SAAA,CACCL,EAAA,EAAAugB,EAAA,MAAqBC,GAAgB,aAAa,KAAK,EAAE,MAAOC,IAC/D,QAAQ,MAAMA,CAAG,EACV,2BA8BH,SAAS,KAAO,eAShB,aAAa,WAAW,OAAO,EAC/B,SAAS,KAAO,wKC6IbtN,GAAA,OAAAA,EAAA,CAAA,CAAA,OAAQ,OAAO,EAAE,SAAS3W,KAAM,IAAI,OAEjCA,EAAY,CAAA,EAAC,OAAS,EAAC,mwBAY1BA,EAAK,CAAA,EAAC,EACN,kPAAkP,EAAA,WAGhPA,EAAK,CAAA,EAAC,EAAE,UAAU,EAAA,SAAMA,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,SAAMA,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,SAClEA,EAAK,CAAA,EAAC,EACT,uGAAuG,EAAA,uCA2BnGA,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,8IA7BG,KAAG,aAAkB,KAAG,aAC9C,IAAE,kbADoB,KAAG,mBAAkB,KAAG,gCAC9C,IAAE,8+BAhBRM,EAkDMvC,EAAAmD,EAAAV,CAAA,EAjDLC,EAgDMS,EAAAE,CAAA,EA7CLX,EA4CMW,EAAAD,CAAA,EA3CLV,EA0CMU,EAAAL,CAAA,EAzCLL,EAEMK,EAAAoE,CAAA,SAENzE,EASMK,EAAAG,CAAA,gBALLR,EAECQ,EAAAoE,CAAA,0DAKF5E,EAyBMK,EAAAC,CAAA,EAxBLN,EAgBSM,EAAAC,CAAA,SAETP,EAKCM,EAAAM,CAAA,oFAlCArB,EAAK,CAAA,EAAC,EACN,kPAAkP,EAAA,KAAAiC,EAAAC,EAAAC,CAAA,eAGhPnC,EAAK,CAAA,EAAC,EAAE,UAAU,EAAA,KAAAiC,EAAAG,EAAAC,CAAA,eAAMrC,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAiC,EAAAK,EAAAC,CAAA,eAAMvC,EAAK,CAAA,EAAC,EAAE,cAAc,EAAA,KAAAiC,EAAAO,EAAAC,CAAA,eAClEzC,EAAK,CAAA,EAAC,EACT,uGAAuG,EAAA,KAAAiC,EAAAS,EAAAC,CAAA,eA2BnG3C,EAAK,CAAA,EAAC,EAAE,OAAO,EAAA,KAAAiC,EAAAsM,EAAAC,CAAA,wUAvDHxO,EAAa,CAAA,IAAA,gBAAbA,EAAa,CAAA,mFACZA,EAAc,CAAA,IAAA,gBAAdA,EAAc,CAAA,yDAMlCA,EAAM,CAAA,GAAAiJ,GAAAjJ,CAAA,uiBAJbM,EAiEMvC,EAAAkD,EAAAT,CAAA,EAhELC,EA+DMQ,EAAAiE,CAAA,kEAnEmBlF,EAAa,CAAA,4DACZA,EAAc,CAAA,0BAMlCA,EAAM,CAAA,ieA1LJ,OAAAoT,CAAW,EAAAC,GAqCbvQ,EAAOC,GAAW,MAAM,0BAG1BmhB,EAAS,GAETC,EAAK,KACLC,EAAA,CAAA,EAIE,MAAAjd,EAAA,SACEwT,GAAW,aAAa,KAAK,EAGrC9W,GAAA,SAAA,IACKN,IAAU,OACP,MAAA8Q,GAAK,OAAO,UACP,CAAA,OAAQ,OAAO,EAAE,SAAS9Q,EAAM,IAAI,EAAA,KAK1C,OAFJ4gB,EAAW,MAAAxlB,GAAO,QAAS,CAAC,CAAA,EAExBwlB,EAAA,OACGpQ,EAAc,MAAAoQ,EAAG,gBAAgB,QAAS,WAAW,MAC3DC,EAAerQ,EAAM,KAAKsQ,EAAM7O,IAAQzB,EAAMA,EAAM,OAAS,EAAIyB,CAAG,CAAA,CAAA,EAEhE4O,EAAa,SAAW,GACrB,MAAA/kB,GAAS,OAAO,EAIxB,QAAQ,IAAI8kB,CAAE,CACN5mB,MAAAA,EAIH,MAAA+mB,EAAA,MAAqBC,GAAgB,aAAa,KAAK,EAAE,MAAOhnB,IACrE,QAAQ,MAAMA,CAAK,EACZ,OAGJ+mB,QACG7J,GAAS,IAAI6J,EAAa,EAAE,EAE5B,MAAA7J,GAAS,IAAI,KAAK,MAAM,aAAa,QAAQ,UAAU,GAAK,IAAI,CAAA,QAGjE,QAAQ,IAAA,YAEZtS,GAAO,IAAU,MAAAhB,EAAA,CAAA,iBAGjBqd,GAAQ,IAAA,MAAUC,GAAW,aAAa,KAAK,CAAA,iBAG/CC,GAAU,IAAA,MAAUC,GAAQ,aAAa,KAAK,CAAA,iBAG9CC,GAAQ,IAAA,MAAUC,GAAW,aAAa,KAAK,CAAA,iBAG/C5F,GAAK,IAAA,MAAUC,GAAe,aAAa,KAAK,CAAA,QAIlD,SAAS,iBAAiB,UAAqB,SAAA/f,EAAA,qBACxC2lB,EAAgB3lB,EAAM,SAAWA,EAAM,QAEvC4lB,EAAiB5lB,EAAM,YAGzB2lB,GAAiBC,GAAkB5lB,EAAM,IAAI,YAAkB,IAAA,MAClEA,EAAM,eAAA,EACN,QAAQ,IAAI,SAAS,GACrBsM,EAAA,SAAS,eAAe,yBAAyB,IAAjD,MAAAA,EAAoD,SAIjDsZ,GAAkB5lB,EAAM,MAAQ,WACnCA,EAAM,eAAA,EACN,QAAQ,IAAI,YAAY,GACxBuM,EAAA,SAAS,eAAe,eAAe,IAAvC,MAAAA,EAA0C,SAIvCoZ,GAAiBC,GAAkB5lB,EAAM,MAAQ,IAAA,CACpDA,EAAM,eAAA,EACN,QAAQ,IAAI,mBAAmB,EACzB,MAAAwH,EAAA,CAAA,GAAa,SAAS,uBAAuB,kBAAkB,CAAA,EAAI,KAAK,EAC9EA,GAAA,MAAAA,EAAQ,WAILme,GAAiBC,GAAkB5lB,EAAM,IAAI,YAAkB,IAAA,IAAA,CAClEA,EAAM,eAAA,EACN,QAAQ,IAAI,kBAAkB,EACxB,MAAAwH,EAAA,CAAA,GAAa,SAAS,uBAAuB,sBAAsB,CAAA,EAAI,KAAK,EAClF,QAAQ,IAAIA,CAAM,EAClBA,GAAA,MAAAA,EAAQ,QAILme,GAAiBC,GAAkB5lB,EAAM,IAAI,YAAkB,IAAA,MAClEA,EAAM,eAAA,EACN,QAAQ,IAAI,eAAe,GAC3B+R,EAAA,SAAS,eAAe,uBAAuB,IAA/C,MAAAA,EAAkD,SAI/C4T,GAAiBC,GAAkB5lB,EAAM,MAAQ,cACpDA,EAAM,eAAA,EACN,QAAQ,IAAI,YAAY,GACxBgS,EAAA,SAAS,eAAe,oBAAoB,IAA5C,MAAAA,EAA+C,SAI5C2T,GAAiB3lB,EAAM,MAAQ,MAClCA,EAAM,eAAA,EACN,QAAQ,IAAI,cAAc,EAC1B6lB,GAAa,KAAKC,CAAa,GAI5BH,GAAiB3lB,EAAM,MAAQ,MAClCA,EAAM,eAAA,EACN,QAAQ,IAAI,eAAe,GAC3B6T,EAAA,SAAS,eAAe,uBAAuB,IAA/C,MAAAA,EAAkD,WAIhDzP,EAAM,OAAS,SAClB6C,GAAc,IAAI,aAAa,UAAY6K,EAAQ,OAAO,EAGrD,MAAAiU,GAAA,MAGPhB,EAAS,EAAA,kBAKee,EAAaxnB,0BACZ0nB,EAAc1nB,kCAmC1ByW,EAAI,IAAO,KAAI,CAAE,KAAK,UAAUkQ,CAAY,CAAA,EAAA,CAC/C,KAAM,kBAAkB,CAAA,EAEzBhR,EAAOc,EAAqB,eAAA,KAAK,IAAG,CAAA,OAAA,EAE9B,MAAAvW,EAAKwmB,EAAG,YAAY,QAAS,WAAW,QACxC,QAAQ,IAAG,CAAExmB,EAAG,MAAM,QAASA,EAAG,IAAI,CAAA,EACtC,MAAA0B,GAAS,OAAO,MAEtB+kB,EAAY,CAAA,CAAA,mBASZA,EAAY,CAAA,CAAA","x_google_ignoreList":[0,1,21]}